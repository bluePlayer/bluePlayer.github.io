window.WML=window.WML||function(e){"use strict";var t=e,n=null,s=null,a=0,o=1,l=0,d=[],r=!0,u=!0,i=!0,c=!1,S=640,g=480,A=260,p="CgkIuo2BoowdEAIQBg",O="gameContainer",m=new Phaser.Game(S,g,Phaser.AUTO,O),_={loadingLabel:null,preloaderBottom:null,preloaderTop:null,loadingObjects:null,loadingBarYPos:250,ready:!1,loadingTween:null};return{Exceptions:{},Const:{},Events:{},wmlPreloader:null,createWmlPreloader:function(){return _.loadingObjects=m.add.group(),_.loadingLabel=m.add.sprite(220,_.loadingBarYPos-70,s.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"loadingLabel.png"),_.loadingObjects.add(_.loadingLabel),_.preloaderBottom=m.add.graphics(265,_.loadingBarYPos),_.preloaderBottom.beginFill(5723991,1),_.preloaderBottom.drawRect(0,0,104,15),_.loadingObjects.add(_.preloaderBottom),_.preloaderTop=m.add.graphics(265,_.loadingBarYPos),_.preloaderTop.beginFill(11053224,1),_.preloaderTop.drawRect(2,2,0,11),_.loadingObjects.add(_.preloaderTop),_},SoundAssetKeys:{},ImageAssetKeys:{},getFirstVisit:function(){return r},getScoreBoardId:function(){return p},enableMoveCards:function(){u=!0},disableMoveCards:function(){u=!1},getMoveCards:function(){return u},enableShowArrows:function(){i=!0},disableShowArrows:function(){i=!1},getShowArrows:function(){return i},gameObject:m,debugMode:function(){return c},getScore:function(){return a},getGameProgress:function(){return o},updateScore:function(){var e=0,t=0;for(e=0;e<d.length;e+=1)t+=d[e];a=t},getCurrentLevel:function(){return l},setCurrentLevel:function(e){return l=0>e?0:e>s.Const.LEVELS_COUNT-1?s.Const.LEVELS_COUNT-1:e},incrCurrentLevel:function(){return l<s.Const.LEVELS_COUNT-1&&(l+=1),l},decrCurrentLevel:function(){return l>0&&(l-=1),l},incrementGameProgress:function(){return o<s.Const.LEVELS_COUNT&&(o+=1),o},fadeOutGroup:function(e){var t=null;return e.forEach(function(e){var n=this;t=n.gameObject.add.tween(e).to({alpha:0},n.Const.FADE_DURATION,n.Const.TWEEN_LINEAR,!0)},s),t},fadeInGroup:function(e){var t=null;return e.forEach(function(e){var n=this;e.alpha=0,t=n.gameObject.add.tween(e).to({alpha:1},n.Const.FADE_DURATION,n.Const.TWEEN_LINEAR,!0)},s),t},setLevelPoints:function(e,t){e>=0&&e<s.Const.LEVELS_COUNT&&(d[e]=t)},getLevelPointsArray:function(){return d.slice()},clearLevelPointsArray:function(){var e=0;for(d=[],e=0;e<s.Const.LEVELS_COUNT;e+=1)d.push(0)},addConstant:function(e,t,n){(void 0===n||null===n)&&(n=t),(null===e||void 0===e)&&(e={}),Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:n,writable:!1})},loadAtlasJSONHash:function(e,t,n,a){s.addConstant(s.ImageAssetKeys,e,t),m.load.atlasJSONHash(s.ImageAssetKeys[e],n,a)},loadSpriteSheet:function(e,t,n,a,o,l){s.addConstant(s.ImageAssetKeys,e,t),m.load.spritesheet(s.ImageAssetKeys[e],n,a,o,l)},loadImage:function(e,t,n){s.addConstant(s.ImageAssetKeys,e,t),m.load.image(s.ImageAssetKeys[e],n)},loadAudio:function(e,t,n){s.addConstant(s.SoundAssetKeys,e,t),m.load.audio(s.SoundAssetKeys[e],n,!0)},namespace:function(e,t,n){var s=e.split("."),a=Object.create(t),o=this,l=0,d={};for((null===t||void 0===t)&&(t={}),s[0]===o.Const.GAME_NAME&&(s=s.slice(1)),l=0;l<s.length;l+=1){if(void 0===o[s[l]]){for(d in n)n.hasOwnProperty(d)&&(a[d]=n[d]);o[s[l]]=a}o=o[s[l]]}return o},loadStorageData:function(){var e=0,n=null,l=null,u=null,i=null,c=[];if(n=t.localStorage.getItem("firstVisit"),null===n?t.localStorage.setItem("firstVisit",r):(r=!1,t.localStorage.setItem("firstVisit",r)),l=t.localStorage.getItem("score"),null===l?t.localStorage.setItem("score",a):a=parseInt(l,10),u=t.localStorage.getItem("gameProgress"),null===u?t.localStorage.setItem("gameProgress",o):o=parseInt(u,10),i=t.localStorage.getItem("levelPointsArray"),null===i)s.clearLevelPointsArray(),t.localStorage.setItem("levelPointsArray",d);else for(c=i.split(","),e=0;e<s.Const.LEVELS_COUNT;e+=1)d.push(parseInt(c[e],10))},addNewGameState:function(e,t){s.addConstant(e,"KEY",t),m.state.add(e.KEY,e)},init:function(e){n=e,s=this,s.addConstant(s.Const,"GAME_NAME","Wonders in Math Land"),s.addConstant(s.Const,"VERSION","4.0.0"),s.addConstant(s.Const,"STAGE_WIDTH",S),s.addConstant(s.Const,"STAGE_HEIGHT",g),s.addConstant(s.Const,"LOWER_HEIGHT",A),s.addConstant(s.Const,"TWEEN_LINEAR","Linear"),s.addConstant(s.Const,"FADE_DURATION",500),s.addConstant(s.Const,"MOVE_DURATION",1e3),s.addConstant(s.Const,"LEVELS_COUNT",21),s.addConstant(s.Const,"LEVELS_PER_ROW",7),s.addConstant(s.Const,"BACKGROUND_COLOR","#C0C0C0"),s.addConstant(s.Const,"BLOG_LINK","http://spinnerbox.blogspot.com"),s.addConstant(s.Const,"BLOG_NAME","Spinnerbox"),s.addConstant(s.Const,"GAME_LINK","http://wml-spinnerbox.rhcloud.com//"),s.addConstant(s.Const,"GALLERY_LINK_NAME","gallery"),s.addConstant(s.Const,"GALLERY_LINK","http://spinnerbox.blogspot.com/2013/11/beautiful-wallpapers.html"),s.addConstant(s.Const,"GAME_LINK_NAME","Wonders in Math Land"),s.addConstant(s.Const,"TWITTER_URL",null),s.addConstant(s.Const,"FACEBOOK_URL",null),s.addConstant(s.Const,"BLOG_URL",null),s.addConstant(s.Const,"TIMER_DELAY",1e3),s.addConstant(s.Const,"LOOP_DELAY",100),s.addConstant(s.Const,"TIME_ADD_ARROWS_FACTOR",80),s.addConstant(s.Const,"TIME_MOVE_CARDS_FACTOR_70",70),s.addConstant(s.Const,"TIME_MOVE_CARDS_FACTOR_90",90),s.addConstant(s.Const,"TIME_MOVE_CARDS_FACTOR_110",110),s.addConstant(s.Const,"TIME_MOVE_CARDS_FACTOR_130",130),s.addConstant(s.Const,"NUM_OF_CARD_FRAMES",14),s.addConstant(s.Const,"NUM_OF_CARDS_PER_SPRITE",13),s.addConstant(s.Const,"LAST_CARD_START_POS",168),s.addNewGameState(s.Boot,"BOOT"),s.addNewGameState(s.Preloader,"PRELOADER"),s.addNewGameState(s.MainMenuScreen,"MAIN_MENU_SCREEN"),s.addNewGameState(s.LevelsScreen,"LEVELS_SCREEN"),s.addNewGameState(s.HelpScreen,"HELP_SCREEN"),s.addNewGameState(s.GameScreen,"GAME_SCREEN"),s.addNewGameState(s.BreakPointScreen,"BREAK_POINT_SCREEN"),s.addNewGameState(s.OptionsScreen,"OPTIONS_SCREEN"),s.addNewGameState(s.GameOverScreen,"GAME_OVER_SCREEN"),s.addNewGameState(s.TestScreen,"TEST_SCREEN"),s.loadStorageData(),m.state.start(s.Boot.KEY)}}}(window),window.WML.namespace("Utility",{},function(e){"use strict";var t=(e.gameObject,{font:"bold 20pt Verdana",align:"center"}),n={font:"bold 17pt Verdana",align:"center"},s={font:"bold 12pt Verdana",align:"center"};return{deepFreezeAnObject:function(e){var t,n;Object.freeze(e);for(n in e)t=e[n],e.hasOwnProperty(n)&&"object"==typeof t&&!Object.isFrozen(t)&&deepFreeze(t)},createSafeArray:function(e){return e.slice()},disableDisplayObject:function(e){e.inputEnabled=!1},enableDisplayObject:function(e){e.inputEnabled=!0},numOfElemInObject:function(e){return Object.keys(e).length},getTextStyle20:function(){return t},getTextStyle17:function(){return n},getTextStyle12:function(){return s},randomNumber:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},shuffleCards:function(e){for(var t=e.length,n=null,s=null;0!==t;)s=Math.floor(Math.random()*t),t-=1,n=e[t],e[t]=e[s],e[s]=n;return e}}}(window.WML)),window.WML.namespace("State",{},function(e){"use strict";e.gameObject;return{}}(window.WML)),window.WML.namespace("Boot",window.WML.State,function(e){"use strict";var t=null;return{init:function(){t=e.gameObject,t.input.maxPointers=1,t.stage.disableVisibilityChange=!0,t.device.desktop?t.scale.pageAlignHorizontally=!0:(t.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,t.scale.setMinMax(e.Const.STAGE_HEIGHT,e.Const.LOWER_HEIGHT,e.Const.STAGE_WIDTH,e.Const.STAGE_HEIGHT),t.scale.forceLandscape=!0,t.scale.pageAlignHorizontally=!0)},preload:function(){t.stage.backgroundColor=e.Const.BACKGROUND_COLOR,e.loadAtlasJSONHash("OTHER_GUI_ASSETS_ATLAS",null,"assets/images/UI/otherGuiAssetsSheet.png","assets/settings/otherGuiAssetsHash.json")},create:function(){t.state.start(e.Preloader.KEY),t.state.clearCurrentState()},shutdown:function(){t=null}}}(window.WML)),window.WML.namespace("WMLButton",{},function(e){"use strict";var t=e.gameObject,n=null,s=null,a=null;return{WMLButton:function(o,l,d,r,u,i,c,S,g,A,p,O,m,_,y){return null!==u&&void 0!==u&&"function"==typeof u&&(n=t.add.button(o,l,d,u,r,O,m,_,y),s=null!==A&&void 0!==A&&"string"==typeof A&&e.SoundAssetKeys.hasOwnProperty(A)?t.add.audio(e.SoundAssetKeys[A]):null,n.setOverSound(s),a=t.add.audio(null!==p&&void 0!==p&&"string"==typeof p&&e.SoundAssetKeys.hasOwnProperty(p)?e.SoundAssetKeys[p]:e.SoundAssetKeys.CLICK_SOUND),n.setDownSound(a),null!==i&&void 0!==i&&"function"==typeof i&&n.onInputOver.add(i,r),null!==c&&void 0!==c&&"function"==typeof c&&n.onInputOut.add(c,r),null!==S&&void 0!==S&&"function"==typeof S&&n.onInputDown.add(S,r),null!==g&&void 0!==g&&"function"==typeof g&&n.onInputUp.add(g,r)),n}}}(window.WML)),window.WML.namespace("GoToScreen",window.WML.WMLButton,function(e){"use strict";var t=(e.gameObject,null),n=null;return{Button:function(s,a,o,l,d,r,u,i,c,S,g,A,p,O,m,_){return n=this.CreateGoToScreenClickHandler(e,a,s,m,_),t=this.WMLButton(o,l,d,r,n,u,i,c,S,null,null,g,A,p,O)},CreateGoToScreenClickHandler:function(e,t,n,s,a){return function(){void 0!==a&&null!==a&&"function"==typeof a&&(null!==s&&void 0!==s?a.apply(a,s):a()),e.fadeOutGroup(t).onComplete.add(function(){var e=this;e.gameObject.state.start(n,!0,!1,s),e.gameObject.state.clearCurrentState()},e)}}}}(window.WML)),window.WML.namespace("Screen",window.WML.State,function(e){"use strict";e.gameObject;return{screenObjects:null,clearScreenState:function(){this.screenObjects=null}}}(window.WML)),window.WML.namespace("OptionsScreen",window.WML.Screen,function(e){"use strict";var t=null,n=null,s=null,a=null,o=null,l=null,d=null,r=null,u=null,i=null,c=null;return{init:function(){n=this,t=e.gameObject,n.screenObjects=t.add.group()},create:function(){s=t.add.sprite(0,0,e.ImageAssetKeys.GUIDES_AND_BACKGROUNDS_ATLAS,"woodBg.jpg"),n.screenObjects.add(s),a=t.add.sprite(235,15,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"optionsTitle.png"),n.screenObjects.add(a),o=e.GoToScreen.Button(e.MainMenuScreen.KEY,n.screenObjects,235,430,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,n,null,null,null,null,3,2,2,3),n.screenObjects.add(o),l=t.add.text(150,100,"Move cards ",e.Utility.getTextStyle20()),n.screenObjects.add(l),d=t.add.sprite(400,95,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png"),d.inputEnabled=!0,d.events.onInputDown.add(function(){var t=this;t.getMoveCards()?(t.disableMoveCards(),d.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png")):(t.enableMoveCards(),d.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png"))},e),n.screenObjects.add(d),e.getMoveCards()?d.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png"):d.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png"),r=t.add.text(150,150,"Show arrows ",e.Utility.getTextStyle20()),n.screenObjects.add(r),u=t.add.sprite(400,145,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png"),u.inputEnabled=!0,u.events.onInputDown.add(function(){var t=this;t.getShowArrows()?(t.disableShowArrows(),u.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png")):(t.enableShowArrows(),u.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png"))},e),n.screenObjects.add(u),e.getShowArrows()?u.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png"):u.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png"),c=t.add.text(150,200,"Sound ",e.Utility.getTextStyle20()),n.screenObjects.add(c),i=t.add.sprite(400,195,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"),i.inputEnabled=!0,i.events.onInputDown.add(n.muteOnOffSound,e),n.screenObjects.add(i),t.sound.mute?i.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"):i.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOn.png"),e.fadeInGroup(n.screenObjects)},muteOnOffSound:function(){var t=this,n=t.gameObject;n.sound.mute?(i.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOn.png"),n.sound.mute=!1):(i.loadTexture(e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"),n.sound.mute=!0)}}}(window.WML)),window.WML.namespace("Preloader",window.WML.Screen,function(e){"use strict";var t=null,n=null;return{init:function(){n=this,t=e.gameObject,e.wmlPreloader=e.createWmlPreloader()},preload:function(){e.loadAudio("CLICK_SOUND",null,["assets/audio/basic/ogg/buttonClick.ogg","assets/audio/basic/mp3/buttonClick.mp3"]),e.loadAudio("BOX_OPEN_SOUND",null,["assets/audio/basic/ogg/boxOpen.ogg","assets/audio/basic/mp3/boxOpen.mp3"]),e.loadAudio("FLIP_CARD_SOUND",null,["assets/audio/basic/ogg/flipCard.ogg","assets/audio/basic/mp3/flipCard.mp3"]),e.loadAudio("LEVEL_COMPLETE_SOUND",null,["assets/audio/basic/ogg/levelComplete.ogg","assets/audio/basic/mp3/levelComplete.mp3"]),e.loadAudio("YES_SOUND",null,["assets/audio/basic/ogg/yesEffect.ogg","assets/audio/basic/mp3/yesEffect.mp3"]),e.loadAudio("NICE_SOUND",null,["assets/audio/match/ogg/nice.ogg","assets/audio/match/mp3/nice.mp3"]),e.loadAudio("YES_MATCH_SOUND",null,["assets/audio/match/ogg/yes.ogg","assets/audio/match/mp3/yes.mp3"]),e.loadAudio("MISS_SOUND",null,["assets/audio/miss/ogg/miss.ogg","assets/audio/miss/mp3/miss.mp3"]),e.loadAudio("NOOO_SOUND",null,["assets/audio/miss/ogg/nooo.ogg","assets/audio/miss/mp3/nooo.mp3"]),e.loadAudio("NO_SOUND",null,["assets/audio/basic/ogg/noEffect.ogg","assets/audio/basic/mp3/noEffect.mp3"]),e.loadAudio("CARD_1_SOUND","NATURE",["assets/audio/cards/ogg/nature.ogg","assets/audio/cards/mp3/nature.mp3"]),e.loadAudio("CARD_2_SOUND","IMAGINATION",["assets/audio/cards/ogg/imagination.ogg","assets/audio/cards/mp3/imagination.mp3"]),e.loadAudio("CARD_3_SOUND","PLANE",["assets/audio/cards/ogg/plane.ogg","assets/audio/cards/mp3/plane.mp3"]),e.loadAudio("CARD_4_SOUND","POINT_LINE",["assets/audio/cards/ogg/pointLine.ogg","assets/audio/cards/mp3/pointLine.mp3"]),e.loadAudio("CARD_5_SOUND","TRIANGLE",["assets/audio/cards/ogg/triangle.ogg","assets/audio/cards/mp3/triangle.mp3"]),e.loadAudio("CARD_6_SOUND","SQUARE",["assets/audio/cards/ogg/square.ogg","assets/audio/cards/mp3/square.mp3"]),e.loadAudio("CARD_7_SOUND","RECTANGLE",["assets/audio/cards/ogg/rectangle.ogg","assets/audio/cards/mp3/rectangle.mp3"]),e.loadAudio("CARD_8_SOUND","RHOMBUS",["assets/audio/cards/ogg/rhombus.ogg","assets/audio/cards/mp3/rhombus.mp3"]),e.loadAudio("CARD_9_SOUND","TRAPEZIUM",["assets/audio/cards/ogg/trapezium.ogg","assets/audio/cards/mp3/trapezium.mp3"]),e.loadAudio("CARD_10_SOUND","POLYGON",["assets/audio/cards/ogg/polygon.ogg","assets/audio/cards/mp3/polygon.mp3"]),e.loadAudio("CARD_11_SOUND","VECTOR",["assets/audio/cards/ogg/vector.ogg","assets/audio/cards/mp3/vector.mp3"]),e.loadAudio("CARD_12_SOUND","HONEYCOMB",["assets/audio/cards/ogg/honeycomb.ogg","assets/audio/cards/mp3/honeycomb.mp3"]),e.loadAudio("CARD_13_SOUND","STAR",["assets/audio/cards/ogg/star.ogg","assets/audio/cards/mp3/star.mp3"]),e.loadAudio("CARD_14_SOUND","SNOWFLAKE",["assets/audio/cards/ogg/snowflake.ogg","assets/audio/cards/mp3/snowflake.mp3"]),e.loadAudio("CARD_15_SOUND","CURVES",["assets/audio/cards/ogg/curves.ogg","assets/audio/cards/mp3/curves.mp3"]),e.loadAudio("CARD_16_SOUND","SPIRAL",["assets/audio/cards/ogg/spiral.ogg","assets/audio/cards/mp3/spiral.mp3"]),e.loadAudio("CARD_17_SOUND","LEMINISCATE",["assets/audio/cards/ogg/leminiscate.ogg","assets/audio/cards/mp3/leminiscate.mp3"]),e.loadAudio("CARD_18_SOUND","CIRCLE",["assets/audio/cards/ogg/circle.ogg","assets/audio/cards/mp3/circle.mp3"]),e.loadAudio("CARD_19_SOUND","ELLIPSE",["assets/audio/cards/ogg/ellipse.ogg","assets/audio/cards/mp3/ellipse.mp3"]),e.loadAudio("CARD_20_SOUND","3D_SYSTEM",["assets/audio/cards/ogg/3dSystem.ogg","assets/audio/cards/mp3/3dSystem.mp3"]),e.loadAudio("CARD_21_SOUND","PYRAMID",["assets/audio/cards/ogg/pyramid.ogg","assets/audio/cards/mp3/pyramid.mp3"]),e.loadAudio("CARD_22_SOUND","GYZA",["assets/audio/cards/ogg/gizaPyramids.ogg","assets/audio/cards/mp3/gizaPyramids.mp3"]),e.loadAudio("CARD_23_SOUND","CONE",["assets/audio/cards/ogg/cone.ogg","assets/audio/cards/mp3/cone.mp3"]),e.loadAudio("CARD_24_SOUND","CUBE",["assets/audio/cards/ogg/cube.ogg","assets/audio/cards/mp3/cube.mp3"]),e.loadAudio("CARD_25_SOUND","PRISM",["assets/audio/cards/ogg/prism.ogg","assets/audio/cards/mp3/prism.mp3"]),e.loadAudio("CARD_26_SOUND","POLYHEDRON",["assets/audio/cards/ogg/polyhedron.ogg","assets/audio/cards/mp3/polyhedron.mp3"]),e.loadAudio("CARD_27_SOUND","CYLINDER",["assets/audio/cards/ogg/cylinder.ogg","assets/audio/cards/mp3/cylinder.mp3"]),e.loadAudio("CARD_28_SOUND","COLOSSEUM",["assets/audio/cards/ogg/colosseumRome.ogg","assets/audio/cards/mp3/colosseumRome.mp3"]),e.loadAudio("CARD_29_SOUND","SPHERE",["assets/audio/cards/ogg/sphere.ogg","assets/audio/cards/mp3/sphere.mp3"]),e.loadAudio("CARD_30_SOUND","PEANUT",["assets/audio/cards/ogg/peanut.ogg","assets/audio/cards/mp3/peanut.mp3"]),e.loadAudio("CARD_31_SOUND","TORUS",["assets/audio/cards/ogg/torus.ogg","assets/audio/cards/mp3/torus.mp3"]),e.loadAudio("CARD_32_SOUND","DOUBLE_HELIX",["assets/audio/cards/ogg/doubleHelix.ogg","assets/audio/cards/mp3/doubleHelix.mp3"]),e.loadAudio("CARD_33_SOUND","FRACTAL",["assets/audio/cards/ogg/fractal.ogg","assets/audio/cards/mp3/fractal.mp3"]),e.loadAudio("CARD_34_SOUND","DIAMOND",["assets/audio/cards/ogg/diamond.ogg","assets/audio/cards/mp3/diamond.mp3"]),e.loadAudio("CARD_35_SOUND","PETRONAS",["assets/audio/cards/ogg/petronasTowers.ogg","assets/audio/cards/mp3/petronasTowers.mp3"]),e.loadAtlasJSONHash("BOXES_ATLAS",null,"assets/images/boxes/boxesSheet.png","assets/settings/boxesSheetHash.json"),e.loadAtlasJSONHash("STORY_BACKGROUNDS_ATLAS",null,"assets/images/storyBackgrounds.png","assets/settings/storyBackgroundsHash.json"),e.loadAtlasJSONHash("GUIDES_AND_BACKGROUNDS_ATLAS",null,"assets/images/guidesAndBackgrounds.png","assets/settings/guidesAndBackgroundsHash.json"),e.loadSpriteSheet("GUIDE_BUTTONS_SHEET",null,"assets/images/UI/guideButtonsSheet.png",100,40,8),e.loadSpriteSheet("SOCIAL_BUTTONS_SHEET",null,"assets/images/UI/socialButtonsSheet.png",152,61.5,4),e.loadSpriteSheet("STANDARD_BUTTONS_SHEET",null,"assets/images/UI/standardButtonsSheet.png",152,38.66,30),e.loadSpriteSheet("CARDS_SHEET_1_13",null,"assets/images/cards/cardSheet1_13.png",100,152,182),e.loadSpriteSheet("CARDS_SHEET_14_26",null,"assets/images/cards/cardSheet14_26.png",100,152,182),e.loadSpriteSheet("CARDS_SHEET_27_35",null,"assets/images/cards/cardSheet27_35.png",100,152,126),n.load.onFileError.add(function(e){var t=this;t.debugMode()&&console.log("Error loading file: "+e)},e),n.load.onFileStart.add(function(e){var t=this;t.debugMode()&&console.log("Loading files, percent: "+e+"%")},e),n.load.onFileComplete.add(function(e){var t=this;t.wmlPreloader.preloaderTop.clear(),t.wmlPreloader.preloaderTop.beginFill(11053224,1),t.wmlPreloader.preloaderTop.drawRect(2,2,e,11),t.wmlPreloader.ready=!0,t.debugMode()&&console.dir(arguments)},e),n.load.onLoadStart.add(function(e){var t=this;t.debugMode()&&console.log("Started loading files: "+e)},e),n.load.onLoadComplete.add(function(){var e=this;e.debugMode()&&console.log("Finished loading files!")},e),n.load.onPackComplete.add(function(){var e=this;e.debugMode()&&console.log("Finished packing files: ")},e)},update:function(){e.wmlPreloader.ready===!0&&(e.wmlPreloader.loadingTween=t.add.tween(e.wmlPreloader.loadingObjects).to({alpha:0},e.Const.FADE_DURATION,e.Const.TWEEN_LINEAR,!0),e.wmlPreloader.loadingTween.onComplete.add(function(){var e=this;e.gameObject.state.start(e.getFirstVisit()?e.HelpScreen.KEY:e.MainMenuScreen.KEY),e.gameObject.state.clearCurrentState()},e),e.wmlPreloader.ready=!1)},shutdown:function(){t=null,n.clearScreenState()}}}(window.WML)),window.WML.namespace("BreakPointScreen",window.WML.Screen,function(e){"use strict";var t=null,n=null,s=null,a=null,o=null,l=null,d=null,r=null,u=null,i=function(e){switch(e){case 2:o.visible=!0;break;case 5:s.visible=!0;break;case 9:a.visible=!0;break;case 14:d.visible=!0;break;case 20:l.visible=!0,u.visible=!0,r.visible=!1}};return{init:function(){t=this,n=e.gameObject,t.screenObjects=n.add.group()},create:function(){s=n.add.sprite(0,0,e.ImageAssetKeys.STORY_BACKGROUNDS_ATLAS,"marcoInGiza.png"),s.visible=!1,t.screenObjects.add(s),a=n.add.sprite(0,0,e.ImageAssetKeys.STORY_BACKGROUNDS_ATLAS,"marcoInRome.png"),a.visible=!1,t.screenObjects.add(a),o=n.add.sprite(0,0,e.ImageAssetKeys.STORY_BACKGROUNDS_ATLAS,"marcoHoneycomb.png"),o.visible=!1,t.screenObjects.add(o),d=n.add.sprite(0,0,e.ImageAssetKeys.STORY_BACKGROUNDS_ATLAS,"marcoDna.png"),d.visible=!1,t.screenObjects.add(d),l=n.add.sprite(0,0,e.ImageAssetKeys.STORY_BACKGROUNDS_ATLAS,"marcoBabylon.png"),l.visible=!1,t.screenObjects.add(l),r=e.GoToScreen.Button(e.LevelsScreen.KEY,t.screenObjects,250,440,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,e,null,null,null,null,17,16,16,17),t.screenObjects.add(r),u=e.GoToScreen.Button(e.GameOverScreen.KEY,t.screenObjects,250,440,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,e,null,null,null,null,25,24,24,25),u.visible=!1,t.screenObjects.add(u),i(e.getCurrentLevel()),e.fadeInGroup(t.screenObjects)}}}(window.WML)),window.WML.namespace("GameOverScreen",window.WML.Screen,function(e){"use strict";var t=null,n=null,s=null,a=null,o=null,l=null,d=null,r=null,u=null,i=null,c=null,S=9900,g=11900,A=12900,p=280,O=200,m=function(e){var t="";return S>e?(r.visible=!0,t="Are you in love?!"):e>=S&&g>e?(t="You did humanly!",u.visible=!0):e>=g&&A>e?(t="Your memory serves you well!",i.visible=!0):e>=A&&(t="You are a mind master!",c.visible=!0),t};return{init:function(){n=e.gameObject,t=this,t.screenObjects=n.add.group()},create:function(){s=n.add.sprite(0,0,e.ImageAssetKeys.GUIDES_AND_BACKGROUNDS_ATLAS,"woodBg.jpg"),t.screenObjects.add(s),o=n.add.sprite(217,20,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"daResults.png"),t.screenObjects.add(o),l=n.add.text(200,100,"You scored: "+e.getScore(),e.Utility.getTextStyle17()),l.update=function(){var t=this;t.setText("You scored: "+e.getScore())},t.screenObjects.add(l),r=n.add.sprite(p,O,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"inLoveAch.png"),r.visible=!1,t.screenObjects.add(r),u=n.add.sprite(p,O,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"beingHumanAch.png"),u.visible=!1,t.screenObjects.add(u),i=n.add.sprite(p,O,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"gearsAch.png"),i.visible=!1,t.screenObjects.add(i),c=n.add.sprite(p,O,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"mindMagicianAch.png"),c.visible=!1,t.screenObjects.add(c),a=e.GoToScreen.Button(e.LevelsScreen.KEY,t.screenObjects,250,440,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,e,null,null,null,null,17,16,16,17),t.screenObjects.add(a),d=n.add.text(325,160,"Final result: "+m(e.getScore()),e.Utility.getTextStyle17()),d.anchor.set(.5,.5),d.update=function(){var t=this;t.setText("Final result: "+m(e.getScore()))},t.screenObjects.add(d),e.fadeInGroup(t.screenObjects)}}}(window.WML)),window.WML.namespace("GameScreen",window.WML.Screen,function(e,t){"use strict";var n=null,s=t.gameObject,a="",o=1,l=0,d=0,r=(t.getScore(),0),u=0,i=0,c=0,S=0,g=0,A=0,p=0,O=0,m=null,_=null,y=null,T=null,E=null,b=null,C=[],f=[],L=null,x=null,I=null,N=null,v=null,D=null,R=null,U=null,w=null,h=null,M=null,G=null,j=null,K=null,B=null,H=null,W=null,P=null,Y=null,k=null,F=null,V=null,z=null,X=function(){F.visible=!1,V.visible=!1},J=function(){var e=t.Utility.randomNumber(0,2*r-1),n=L.getAt(e);F.x=n.x+50,F.y=n.y,L.forEach(function(e){var n=this;e.cardKey===n.cardKey&&e.x!==n.x&&e.y!==n.y&&(V.x=e.x+50,V.y=e.y,V.visible=!0,I.bringToTop(V),F.visible=!0,I.bringToTop(F),s.world.bringToTop(I),y.expired&&y.add(t.Const.TIMER_DELAY,X),y.start())},n)},q=function(){var e=t.Utility.randomNumber(0,2*r-1),n=t.Utility.randomNumber(0,2*r-1),s=L.getAt(e),a=L.getAt(n),o=0,l=0,d=0,u=0,i=null,c=null;e!==n&&s.cardKey!==a.cardKey&&(L.bringToTop(s),L.bringToTop(a),o=s.x,l=s.y,d=a.x,u=a.y,i=t.gameObject.add.tween(s).to({x:d,y:u},t.Const.MOVE_DURATION,t.Const.TWEEN_LINEAR,!0),c=t.gameObject.add.tween(a).to({x:o,y:l},t.Const.MOVE_DURATION,t.Const.TWEEN_LINEAR,!0))},Q=function(){var e=this;e.paused?(e.resume(),t.enableShowArrows(),t.enableMoveCards(),v.visible=!1,w.visible=!1,G.visible=!1,j.visible=!1,K.visible=!1,U.visible=!0,B.visible=!1,s.world.bringToTop(L),L.forEach(t.Utility.enableDisplayObject)):(e.pause(),t.disableMoveCards(),t.disableShowArrows(),v.visible=!0,w.visible=!0,w.x=110,w.y=410,G.visible=!0,G.x=330,G.y=410,j.visible=!0,K.visible=!0,U.visible=!1,B.visible=!0,s.world.bringToTop(I),L.forEach(t.Utility.disableDisplayObject))},Z=function(){R.visible=!0,U.visible=!1,Y.update(),Y.visible=!0,u<t.Const.LEVELS_COUNT-1&&(h.visible=!0),u>0&&(M.visible=!0),s.world.bringToTop(x),s.world.bringToTop(I),w.visible=!0,w.x=210,w.y=395,G.visible=!0,G.x=375,G.y=400},$=function(){z.play(),u+1===t.getGameProgress()&&t.incrementGameProgress(),Z(),d>t.getLevelPointsArray()[u]&&t.setLevelPoints(u,d),t.updateScore(),(2===u||5===u||9===u||14===u||20===u)&&(n.saveGame(e),t.fadeOutGroup(x),t.fadeOutGroup(I),t.fadeOutGroup(L),t.fadeOutGroup(n.screenObjects).onComplete.add(function(){var e=this;e.gameObject.state.start(e.BreakPointScreen.KEY),e.gameObject.state.clearCurrentState()},t)),_.stop(!1)},et=function(){S>0&&S%1e3===0?(g+=1,P.update(),t.getShowArrows()===!0&&r>=7&&O%t.Const.TIME_ADD_ARROWS_FACTOR===0&&J(),t.getMoveCards()===!0&&O%A===0&&q(),0===L.countLiving()&&(s.time.events.stop(!1),_.start(),U.visible=!1),S=0,O+=1):S+=t.Const.LOOP_DELAY};return{updateNumOfPicks:function(){c+=1,W.update()},updateLevelScore:function(){var e=100*r,t=Math.ceil(S/10);return d=Math.ceil(e/c),d=t>=e?0:e+d-t},getCardGroup:function(){return L},muteOnOffSound:function(){var e=this,n=e.gameObject;n.sound.mute?(K.loadTexture(t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOn.png"),n.sound.mute=!1):(K.loadTexture(t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"),n.sound.mute=!0)},init:function(){for(n=this,n.screenObjects=s.add.group(),m=new Phaser.Timer(s,!1),_=new Phaser.Timer(s,!1),_.add(t.Const.TIMER_DELAY,$),y=new Phaser.Timer(s,!1),y.add(t.Const.TIMER_DELAY,X),z=s.add.audio(t.SoundAssetKeys.LEVEL_COMPLETE_SOUND),L=s.add.group(),x=s.add.group(),I=s.add.group(),u=t.getCurrentLevel(),d=0,b=t.Cards.levels(),E=t.Cards.layout(),c=0,O=0,g=0,A=t.Const.TIME_MOVE_CARDS_FACTOR_70,p=0,r=b[u].length,l=0;r>l;l+=1)C.push(b[u][l]),C.push(b[u][l]);f=t.Utility.shuffleCards(C),i=E[r.toString()].length-1,T=E[r.toString()][t.Utility.randomNumber(0,i)],s.time.events.loop(t.Const.LOOP_DELAY,et),s.time.events.paused?s.time.events.resume():s.time.events.start(),s.time.add(m),s.time.add(_),s.time.add(y),7>r?A=t.Const.TIME_MOVE_CARDS_FACTOR_70:8>r?A=t.Const.TIME_MOVE_CARDS_FACTOR_90:9>r?A=t.Const.TIME_MOVE_CARDS_FACTOR_110:10>r&&(A=t.Const.TIME_MOVE_CARDS_FACTOR_130)},create:function(){var e=null,i=null,S=0;switch(o=t.Utility.randomNumber(1,4)){case 1:a="woodBg.jpg";break;case 2:a="grass.jpg";break;case 3:a="carpetGrass.jpg";break;case 4:a="parket.jpg"}for(D=s.add.sprite(0,0,t.ImageAssetKeys.GUIDES_AND_BACKGROUNDS_ATLAS,a),n.screenObjects.add(D),R=s.add.sprite(90,295,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"levelComplete.png"),R.visible=!1,x.add(R),N=s.add.sprite(0,444,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"statsPanel.png"),n.screenObjects.add(N),v=s.add.sprite(110,410,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"menuPanel.png"),v.visible=!1,I.add(v),H=s.add.text(10,450,"lvl "+(u+1),t.Utility.getTextStyle17()),n.screenObjects.add(H),W=s.add.text(110,450,"picks "+c,t.Utility.getTextStyle17()),W.update=function(){var e=this;e.setText("picks "+c.toString())},n.screenObjects.add(W),P=s.add.text(460,450,g.toString(),t.Utility.getTextStyle17()),P.update=function(){var e=this;e.setText(g.toString())},n.screenObjects.add(P),k=s.add.text(540,450,"score "+t.getScore().toString(),t.Utility.getTextStyle17()),k.update=function(){var e=this;t.updateScore(),e.setText(t.getScore().toString())},n.screenObjects.add(k),U=t.WMLButton.WMLButton(300,444,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,s.time.events,Q,null,null,null,null,null,null,"menuPauseButtonOver.png","menuPauseButton.png","menuPauseButton.png","menuPauseButtonOver.png"),I.add(U),w=s.add.button(220,400,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,function(){G.inputEnabled=!1,w.inputEnabled=!1,M.inputEnabled=!1,h.inputEnabled=!1,t.fadeOutGroup(x),t.fadeOutGroup(I),t.fadeOutGroup(L),t.fadeOutGroup(n.screenObjects).onComplete.add(function(){var e=this;e.gameObject.state.start(t.LevelsScreen.KEY),e.gameObject.state.clearCurrentState()},t)},w,17,16,16,17),w.setDownSound(t.SoundAssetKeys.CLICK_SOUND),w.visible=!1,I.add(w),G=t.WMLButton.WMLButton(330,410,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,t,n.replayGame,null,null,null,null,null,null,"replayButtonOver.png","replayButton.png","replayButton.png","replayButtonOver.png"),G.visible=!1,I.add(G),h=s.add.button(430,395,t.ImageAssetKeys.GUIDE_BUTTONS_SHEET,function(){t.incrCurrentLevel(),G.inputEnabled=!1,w.inputEnabled=!1,M.inputEnabled=!1,h.inputEnabled=!1,t.fadeOutGroup(x),t.fadeOutGroup(I),t.fadeOutGroup(L),t.fadeOutGroup(n.screenObjects).onComplete.add(function(){var e=this;e.gameObject.state.start(t.GameScreen.KEY),e.gameObject.state.clearCurrentState()},t)},h,7,6,6,7),h.setDownSound(t.SoundAssetKeys.CLICK_SOUND),h.visible=!1,x.add(h),M=s.add.button(105,395,t.ImageAssetKeys.GUIDE_BUTTONS_SHEET,function(){t.decrCurrentLevel(),G.inputEnabled=!1,w.inputEnabled=!1,M.inputEnabled=!1,h.inputEnabled=!1,t.fadeOutGroup(x),t.fadeOutGroup(I),t.fadeOutGroup(L),t.fadeOutGroup(n.screenObjects).onComplete.add(function(){var e=this;e.gameObject.state.start(t.GameScreen.KEY),e.gameObject.state.clearCurrentState()},t)},M,5,4,4,5),M.setDownSound(t.SoundAssetKeys.CLICK_SOUND),M.visible=!1,x.add(M),j=t.WMLButton.WMLButton(245,447,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,s.time.events,Q,null,null,null,null,null,null,19,18,18,19),j.visible=!1,I.add(j),K=s.add.sprite(270,405,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"),K.inputEnabled=!0,K.visible=!1,K.events.onInputDown.add(n.muteOnOffSound,t),I.add(K),s.sound.mute?K.loadTexture(t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"):K.loadTexture(t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOn.png"),l=0;2*r>l;l+=1)i=f[l],S=i%t.Const.NUM_OF_CARDS_PER_SPRITE,e=t.Card.Card(T[l].x,T[l].y,i,"CARD_"+i+"_SOUND",0===S?t.Const.LAST_CARD_START_POS:(S-1)*t.Const.NUM_OF_CARD_FRAMES,m,L,n.screenObjects),L.add(e);Y=s.add.text(220,305,"Level score: 0",t.Utility.getTextStyle17()),Y.update=function(){var e=this;e.setText("Level score: "+d.toString())},Y.visible=!1,x.add(Y),B=s.add.button(380,410,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,function(){B.inputEnabled=!1,G.inputEnabled=!1,w.inputEnabled=!1,t.fadeOutGroup(x),t.fadeOutGroup(I),t.fadeOutGroup(L),t.fadeOutGroup(n.screenObjects).onComplete.add(function(){var e=this;e.gameObject.state.start(t.OptionsScreen.KEY),e.gameObject.state.clearCurrentState()},t)},B,9,8,8,9),B.setDownSound(t.SoundAssetKeys.CLICK_SOUND),B.visible=!1,I.add(B),F=s.add.sprite(0,0,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"helperArrow.png"),F.visible=!1,I.add(F),V=s.add.sprite(0,0,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"helperArrow.png"),V.visible=!1,I.add(V),t.fadeInGroup(x),t.fadeInGroup(I),t.fadeInGroup(L),t.fadeInGroup(n.screenObjects)},replayGame:function(){var e=this;G.inputEnabled=!1,w.inputEnabled=!1,M.inputEnabled=!1,h.inputEnabled=!1,e.fadeOutGroup(I),e.fadeOutGroup(L),e.fadeOutGroup(x),e.fadeOutGroup(n.screenObjects).onComplete.add(function(){var e=this;e.gameObject.state.start(e.GameScreen.KEY),e.gameObject.state.clearCurrentState()},e)},saveGame:function(e){e.localStorage.setItem("score",e.WML.getScore()),e.localStorage.setItem("gameProgress",e.WML.getGameProgress()),e.localStorage.setItem("levelPointsArray",e.WML.getLevelPointsArray())},shutdown:function(){l=0,r=0,C=[],f=[],b=null,E=null,T=null,i=0,c=0,g=0}}}(window,window.WML)),window.WML.namespace("HelpScreen",window.WML.Screen,function(e){"use strict";var t=null,n=null,s=0,a=null,o=null,l=null,d=null,r=function(t){switch(n.add.tween(d[t]).to({alpha:1},e.Const.FADE_DURATION,e.Const.TWEEN_LINEAR,!0),t){case 0:d[1].alpha=0,d[2].alpha=0;break;case 1:d[0].alpha=0,d[2].alpha=0;break;case 2:d[0].alpha=0,d[1].alpha=0}},u={button:null,click:function(){var t=n.add.tween(d[s]).to({alpha:0},e.Const.FADE_DURATION,e.Const.TWEEN_LINEAR,!0);t.onComplete.add(function(){2>s&&(s+=1),r(s)},e)}},i={button:null,click:function(){var t=n.add.tween(d[s]).to({alpha:0},e.Const.FADE_DURATION,e.Const.TWEEN_LINEAR,!0);t.onComplete.add(function(){s>0&&(s-=1),r(s)},e)}},c=null;return{init:function(){n=e.gameObject,t=this,t.screenObjects=n.add.group()},create:function(){t.screenObjects=n.add.group(),a=n.add.sprite(16,15,e.ImageAssetKeys.GUIDES_AND_BACKGROUNDS_ATLAS,"sorcerer.png"),a.name="sorcerer",t.screenObjects.add(a),o=n.add.sprite(13,4,e.ImageAssetKeys.GUIDES_AND_BACKGROUNDS_ATLAS,"marco.png"),o.name="marco",t.screenObjects.add(o),l=n.add.sprite(0,0,e.ImageAssetKeys.GUIDES_AND_BACKGROUNDS_ATLAS,"guide.png"),l.name="guide",t.screenObjects.add(l),u.button=e.WMLButton.WMLButton(530,441,e.ImageAssetKeys.GUIDE_BUTTONS_SHEET,t,u.click,null,null,null,null,null,null,3,2,2,3),t.screenObjects.add(u.button),i.button=e.WMLButton.WMLButton(10,441,e.ImageAssetKeys.GUIDE_BUTTONS_SHEET,t,i.click,null,null,null,null,null,null,1,0,0,1),t.screenObjects.add(i.button),c=e.GoToScreen.Button(e.MainMenuScreen.KEY,t.screenObjects,250,440,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,t,null,null,null,null,21,20,20,21),t.screenObjects.add(c),d=[a,o,l],t.screenObjects.forEach(function(t){var n=this;t.alpha=0,"marco"!==t.name&&"guide"!==t.name&&n.gameObject.add.tween(t).to({alpha:1},e.Const.FADE_DURATION,n.Const.TWEEN_LINEAR,!0)},e)}}}(window.WML)),window.WML.namespace("MainMenuScreen",window.WML.Screen,function(e){"use strict";var t=null,n=null,s=null,a=null,o=null,l=null,d=null,r=null,u=null;return{init:function(){t=this,n=e.gameObject,t.screenObjects=n.add.group()},create:function(){s=n.add.sprite(0,0,e.ImageAssetKeys.STORY_BACKGROUNDS_ATLAS,"mainMenuBg.png"),t.screenObjects.add(s),a=e.GoToScreen.Button(e.LevelsScreen.KEY,t.screenObjects,235,230,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,t,null,null,null,null,5,4,4,5),t.screenObjects.add(a),u=e.GoToScreen.Button(e.OptionsScreen.KEY,t.screenObjects,235,290,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,t,null,null,null,null,9,8,8,9),t.screenObjects.add(u),o=e.GoToScreen.Button(e.HelpScreen.KEY,t.screenObjects,235,350,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,t,null,null,null,null,7,6,6,7),t.screenObjects.add(o),l=n.add.button(235,410,e.ImageAssetKeys.STANDARD_BUTTONS_SHEET,function(){var t=this;t.open(e.Const.BLOG_LINK,e.Const.BLOG_NAME,[])},window,1,0,0,1),t.screenObjects.add(l),d=n.add.button(20,400,e.ImageAssetKeys.SOCIAL_BUTTONS_SHEET,function(){var t=this;t.open("https://twitter.com/share?url="+e.Const.GAME_LINK,e.Const.GAME_LINK_NAME,[])},window,1,0,0,1),t.screenObjects.add(d),r=n.add.button(465,400,e.ImageAssetKeys.SOCIAL_BUTTONS_SHEET,function(){var t=this;t.open("https://www.facebook.com/sharer/sharer.php?u="+e.Const.GAME_LINK,e.Const.GAME_LINK_NAME,[])},window,3,2,2,3),t.screenObjects.add(r),e.fadeInGroup(t.screenObjects)},shutdown:function(){t.screenObjects=null,n=null}}}(window.WML)),window.WML.namespace("LevelsScreen",window.WML.Screen,function(e,t,n){"use strict";var s=null,a=null,o=null,l=null,d=null,r=null,u=null,i=null,c=null,S=null,g=null,A=null,p=null,O=null,m=null,_=null,y=null,T=null,E=null;return{init:function(){a=this,s=t.gameObject,o=n,a.screenObjects=s.add.group(),d=[]},create:function(){l=s.add.sprite(0,0,t.ImageAssetKeys.GUIDES_AND_BACKGROUNDS_ATLAS,"woodBg.jpg"),a.screenObjects.add(l),a.setUpBoxes(t.Const.LEVELS_COUNT,t.getGameProgress()),c=s.add.sprite(235,15,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"levelsTitle.png"),a.screenObjects.add(c),u=s.add.sprite(245,378,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,23),a.screenObjects.add(u),i=s.add.text(320,400,t.getScore().toString(),t.Utility.getTextStyle17()),i.anchor.set(.5,.5),a.screenObjects.add(i),S=s.add.sprite(10,10,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"),S.inputEnabled=!0,S.events.onInputDown.add(a.muteOnOffSound,t),a.screenObjects.add(S),s.sound.mute?S.loadTexture(t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"):S.loadTexture(t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOn.png"),r=t.GoToScreen.Button(t.MainMenuScreen.KEY,a.screenObjects,470,430,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,a,null,null,null,null,3,2,2,3),a.screenObjects.add(r),O=t.WMLButton.WMLButton(20,430,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,e,a.saveGame,null,null,null,null,null,null,13,12,12,13),a.screenObjects.add(O),m=s.add.text(280,435,"Saved!",t.Utility.getTextStyle17()),m.visible=!1,a.screenObjects.add(m),_=t.WMLButton.WMLButton(20,378,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,e,a.showResetWindow,null,null,null,null,null,null,11,10,10,11),a.screenObjects.add(_),y=s.add.sprite(150,170,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"resetWindow.png"),y.visible=!1,a.screenObjects.add(y),p=t.WMLButton.WMLButton(470,378,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,e,a.submitScore,null,null,null,null,null,null,15,14,14,15),p.visible=!1,a.screenObjects.add(p),E=t.WMLButton.WMLButton(335,260,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,e,a.closeResetWindow,null,null,null,null,null,null,29,28,28,29),E.visible=!1,a.screenObjects.add(E),T=t.WMLButton.WMLButton(160,260,t.ImageAssetKeys.STANDARD_BUTTONS_SHEET,e,a.resetGame,null,null,null,null,null,null,11,10,10,11),T.visible=!1,a.screenObjects.add(T),t.fadeInGroup(a.screenObjects)},shutdown:function(){d=null,s=null,a.preload=null,a.clearScreenState()},muteOnOffSound:function(){var e=this,n=e.gameObject;n.sound.mute?(S.loadTexture(t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOn.png"),n.sound.mute=!1):(S.loadTexture(t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"),n.sound.mute=!0)},getMuteOnOffBtn:function(){return S},saveGame:function(){var e=this;e.localStorage.setItem("score",e.WML.getScore()),e.localStorage.setItem("gameProgress",e.WML.getGameProgress()),e.localStorage.setItem("levelPointsArray",e.WML.getLevelPointsArray()),m.visible=!0},showResetWindow:function(){y.visible=!0,E.visible=!0,T.visible=!0,_.visible=!1,O.visible=!1},submitScore:function(){var e=null,n={};n.leaderboardId=t.getScoreBoardId(),n.score=t.getScore(),e=o.client.games.scores.submit(n),e.execute(function(e){t.debugMode()&&console.log(e)})},closeResetWindow:function(){y.visible=!1,E.visible=!1,T.visible=!1,_.visible=!0,O.visible=!0},resetGame:function(){var e=this,t=e.WML;t.clearLevelPointsArray(),e.localStorage.clear(),e.localStorage.setItem("firstVisit",!0),e.localStorage.setItem("score",0),e.localStorage.setItem("gameProgress",1),e.localStorage.setItem("levelPointsArray",t.getLevelPointsArray()),t.loadStorageData(),t.fadeOutGroup(t.LevelsScreen.screenObjects).onComplete.add(function(){var e=this;e.gameObject.state.start(e.LevelsScreen.KEY),e.gameObject.state.clearCurrentState()},t)},setUpBoxes:function(e,n){var o=1,l=1,r=70,u=75,i=100,c=75,S=0,p=-1,O=0,m=0,_=null,y=null,T=0,E=null,b=null,C=null,f=null,L=function(e){var n=e.name,o=s.add.tween(a.screenObjects).to({alpha:0},t.Const.FADE_DURATION,t.Const.TWEEN_LINEAR,!0);t.setCurrentLevel(n),o.onComplete.add(function(){var e=this;e.gameObject.state.start(e.GameScreen.KEY,!0,!1,{boxNumber:n}),e.gameObject.state.clearCurrentState()},t)};for(o=0;e>o;o+=1)o%t.Const.LEVELS_PER_ROW===0&&(p+=1,S=0),l=o+1,O=u+r*S,m=c+i*p,b="box"+l+"_over.png",f="box"+l+"_up.png",C=f,E="box"+l+".png",n>o?(_=t.WMLButton.WMLButton(O,m,t.ImageAssetKeys.BOXES_ATLAS,a,L,null,null,null,null,t.SoundAssetKeys.BOX_OPEN_SOUND,null,b,C,f,C),_.name=o,d.push(_),a.screenObjects.add(_),g=s.add.sprite(d[o].x+8,d[o].y+70,t.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"levelPointsBorder.png"),a.screenObjects.add(g),T=t.getLevelPointsArray()[o].toString(),A=s.add.text(d[o].x+30,d[o].y+82,T,t.Utility.getTextStyle12()),A.anchor.set(.5,.5),a.screenObjects.add(A)):o>=n&&e>o&&(y=s.add.sprite(O,m+20,t.ImageAssetKeys.BOXES_ATLAS,E),y.inputEnabled=!1,a.screenObjects.add(y)),S+=1}}}(window,window.WML,gapi)),window.WML.namespace("Card",{},function(e){"use strict";var t=e.gameObject,n=e.GameScreen,s=null,a={firstCard:null,secondCard:null},o=null,l=null,d=null,r=function(){var t=e.Utility.randomNumber(1,3),n="";switch(t){case 1:n="YES_SOUND";break;case 2:n="NICE_SOUND";break;case 3:n="YES_MATCH_SOUND"}return n},u=function(){var t=e.Utility.randomNumber(1,3),n="";switch(t){case 1:n="MISS_SOUND";break;case 2:n="NOOO_SOUND";break;case 3:n="NO_SOUND"}return n},i=function(){delete a.firstCard,delete a.secondCard,a.firstCard=null,a.secondCard=null},c=function(){a.firstCard.play("close"),a.secondCard.play("close"),i(),o.forEach(e.Utility.enableDisplayObject,o),d.stop(!1)},S=function(e,t,n){var s=[],a=0;for(a=t;n>a;a+=1)s.push(e+a);return s},g=function(s,r,u,S,g){var A=s,p=1===e.Utility.randomNumber(0,1)?!0:!1,O=1===e.Utility.randomNumber(0,1)?!0:!1,m=1===e.Utility.randomNumber(0,1)?!0:!1;return function(){r.play(),A.play("open"),A.inputEnabled=!1,null===a.firstCard?(a.firstCard=A,p&&u.play()):(a.secondCard=A,n.updateNumOfPicks(),o.forEach(e.Utility.disableDisplayObject,o),a.firstCard.cardKey===a.secondCard.cardKey?(m&&g.play(),n.updateLevelScore(),t.add.existing(a.firstCard),t.add.existing(a.secondCard),o.remove(a.firstCard,!1),o.remove(a.secondCard,!1),l.add(a.firstCard),l.add(a.secondCard),a.firstCard.inputEnabled=!1,a.secondCard.inputEnabled=!1,i(),o.forEach(e.Utility.enableDisplayObject,o)):(O&&S.play(),d.add(e.Const.TIMER_DELAY,c),d.start()))}};return{Card:function(n,a,i,c,A,p,O,m){var _="",y=null,T=t.add.audio(e.SoundAssetKeys.FLIP_CARD_SOUND),E=t.add.audio(e.SoundAssetKeys[c]),b=t.add.audio(e.SoundAssetKeys[u()]),C=t.add.audio(e.SoundAssetKeys[r()]),f=null;return 13>=i?_="CARDS_SHEET_1_13":26>=i&&i>13?_="CARDS_SHEET_14_26":35>=i&&i>26&&(_="CARDS_SHEET_27_35"),y=t.add.sprite(n,a,e.ImageAssetKeys[_],0),f=new g(y,T,E,b,C),s=this,l=m,o=O,d=p,y.scale.set(.8,.8),y.cardKey=i,y.animations.add("open",S(A,0,7),30),y.animations.add("close",S(A,7,14),30),y.inputEnabled=!0,y.events.onInputDown.add(f,y),y}}}(window.WML)),window.WML.namespace("Cards",{},function(e){"use strict";var t=(e.gameObject,null),n=null,s=24,a=124,o=224,l=324,d=424,r=524,u=7,i=152,c=297;return n=[[1,2,3,4],[5,6,7,8],[2,4,6,8,10],[6,7,9,10],[11,12,13,14,15],[15,16,17,18,19,20],[13,14,18,20],[11,12,16,17,19],[10,12,14,16,18,20],[5,6,7,9,13,18,21],[2,3,4,19],[7,8,9,13,14],[21,22,23,24,20,28],[20,25,26,27,28,16,30],[16,14,20,22,19,29,28,30],[11,12,13,14],[15,16,17,18,19],[20,21,35,34,24,25],[24,27,35,33,34,31,32],[23,26,7,12,14,31,32,33],[9,22,13,28,29,32,33,34,35]],t={4:[[{x:o,y:u},{x:l,y:u},{x:s,y:i},{x:a,y:i},{x:d,y:i},{x:r,y:i},{x:o,y:c},{x:l,y:c}],[{x:s,y:u},{x:a,y:u},{x:a,y:i},{x:o,y:i},{x:l,y:i},{x:d,y:i},{x:d,y:c},{x:r,y:c}],[{x:a,y:u},{x:d,y:u},{x:a,y:i},{x:o,y:i},{x:l,y:i},{x:d,y:i},{x:a,y:c},{x:d,y:c}]],5:[[{x:s,y:u},{x:o,y:u},{x:l,y:u},{x:r,y:u},{x:a,y:i},{x:d,y:i},{x:s,y:c},{x:o,y:c},{x:l,y:c},{x:r,y:c}],[{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:d,y:u},{x:a,y:i},{x:d,y:i},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c}],[{x:o,y:u},{x:l,y:u},{x:s,y:i},{x:a,y:i},{x:o,y:i},{x:l,y:i},{x:d,y:i},{x:r,y:i},{x:o,y:c},{x:l,y:c}]],6:[[{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:d,y:u},{x:s,y:i},{x:a,y:i},{x:d,y:i},{x:r,y:i},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c}],[{x:a,y:u},{x:l,y:u},{x:r,y:u},{x:a,y:i},{x:l,y:i},{x:r,y:i},{x:s,y:c},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c},{x:r,y:c}],[{x:s,y:u},{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:a,y:i},{x:o,y:i},{x:l,y:i},{x:d,y:i},{x:o,y:c},{x:l,y:c},{x:d,y:c},{x:r,y:c}]],7:[[{x:s,y:u},{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:d,y:u},{x:r,y:u},{x:s,y:i},{x:r,y:i},{x:s,y:c},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c},{x:r,y:c}],[{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:d,y:u},{x:s,y:i},{x:a,y:i},{x:o,y:i},{x:l,y:i},{x:d,y:i},{x:r,y:i},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c}],[{x:s,y:u},{x:a,y:u},{x:d,y:u},{x:r,y:u},{x:s,y:i},{x:a,y:i},{x:o,y:i},{x:l,y:i},{x:d,y:i},{x:r,y:i},{x:s,y:c},{x:a,y:c},{x:d,y:c},{x:r,y:c}]],8:[[{x:s,y:u},{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:d,y:u},{x:r,y:u},{x:s,y:i},{x:o,y:i},{x:l,y:i},{x:r,y:i},{x:s,y:c},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c},{x:r,y:c}],[{x:s,y:u},{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:d,y:u},{x:r,y:u},{x:s,y:i},{x:a,y:i},{x:d,y:i},{x:r,y:i},{x:s,y:c},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c},{x:r,y:c}],[{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:d,y:u},{x:r,y:u},{x:s,y:i},{x:a,y:i},{x:o,y:i},{x:l,y:i},{x:d,y:i},{x:r,y:i},{x:s,y:c},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c}]],9:[[{x:s,y:u},{x:a,y:u},{x:o,y:u},{x:l,y:u},{x:d,y:u},{x:r,y:u},{x:s,y:i},{x:a,y:i},{x:o,y:i},{x:l,y:i},{x:d,y:i},{x:r,y:i},{x:s,y:c},{x:a,y:c},{x:o,y:c},{x:l,y:c},{x:d,y:c},{x:r,y:c}]]},{Const:{},levels:function(){return n.slice()},layout:function(){return t}}}(window.WML)),window.WML.namespace("TestScreen",window.WML.Screen,function(e){"use strict";var t=null,n=null,s=[];return{init:function(){t=e.gameObject},create:function(){var a=1,o=0,l=0,d=null,r=null,u=null,i=null;for(l=0;7>l;l+=1)for(o=0;3>o;o+=1)r="box"+a+"_over.png",i="box"+a+"_up.png",u=i,n=t.add.button(75*l,75*o,e.ImageAssetKeys.BOXES_ATLAS,function(){},t,r,u,i,u),a+=1,s.push(n),n=null,d=null,r=null,u=null,i=null},render:function(){t.debug.spriteInfo(s[3],32,32)},shutdown:function(){}}}(window.WML)),window.document.addEventListener("DOMContentLoaded",function(e){"use strict";var t=window.WML,n={event:e};t.init(n)});