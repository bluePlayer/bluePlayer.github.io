window.FrnConstr=window.FrnConstr||function(a,b,c,d,e){"use strict";var f=a,g=null,h=null,i="",j=null,k=null,l=!0,m=!1,n={},o=!1,p=800,q=600,r=640,s=480,t="gameContainer",u="loadingLabel.png",v=new b.Game(p,q,c,t);return{Exceptions:{},Const:{Graphics:{Colors:{Material:{},Doors:{}}},LocalStorage:{},Application:{Keys:{},FrnData:{millsPerPixel:{},millsPerPixelForDepth:{},cupboardWidth:{},cupboardHeight:{},cupboardDepth:{},leftShelveWidth:{},rightShelveWidth:{},thickness:{},checkBoxes:{}},InnerPartsMatrix:{numOfPartsPerSlot:3}},Messages:{millsPerPixel:{},millsPerPixelForDepth:{},cupboardWidth:{},cupboardHeight:{},cupboardDepth:{},leftShelveWidth:{},rightShelveWidth:{},thickness:{}},Errors:{}},Events:{},frnConstrPreloader:null,createFrnConstrPreloader:function(){var a={ready:!1,loadingTween:null,loadingLabel:null,loadingObjects:null,preloaderBottom:null,preloaderTop:null},b=h.Const.Graphics;return a.loadingObjects=v.add.group(),a.loadingLabel=v.add.sprite(b.LOADING_LABEL_X_POS,b.LOADING_LABEL_Y_POS,h.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,u),a.loadingObjects.add(a.loadingLabel),a.preloaderBottom=v.add.graphics(b.LOADING_BAR_X_POS,b.LOADING_BAR_Y_POS),a.preloaderBottom.beginFill(b.Colors.MATTERHORN,b.ALPHA_100_PERCENT),a.preloaderBottom.drawRect(b.PRELOADER_BOTTOM_START_XY,b.PRELOADER_BOTTOM_START_XY,b.PRELOADER_BOTTOM_WIDTH,b.PRELOADER_BOTTOM_HEIGHT,"preloaderBottom"),a.loadingObjects.add(a.preloaderBottom),a.preloaderTop=v.add.graphics(b.LOADING_BAR_X_POS,b.LOADING_BAR_Y_POS),a.preloaderTop.beginFill(b.Colors.DARK_GRAY,b.ALPHA_100_PERCENT),a.preloaderTop.drawRect(b.PRELOADER_TOP_START_XY,b.PRELOADER_TOP_START_XY,b.PRELOADER_TOP_WIDTH,b.PRELOADER_TOP_HEIGHT,"preloaderTop"),a.loadingObjects.add(a.preloaderTop),a},SoundAssetKeys:{},ImageAssetKeys:{},getFirstVisit:function(){return l},getAppInit:function(){return m},appInitFinish:function(){m=!0},gameObject:v,debugMode:function(){return o},getHtmlContainer:function(){return t},getEnteriorBmpData:function(){return j},setEnteriorBmpData:function(a){j=a},getExteriorBmpData:function(){return k},setExteriorBmpData:function(a){k=a},fadeOutGroup:function(a){var b=null;return a.forEach(function(a){var c=this;b=c.gameObject.add.tween(a).to({alpha:0},c.Const.FADE_DURATION,c.Const.TWEEN_LINEAR,!0)},h),b},fadeInGroup:function(a){var b=null;return a.forEach(function(a){var c=this;a.alpha=0,b=c.gameObject.add.tween(a).to({alpha:1},c.Const.FADE_DURATION,c.Const.TWEEN_LINEAR,!0)},h),b},getValidationMsg:function(){return i},addValidationMsg:function(a){i+=a},clearValidationMsgs:function(){i=""},setDataObject:function(a){var b=this.Const.Application,c=b.Keys;return n=h.createDefaultDataObject(),i="",a.forEach(function(a,b,d){var e=a.name,f=a.value;this.Utility.toDecimal(f);switch(e){case"cupboardWidth":n[e]=this.Utility.validateNumericFrnData(c.CUPBOARD_WIDTH_KEY,f);break;case"cupboardHeight":n[e]=this.Utility.validateNumericFrnData(c.CUPBOARD_HEIGHT_KEY,f);break;case"cupboardDepth":n[e]=this.Utility.validateNumericFrnData(c.CUPBOARD_DEPTH_KEY,f);break;case"leftShelveWidth":n[e]=this.Utility.validateNumericFrnData(c.LEFT_SHELVE_WIDTH_KEY,f);break;case"rightShelveWidth":n[e]=this.Utility.validateNumericFrnData(c.RIGHT_SHELVE_WIDTH_KEY,f);break;case"millsPerPixel":n[e]=this.Utility.validateNumericFrnData(c.MILLS_PER_PIXEL_KEY,f);break;case"millsPerPixelForDepth":n[e]=this.Utility.validateNumericFrnData(c.MILLS_PER_PIXEL_FOR_DEPTH_KEY,f);break;case"thickness":n[e]=this.Utility.validateNumericFrnData(c.THICKNESS_KEY,f);break;default:n[e]=f}},this),n.floorChkBox=this.Utility.isTruthy(n.floorChkBox),n.ceilingChkBox=this.Utility.isTruthy(n.ceilingChkBox),n.rearChkBox=this.Utility.isTruthy(n.rearChkBox),n.leftShelveChkBox=this.Utility.isTruthy(n.leftShelveChkBox),n.rightShelveChkBox=this.Utility.isTruthy(n.rightShelveChkBox),n.standChkBox=this.Utility.isTruthy(n.standChkBox),n.standLeftChkBox=this.Utility.isTruthy(n.standLeftChkBox),n.standRightChkBox=this.Utility.isTruthy(n.standRightChkBox),n.fullWidth=n.cupboardWidth,n.maxNumOfShelves=this.Utility.decimalRound(n.cupboardHeight/100,0),n.leftShelveChkBox&&(n.cupboardWidth-n.leftShelveWidth<b.FrnData.cupboardWidth.MIN_VAL?(n.leftShelveChkBox=!1,i+=this.Const.Messages.LEFT_SHELVE_CANNOT_FIT_MSG+"\n"):n.cupboardWidth-=n.leftShelveWidth),n.rightShelveChkBox&&(n.cupboardWidth-n.rightShelveWidth<b.FrnData.cupboardWidth.MIN_VAL?(n.rightShelveChkBox=!1,i+=this.Const.Messages.RIGHT_SHELVE_CANNOT_FIT_MSG+"\n"):n.cupboardWidth-=n.rightShelveWidth),n.maxNumOfInnerShelves=n.maxNumOfShelves,n.maxNumOfBeams=this.Utility.decimalRound(n.cupboardWidth/100,0),n},getFrnConstrDataObject:function(){return n},getFormDataArray:function(){return e("#constrForm").serializeArray()},generateWardrobe:function(){h.setDataObject(h.getFormDataArray()),v.state.start(h.EnteriorScreen.KEY)},addConstant:function(a,b,c){void 0!==c&&null!==c||(c=b),null!==a&&void 0!==a||(a={}),Object.defineProperty(a,b,{configurable:!1,enumerable:!0,value:c,writable:!1})},loadAtlasJSONHash:function(a,b,c,d){return h.addConstant(h.ImageAssetKeys,a,b),v.load.atlasJSONHash(h.ImageAssetKeys[a],c,d)},loadSpriteSheet:function(a,b,c,d,e,f){return h.addConstant(h.ImageAssetKeys,a,b),v.load.spritesheet(h.ImageAssetKeys[a],c,d,e,f)},loadImage:function(a,b,c){return h.addConstant(h.ImageAssetKeys,a,b),v.load.image(h.ImageAssetKeys[a],c)},loadAudio:function(a,b,c){return h.addConstant(h.SoundAssetKeys,a,b),v.load.audio(h.SoundAssetKeys[a],c,!0)},namespace:function(a,b,c){var d=a.split("."),e=Object.create(null===b||void 0===b?{}:b),f=this,g=0,h={};for(d[0]===f.Const.GAME_NAME&&(d=d.slice(1)),g=0;g<d.length;g+=1){if(void 0===f[d[g]]){for(h in c)c.hasOwnProperty(h)&&(e[h]=c[h]);f[d[g]]=e}f=f[d[g]]}return f},createDefaultDataObject:function(){var a=this.Const,b=a.Application.FrnData;return{millsPerPixel:b.millsPerPixel.DEFAULT_VAL,millsPerPixelForDepth:b.millsPerPixelForDepth.DEFAULT_VAL,cupboardWidth:b.cupboardWidth.DEFAULT_VAL,cupboardHeight:b.cupboardHeight.DEFAULT_VAL,cupboardDepth:b.cupboardDepth.DEFAULT_VAL,leftShelveWidth:b.leftShelveWidth.DEFAULT_VAL,rightShelveWidth:b.rightShelveWidth.DEFAULT_VAL,thickness:b.thickness.DEFAULT_VAL,floorChkBox:b.checkBoxes.DEFAULT_FLOOR_IS_DRAWN,ceilingChkBox:b.checkBoxes.DEFAULT_CEILING_IS_DRAWN,leftShelveChkBox:b.checkBoxes.DEFAULT_LEFT_SHELVE_IS_DRAWN,rightShelveChkBox:b.checkBoxes.DEFAULT_RIGHT_SHELVE_IS_DRAWN,rearChkBox:b.checkBoxes.DEFAULT_REAR_WALL_IS_DRAWN,standLeftChkBox:b.checkBoxes.DEFAULT_STAND_LEFT_IS_DRAWN,standRightChkBox:b.checkBoxes.DEFAULT_STAND_RIGHT_IS_DRAWN,standChkBox:b.checkBoxes.DEFAULT_STAND_IS_DRAWN,shelveCssColor:a.Application.DEFAULT_MATERIAL_COLOR}},clearStorageData:function(){f.localStorage.clear(),this.loadStorageData()},saveStorageData:function(a){n=a,f.localStorage.setItem(this.Const.LocalStorage.FRN_CONSTR_DATA_OBJECT,JSON.stringify(a))},loadStorageData:function(){var a=null,b=null;return a=f.localStorage.getItem(this.Const.LocalStorage.FIRST_VISIT),null===a?f.localStorage.setItem(this.Const.LocalStorage.FIRST_VISIT,l):(l=!1,f.localStorage.setItem(this.Const.LocalStorage.FIRST_VISIT,l)),b=JSON.parse(f.localStorage.getItem(this.Const.LocalStorage.FRN_CONSTR_DATA_OBJECT)),console.log(b),!this.Utility.isTruthy(b)||e.isEmptyObject(b)?(h.setDataObject(h.getFormDataArray()),f.localStorage.setItem(this.Const.LocalStorage.FRN_CONSTR_DATA_OBJECT,JSON.stringify(n))):(n=b,e("#floorChkBox").prop("checked",n.floorChkBox),e("#ceilingChkBox").prop("checked",n.ceilingChkBox),e("#leftShelveChkBox").prop("checked",n.leftShelveChkBox),e("#rightShelveChkBox").prop("checked",n.rightShelveChkBox),e("#rearChkBox").prop("checked",n.rearChkBox),e("#standLeftChkBox").prop("checked",n.standLeftChkBox),e("#standRightChkBox").prop("checked",n.standRightChkBox),e("#standChkBox").prop("checked",n.standChkBox),e("#millsPerPixel").val(n.millsPerPixel),e("#millsPerPixelForDepth").val(n.millsPerPixelForDepth),e("#cupboardWidth").val(n.fullWidth),e("#cupboardHeight").val(n.cupboardHeight),e("#cupboardDepth").val(n.cupboardDepth),e("#leftShelveWidth").val(n.leftShelveWidth),e("#rightShelveWidth").val(n.rightShelveWidth),e("#thickness").val(n.thickness)),console.log(n),n},addNewGameState:function(a,b){h.addConstant(a,"KEY",b),v.state.add(a.KEY,a)},init:function(a){var d=this.Const;d.Application.FrnData;g=a,h=this,h.addConstant(h.Const,"STAGE_WIDTH",p),h.addConstant(h.Const,"STAGE_HEIGHT",q),h.addConstant(h.Const,"LOWER_WIDTH",r),h.addConstant(h.Const,"LOWER_HEIGHT",s),h.addConstant(h.Const,"HTML_CONTAINER",t),h.addConstant(h.Const,"LOADING_LABEL_IMG_KEY",u),h.addNewGameState(h.Boot,"BOOT"),h.addNewGameState(h.Preloader,"PRELOADER"),h.addNewGameState(h.EnteriorScreen,"ENTERIOR_SCREEN"),h.addNewGameState(h.ExteriorScreen,"EXTERIOR_SCREEN"),h.addNewGameState(h.SendApplicationScreen,"SEND_APPLICATION_SCREEN"),o&&h.addNewGameState(h.TestScreen,"TEST_SCREEN"),h.loadStorageData(),h.InitFrnConstrForm.initForm(),h.FrnConstrMessages.init(h.getFrnConstrDataObject()),c!==b.HEADLESS&&void 0!==c&&null!==c&&v.state.start(h.Boot.KEY)}}}(window,Phaser,Phaser.CANVAS,window.FrnConstr,$),window.document.addEventListener("DOMContentLoaded",function(a){"use strict";var b=window.FrnConstr,c={event:a};b.init(c)}),window.FrnConstr.namespace("Constants",{},function(a){"use strict";return{init:function(){var b=a.Const,c=b.Graphics,d=b.Application,e=b.LocalStorage;a.addConstant(b,"GAME_NAME","Furniture Constructor"),a.addConstant(b,"VERSION","1.0.0"),a.addConstant(b,"TWEEN_LINEAR","Linear"),a.addConstant(b,"FADE_DURATION",500),a.addConstant(b,"BLOG_LINK","http://myconstructor-phasertest.rhcloud.com/"),a.addConstant(b,"BLOG_NAME","Furniture Constructor"),a.addConstant(b,"GAME_LINK","http://myconstructor-phasertest.rhcloud.com/"),a.addConstant(b,"GAME_LINK_NAME","Furniture Constructor"),a.addConstant(b,"TWITTER_URL",null),a.addConstant(b,"FACEBOOK_URL",null),a.addConstant(b,"BLOG_URL",null),a.addConstant(b,"TIMER_DELAY",1e3),a.addConstant(b,"LOOP_DELAY",100),a.addConstant(b,"LOADING_LABEL_IMG_KEY","loadingLabel.png"),a.addConstant(b,"NUM_OF_FLOAT_DIGITS",3),a.addConstant(b,"BETTER_PRECISION",5),a.addConstant(b,"DECIMAL_ROUND_EXP",-3),a.addConstant(c,"LOADING_BAR_X_POS",400),a.addConstant(c,"LOADING_BAR_Y_POS",250),a.addConstant(c,"LOADING_LABEL_X_POS",350),a.addConstant(c,"LOADING_LABEL_Y_POS",180),a.addConstant(c,"ALPHA_100_PERCENT",1),a.addConstant(c,"ALPHA_0_PERCENT",0),a.addConstant(c,"PRELOADER_TOP_START_XY",2),a.addConstant(c,"PRELOADER_TOP_WIDTH",0),a.addConstant(c,"PRELOADER_TOP_HEIGHT",11),a.addConstant(c,"PRELOADER_BOTTOM_START_XY",0),a.addConstant(c,"PRELOADER_BOTTOM_WIDTH",104),a.addConstant(c,"PRELOADER_BOTTOM_HEIGHT",15),a.addConstant(c,"DEFAULT_GRAPHIC_X",40),a.addConstant(c,"DEFAULT_GRAPHIC_Y",65),a.addConstant(c,"DEFAULT_GRAPHICS_BORDER_SIZE",.5),a.addConstant(c,"DEFAULT_SHADOW_ALPHA",.5),a.addConstant(c,"DEFAULT_COLOR_SHIFT_PERCENT",75),a.addConstant(c,"DEFAULT_COLOR_SHIFT_PERCENT_1",20),a.addConstant(c,"DEFAULT_SWATCH_WIDTH",50),a.addConstant(c,"DEFAULT_SWATCH_HEIGHT",20),a.addConstant(c,"DEFAULT_SWATCH_PADDING",3),a.addConstant(c,"ARROW_PIN_SIZE",4),a.addConstant(c,"ORIENT_NORTH","north"),a.addConstant(c,"ORIENT_SOUTH","south"),a.addConstant(c,"ORIENT_EAST","east"),a.addConstant(c,"ORIENT_WEST","west"),a.addConstant(c,"NUM_OF_COLOR_DIGITS",6),a.addConstant(c,"NUM_OF_COLOR_CHANNEL_DIGITS",2),a.addConstant(c,"DEFAULT_BUTTON_WIDTH",150),a.addConstant(c,"DEFAULT_BUTTON_HEIGHT",40),a.addConstant(c,"DEFAULT_WINDOW_PADDING",10),a.addConstant(c,"DEFAULT_TOP_MARKERS_Y_SHIFT",30),a.addConstant(c,"DEFAULT_TOP_MARKERS_HEIGHT",55),a.addConstant(c,"DEFAULT_TOP_MARKERS_PERCENT",15),a.addConstant(c,"DEFAULT_VALIDATION_WINDOW_WIDTH",800),a.addConstant(c,"VALIDATION_WINDOW_TITLE","Validation Errors"),a.addConstant(c,"HORIZONTAL",!0),a.addConstant(c,"VERTICAL",!1),a.addConstant(c,"MAX_PARTS_PER_SLOT",3),a.addConstant(c,"DRAWER_MIN_WIDTH",2),a.addConstant(c,"DRAWER_MAX_WIDTH",20),a.addConstant(c,"DRAWER_MIN_HEIGHT",1),a.addConstant(c,"DRAWER_MAX_HEIGHT",2),a.addConstant(c,"TIE_HEIGHT",5),a.addConstant(c,"TIE_WIDTH",3),a.addConstant(c,"HORZ_BEAM_SPACE",5),a.addConstant(c.Colors,"BLACK",0),a.addConstant(c.Colors,"DEFAULT_EDGE_COLOR",c.Colors.BLACK),a.addConstant(c.Colors,"BACKGROUND_COLOR",12632256),a.addConstant(c.Colors,"DARK_GRAY",10263708),a.addConstant(c.Colors,"DARK_GRAY_1",2697513),a.addConstant(c.Colors,"MATTERHORN",5066061),a.addConstant(c.Colors,"WHITE",16777215),a.addConstant(c.Colors,"RED",16711680),a.addConstant(c.Colors,"GREEN",65280),a.addConstant(c.Colors,"BLUE",255),a.addConstant(c.Colors.Material,"MAT_DARK_BLUE","#3d6990"),a.addConstant(c.Colors.Material,"MAT_ANTIQUE_WHITE","#efcf9f"),a.addConstant(c.Colors.Material,"MAT_BLACK","#000000"),a.addConstant(c.Colors.Material,"MAT_WHITE","#ffffff"),a.addConstant(c.Colors.Material,"MAT_DARK_BROWN","#3b1901"),a.addConstant(c.Colors.Material,"MAT_GREY","#9c9c9c"),a.addConstant(c.Colors.Material,"MAT_RED","#bf1717"),a.addConstant(c.Colors.Material,"MAT_PURPLE","#ff00f7"),a.addConstant(c.Colors.Material,"MAT_GREEN","#569922"),a.addConstant(c.Colors.Material,"MAT_VIOLET","#744c78"),a.addConstant(c.Colors.Material,"MAT_BROWN","#8b592b"),a.addConstant(c.Colors.Material,"MAT_ORANGE","#f77511"),a.addConstant(c.Colors.Material,"MAT_YELLOW","#ffd000"),a.addConstant(c.Colors.Material,"MAT_BLUE","#01a2dd"),a.addConstant(c.Colors.Doors,"DOOR_LIGHT_GRAY","#bdb9b9"),a.addConstant(c.Colors.Doors,"DOOR_BLACK","#211e1e"),a.addConstant(c.Colors.Doors,"DOOR_BROWN","#573d2a"),a.addConstant(c.Colors.Doors,"DOOR_LIGHT_BROWN","#ccbc56"),a.addConstant(c.Colors.Doors,"DOOR_GRAY","#696969"),a.addConstant(d,"MAX_NUM_OF_SHELVES",25),a.addConstant(d.Keys,"REAR_WALL_KEY","rearWall"),a.addConstant(d.Keys,"CEILING_KEY","ceiling"),a.addConstant(d.Keys,"FLOOR_KEY","floor"),a.addConstant(d.Keys,"LEFT_WALL_KEY","leftWall"),a.addConstant(d.Keys,"RIGHT_WALL_KEY","rightWall"),a.addConstant(d.Keys,"LEFT_SHELVE_KEY","leftShelve"),a.addConstant(d.Keys,"RIGHT_SHELVE_KEY","rightShelve"),a.addConstant(d.Keys,"LEFT_SHELVE_WALL_KEY","leftShelveWall"),a.addConstant(d.Keys,"RIGHT_SHELVE_WALL_KEY","rightShelveWall"),a.addConstant(d.Keys,"RECT_KEY","rect"),a.addConstant(d.Keys,"LINE_KEY","line"),a.addConstant(d.Keys,"POLYGON_KEY","polygon"),a.addConstant(d.Keys,"SHELVE_SHADOW_KEY","shelveShadow"),a.addConstant(d.Keys,"SHELVE_WITH_AREA_KEY","shelveWithArea"),a.addConstant(d.Keys,"MATERIAL_COLOR_KEY","materialColor"),a.addConstant(d.Keys,"DARKER_COLOR_KEY","darkerMaterialColor"),a.addConstant(d.Keys,"EDGE_COLOR_KEY","edgeColor"),a.addConstant(d.Keys,"TOP_SHELVES_KEY","topShelves"),a.addConstant(d.Keys,"BOTTOM_SHELVES_KEY","bottomShelves"),a.addConstant(d.Keys,"SHELVE_SLOTS_KEY","shelveSlots"),a.addConstant(d.Keys,"MILLS_PER_PIXEL_KEY","millsPerPixel"),a.addConstant(d.Keys,"MILLS_PER_PIXEL_FOR_DEPTH_KEY","millsPerPixelForDepth"),a.addConstant(d.Keys,"CUPBOARD_WIDTH_KEY","cupboardWidth"),a.addConstant(d.Keys,"CUPBOARD_HEIGHT_KEY","cupboardHeight"),a.addConstant(d.Keys,"CUPBOARD_DEPTH_KEY","cupboardDepth"),a.addConstant(d.Keys,"LEFT_SHELVE_WIDTH_KEY","leftShelveWidth"),a.addConstant(d.Keys,"RIGHT_SHELVE_WIDTH_KEY","rightShelveWidth"),a.addConstant(d.Keys,"THICKNESS_KEY","thickness"),a.addConstant(d.Keys,"DUMMY_SLOT_KEY","dummy"),a.addConstant(d.Keys,"EMPTY_SLOT_KEY","emptySlot"),a.addConstant(d.Keys,"HORZ_BAFFLE_KEY","horzBaffle"),a.addConstant(d.Keys,"VERT_BAFFLE_KEY","vertBaffle"),a.addConstant(d.Keys,"HORZ_BEAM_KEY","horzBeam"),a.addConstant(d.Keys,"VERT_BEAM_KEY","vertBeam"),a.addConstant(d.Keys,"DRAWER_KEY","drawer"),a.addConstant(d.Keys,"TIE_KEY","tie"),a.addConstant(d.Keys,"SHOES_KEY","shoes"),a.addConstant(d.Keys,"HANGER_KEY","hanger"),a.addConstant(d.Keys,"PANTOGRAPH_KEY","pantograph"),a.addConstant(d.Keys,"TROUSER_KEY","trouser"),a.addConstant(d,"DEFAULT_MATERIAL_COLOR",c.Colors.Material.MAT_DARK_BLUE),a.addConstant(d.FrnData.millsPerPixel,"MIN_VAL",5),a.addConstant(d.FrnData.millsPerPixel,"DEFAULT_VAL",7),a.addConstant(d.FrnData.millsPerPixel,"MAX_VAL",10),a.addConstant(d.FrnData.millsPerPixel,"RANGE_LABEL","Range: (7 <= millsPerPixel <= 10), default: 7"),a.addConstant(d.FrnData.millsPerPixelForDepth,"MIN_VAL",16),a.addConstant(d.FrnData.millsPerPixelForDepth,"DEFAULT_VAL",16),a.addConstant(d.FrnData.millsPerPixelForDepth,"MAX_VAL",20),a.addConstant(d.FrnData.millsPerPixelForDepth,"RANGE_LABEL","Range: (16 <= millsPerPixelForDepth <= 20), default: 16"),a.addConstant(d.FrnData.cupboardWidth,"MIN_VAL",700),a.addConstant(d.FrnData.cupboardWidth,"DEFAULT_VAL",3e3),a.addConstant(d.FrnData.cupboardWidth,"MAX_VAL",5e3),a.addConstant(d.FrnData.cupboardWidth,"RANGE_LABEL","Range: (700 <= cupboardWidth <= 5000), default: 3000"),a.addConstant(d.FrnData.cupboardHeight,"MIN_VAL",1e3),a.addConstant(d.FrnData.cupboardHeight,"DEFAULT_VAL",2500),a.addConstant(d.FrnData.cupboardHeight,"MAX_VAL",3e3),a.addConstant(d.FrnData.cupboardHeight,"RANGE_LABEL","Range: (1000 <= cupboardHeight <= 3000), default: 2500"),a.addConstant(d.FrnData.cupboardDepth,"MIN_VAL",500),a.addConstant(d.FrnData.cupboardDepth,"DEFAULT_VAL",700),a.addConstant(d.FrnData.cupboardDepth,"MAX_VAL",1e3),a.addConstant(d.FrnData.cupboardDepth,"RANGE_LABEL","Range: (500 <= cupboardDepth <= 1000), default: 700"),a.addConstant(d.FrnData.leftShelveWidth,"MIN_VAL",150),a.addConstant(d.FrnData.leftShelveWidth,"DEFAULT_VAL",250),a.addConstant(d.FrnData.leftShelveWidth,"MAX_VAL",500),a.addConstant(d.FrnData.leftShelveWidth,"RANGE_LABEL","Range: (150 <= leftShelveWidth <= 500), default: 250"),a.addConstant(d.FrnData.rightShelveWidth,"MIN_VAL",150),a.addConstant(d.FrnData.rightShelveWidth,"DEFAULT_VAL",250),a.addConstant(d.FrnData.rightShelveWidth,"MAX_VAL",500),a.addConstant(d.FrnData.rightShelveWidth,"RANGE_LABEL","Range: (150 <= rightShelveWidth <= 500), default: 250"),a.addConstant(d.FrnData.thickness,"MIN_VAL",5),a.addConstant(d.FrnData.thickness,"DEFAULT_VAL",30),a.addConstant(d.FrnData.thickness,"MAX_VAL",50),a.addConstant(d.FrnData.thickness,"RANGE_LABEL","Range: (5 <= thickness <= 50), default: 30"),a.addConstant(d.FrnData.checkBoxes,"DEFAULT_FLOOR_IS_DRAWN",!0),a.addConstant(d.FrnData.checkBoxes,"DEFAULT_CEILING_IS_DRAWN",!0),a.addConstant(d.FrnData.checkBoxes,"DEFAULT_LEFT_SHELVE_IS_DRAWN",!0),a.addConstant(d.FrnData.checkBoxes,"DEFAULT_RIGHT_SHELVE_IS_DRAWN",!0),a.addConstant(d.FrnData.checkBoxes,"DEFAULT_REAR_WALL_IS_DRAWN",!0),a.addConstant(d.FrnData.checkBoxes,"DEFAULT_STAND_LEFT_IS_DRAWN",!0),a.addConstant(d.FrnData.checkBoxes,"DEFAULT_STAND_RIGHT_IS_DRAWN",!0),a.addConstant(d.FrnData.checkBoxes,"DEFAULT_STAND_IS_DRAWN",!0),a.addConstant(d,"REGEX_ONLY_HEX_DIGITS",/[0-9A-Fa-f]/gi),a.addConstant(d,"REGEX_ONLY_DIGITS",/^[0-9.,]+$/gi),a.addConstant(e,"FIRST_VISIT","firstVisit"),a.addConstant(e,"FRN_CONSTR_DATA_OBJECT","frnConstrDataObject")}}}(window.FrnConstr).init()),window.FrnConstr.namespace("FrnConstrMessages",{},function(a){"use strict";var b=a.Const.Application.FrnData;a.Utility;return{init:function(c){a.addConstant(a.Const.Messages,"NON_NUMERIC_DATA_MSG","Non numeric data entered!"),a.addConstant(a.Const.Messages,"LEFT_SHELVE_CANNOT_FIT_MSG","The left shelve cannot fit! Min. width for the cupboard is "+b.cupboardWidth.MIN_VAL+" millimeters."),a.addConstant(a.Const.Messages,"RIGHT_SHELVE_CANNOT_FIT_MSG","The right shelve cannot fit! Min. width for the cupboard is "+b.cupboardWidth.MIN_VAL+" millimeters."),a.addConstant(a.Const.Messages.millsPerPixel,"VERY_LOW_MSG","Millimeters per pixels is very low! "+b.millsPerPixel.RANGE_LABEL),a.addConstant(a.Const.Messages.millsPerPixel,"VERY_HIGH_MSG","Millimeters per pixels is very high! "+b.millsPerPixel.RANGE_LABEL),a.addConstant(a.Const.Messages.millsPerPixelForDepth,"VERY_LOW_MSG","Millimeters per pixels for depth is very low! "+b.millsPerPixelForDepth.RANGE_LABEL),a.addConstant(a.Const.Messages.millsPerPixelForDepth,"VERY_HIGH_MSG","Millimeters per pixels for depth is very high! "+b.millsPerPixelForDepth.RANGE_LABEL),a.addConstant(a.Const.Messages.cupboardWidth,"VERY_LOW_MSG","Cupboard width is very low! "+b.cupboardWidth.RANGE_LABEL),a.addConstant(a.Const.Messages.cupboardWidth,"VERY_HIGH_MSG","Cupboard width is very high! "+b.cupboardWidth.RANGE_LABEL),a.addConstant(a.Const.Messages.cupboardHeight,"VERY_LOW_MSG","Cupboard height is very low! "+b.cupboardHeight.RANGE_LABEL),a.addConstant(a.Const.Messages.cupboardHeight,"VERY_HIGH_MSG","Cupboard height is very high! "+b.cupboardHeight.RANGE_LABEL),a.addConstant(a.Const.Messages.cupboardDepth,"VERY_LOW_MSG","Cupboard depth is very low! "+b.cupboardDepth.RANGE_LABEL),a.addConstant(a.Const.Messages.cupboardDepth,"VERY_HIGH_MSG","Cupboard depth is very high! "+b.cupboardDepth.RANGE_LABEL),a.addConstant(a.Const.Messages.leftShelveWidth,"VERY_LOW_MSG","Left shelve width is very low! "+b.leftShelveWidth.RANGE_LABEL),a.addConstant(a.Const.Messages.leftShelveWidth,"VERY_HIGH_MSG","Left shelve width is very high! "+b.leftShelveWidth.RANGE_LABEL),a.addConstant(a.Const.Messages.rightShelveWidth,"VERY_LOW_MSG","Right shelve width is very low! "+b.rightShelveWidth.RANGE_LABEL),a.addConstant(a.Const.Messages.rightShelveWidth,"VERY_HIGH_MSG","Right shelve width is very high! "+b.rightShelveWidth.RANGE_LABEL),a.addConstant(a.Const.Messages.thickness,"VERY_LOW_MSG","Thickness is very low! "+b.thickness.RANGE_LABEL),a.addConstant(a.Const.Messages.thickness,"VERY_HIGH_MSG","Thickness is very high! "+b.thickness.RANGE_LABEL),a.addConstant(a.Const.Messages,"LEFT_MAX_NUM_OF_SHELVES_REACHED_MSG","Number of shelves for left wall is reached! Max: "+c.maxNumOfShelves),a.addConstant(a.Const.Messages,"RIGHT_MAX_NUM_OF_SHELVES_REACHED_MSG","Number of shelves for right wall is reached! Max: "+c.maxNumOfShelves)}}}(window.FrnConstr)),window.FrnConstr.namespace("FrnConstrErrors",{},function(a){"use strict";return{init:function(){}}}(window.FrnConstr).init()),window.FrnConstr.namespace("Utility",{},function(a,b){"use strict";var c=a.gameObject,d={font:"bold 20pt Verdana",align:"center"},e={font:"bold 17pt Verdana",align:"center"},f={font:"bold 10pt Arial",align:"center"},g={font:"bold 10pt Arial",align:"center",fill:"#4D4D4D"},h={font:"bold 10pt Arial",align:"center",fill:"red"},i={font:"bold 12pt Arial",align:"center"},j={font:"bold 12pt Arial",align:"center",fill:"red",wordWrap:!0},k=a.Const,l=k.Graphics,m=k.Application,n=m.Keys;return{makePartsArray:function(a,b){var c=0,d=[];for(c=0;c<a;c+=1)d.push(b);return d},rowOrColShift:function(a,b,c,d){return a+(b-1===a?1:l.DRAWER_MAX_HEIGHT)},zeroBasedRange:function(a,b,c){var d=0;return d=a>=c?c:a<b?b:a},convertTwoDimIndexesToOneDimIndex:function(a,b,c){return c+a*b},printGrObjectsCount:function(a){var b=null;for(b in a)a.hasOwnProperty(b)&&console.log(b+" count: "+a[b].children.length)},bubleSort:function(a,c){var d=0,e=0,f=!1;do for(f=!1,d=0;d<a.length-1;d+=1)c===b.Group.SORT_ASCENDING&&a[d]>a[d+1]&&(e=a[d],a[d]=a[d+1],a[d+1]=e,f=!0),c===b.Group.SORT_DESCENDING&&a[d]<a[d+1]&&(e=a[d],a[d]=a[d+1],a[d+1]=e,f=!0);while(f);return a},isTruthy:function(a){var b=!1;return b=!!a},findPropKey:function(a,b){var c=null,d=null;for(d in a)if(a.hasOwnProperty(d)&&"string"==typeof a[d]&&a[d]===b){c=d;break}return c},disableDisplayObject:function(a){a.inputEnabled=!1},enableDisplayObject:function(a){a.inputEnabled=!0},numOfElemInObject:function(a){return Object.keys(a).length},getTextStyle20:function(){return d},getTextStyle17:function(){return e},getTextStyle12:function(){return i},getTextStyle12Red:function(){return j},getTextStyle10:function(){return f},getTextStyle10Matterhorn:function(){return g},getTextStyle10Red:function(){return h},validateNumericFrnData:function(b,c){var d=0,e=0;return"string"==typeof c&&null===c.match(m.REGEX_ONLY_DIGITS)?(e=m.FrnData[b].DEFAULT_VAL,a.addValidationMsg(k.Messages.NON_NUMERIC_DATA_MSG+" Info: "+e+"\n")):(d=this.toFloat(c),d<m.FrnData[b].MIN_VAL?(e=m.FrnData[b].MIN_VAL,a.addValidationMsg(k.Messages[b].VERY_LOW_MSG+"\n")):d>m.FrnData[b].MAX_VAL?(e=m.FrnData[b].MAX_VAL,a.addValidationMsg(k.Messages[b].VERY_HIGH_MSG+"\n")):e=d),e},randomNumber:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},decimalAdjust:function(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?NaN:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))},decimalRound:function(a,b){return this.decimalAdjust("round",a,b)},decimalFloor:function(a,b){return this.decimalAdjust("floor",a,b)},decimalCeil:function(a,b){return this.decimalAdjust("ceil",a,b)},percentToSampleCustomExp:function(a,b,c){return this.decimalRound(Math.abs(b)*Math.abs(a)/100,c)},percentToSample:function(a,b){return this.percentToSampleCustomExp(a,b,k.DECIMAL_ROUND_EXP)},sampleToPercent:function(a,b){return this.decimalRound(100*Math.abs(a)/Math.abs(b),k.DECIMAL_ROUND_EXP)},getRGBHexValue:function(a,b){var c="",d=m.REGEX_ONLY_HEX_DIGITS;for(c=a.match(d).join("");c.length<b;)c="0"+c;return c=c.substring(0,b)},getDarkerStringColor:function(a,b){var c=this.getRGBHexValue(a,6),d=this.toHex(c.substring(0,2)),e=this.toHex(c.substring(2,4)),f=this.toHex(c.substring(4,6)),g=this.getRGBHexValue(this.decimalRound(this.percentToSampleCustomExp(b,d,0),0).toString(16),l.NUM_OF_COLOR_CHANNEL_DIGITS)+this.getRGBHexValue(this.decimalRound(this.percentToSampleCustomExp(b,e,0),0).toString(16),l.NUM_OF_COLOR_CHANNEL_DIGITS)+this.getRGBHexValue(this.decimalRound(this.percentToSampleCustomExp(b,f,0),0).toString(16),l.NUM_OF_COLOR_CHANNEL_DIGITS);return g},getDarkerHexColor:function(a,b){return this.toHex(this.getDarkerStringColor(a,b))},getHexColor:function(a){return this.toHex(this.getRGBHexValue(a,l.NUM_OF_COLOR_DIGITS))},getColor:function(a,b){var c="";switch(a){case n.MATERIAL_COLOR_KEY:c=b===l.Colors.Material.MAT_BLACK?l.Colors.DARK_GRAY_1:this.getHexColor(b);break;case n.DARKER_COLOR_KEY:c=b===l.Colors.Material.MAT_BLACK?l.Colors.DEFAULT_EDGE_COLOR:this.getDarkerHexColor(b,l.DEFAULT_COLOR_SHIFT_PERCENT);break;case n.EDGE_COLOR_KEY:c=b===l.Colors.Material.MAT_BLACK?l.Colors.MATTERHORN:l.Colors.DEFAULT_EDGE_COLOR;break;default:c=b===l.Colors.Material.MAT_BLACK?l.Colors.MATTERHORN:l.Colors.DEFAULT_EDGE_COLOR}return c},toDecimal:function(a){return parseInt(a,10)},toFloat:function(a){return parseFloat(a,10)},toHex:function(a){return parseInt(a,16)},convertMillsToPixels:function(a,b){return this.decimalRound(a/b,k.DECIMAL_ROUND_EXP)},convertPixelsToMills:function(a,b){return this.decimalRound(a*b,k.DECIMAL_ROUND_EXP)},saveCanvasData:function(a){var d=new b.Rectangle(0,0,c.width,c.height),e=c.make.bitmapData(c.width,c.height,a,!0);return e.copyRect(c.canvas,d,0,0),e},addScreenBmpData:function(a,b,c,d,e,f,g){a.addToWorld(b,c,d,e,f,g)},makeShelveDataObject:function(a,b,c,d,e,f,g,h){var i=this.sampleToPercent(d-b-f,g),j=this.percentToSample(i,e),k=b+j,l={pt1:{x:a,y:d},cp1:{x:a,y:k},pt2:{x:c,y:k},pt3:{x:c,y:k+h},cp2:{x:a,y:k+h},pt4:{x:a,y:d+h},pt5:{x:c,y:d+h}};return l},isTopCornerShelvesDrawn:function(a,b,c){return c>=this.decimalRound(a,k.DECIMAL_ROUND_EXP)&&c<this.decimalRound(b,k.DECIMAL_ROUND_EXP)},isRectShelveDrawn:function(a,b){return b===this.decimalRound(a,k.DECIMAL_ROUND_EXP)},isBottomCornerShelvesDrawn:function(a,b,c){return c>this.decimalRound(a,k.DECIMAL_ROUND_EXP)&&c<=this.decimalRound(b,k.DECIMAL_ROUND_EXP)}}}(window.FrnConstr,Phaser)),window.FrnConstr.namespace("InnerSlotMatrixUtility",{},function(a){"use strict";var b=(a.gameObject,a.Const),c=b.Graphics,d=b.Application,e=d.Keys,f=a.Utility;return{highlightTieFields:function(a,b,d){var f=0,g=0,h=d.length,i=d[0].length,j=-1,k=-1,l=!0;if(b.row!==-1&&b.col!==-1&&b.row+1<h){if(b.col>0&&b.col<3){for(j=0,k=2,f=1;f<3;f+=1)if(a[b.row][f].partType1!==e.EMPTY_SLOT_KEY||a[b.row][f].partType2!==e.EMPTY_SLOT_KEY||a[b.row+1][f].partType1!==e.EMPTY_SLOT_KEY||a[b.row+1][f].partType2!==e.EMPTY_SLOT_KEY){l=!1;break}}else if(b.col>=i-3&&b.col<i)for(j=i-3,k=i-1,f=j+1;f<k;f+=1)if(a[b.row][f].partType1!==e.EMPTY_SLOT_KEY||a[b.row][f].partType2!==e.EMPTY_SLOT_KEY||a[b.row+1][f].partType1!==e.EMPTY_SLOT_KEY||a[b.row+1][f].partType2!==e.EMPTY_SLOT_KEY){l=!1;break}if(j!==-1&&k!==-1)for(l?this.enableMatrixArea(d,b.row,j,2,c.TIE_WIDTH):this.disableMatrixArea(d,b.row,j,2,c.TIE_WIDTH),f=0;f<h&&b.row+1<h;f+=1)for(g=0;g<i;g+=1)f!==b.row&&f!==b.row+1?d[f][g].alpha=0:j!==-1&&k!==-1&&(g<j||g>k)&&(d[f][g].alpha=0)}return{beginIndex:j,endIndex:k,drawPart:l}},highlightShoesFields:function(a,b,c){var d=0,f=0,g=c.length,h=c[0].length,i=-1,j=-1,k=!0,l=0,m=g-1;if(a[b.row][b.col].vert||a[b.row][b.col].horz||a[b.row][b.col].partType1!==e.EMPTY_SLOT_KEY){for(k=!1,d=b.row;d>=0&&!a[d][b.col].horz;d-=1)l=d;for(d=b.row+1;d<g&&!a[d][b.col].horz;d+=1)m=d;this.disableMatrixArea(c,l,b.col,m-l+1,1)}else{for(d=b.row;d>=0&&!a[d][b.col].horz;d-=1)a[d][b.col].partType1!==e.HORZ_BEAM_KEY&&a[d][b.col].partType2!==e.DRAWER_KEY&&a[d][b.col].partType2!==e.TIE_KEY||(k=!1),i=d;for(d=b.row+1;d<g&&!a[d][b.col].horz;d+=1)a[d][b.col].partType1!==e.HORZ_BEAM_KEY&&a[d][b.col].partType2!==e.DRAWER_KEY&&a[d][b.col].partType2!==e.TIE_KEY||(k=!1),j=d;k?this.enableMatrixArea(c,i,b.col,j-i+1,1):this.disableMatrixArea(c,i,b.col,j-i+1,1)}for(d=0;d<g;d+=1)for(f=0;f<h;f+=1)f!==b.col?c[d][f].alpha=0:i!==-1&&j!==-1&&(d<i||d>j)&&(c[d][f].alpha=0);return{beginIndex:i,endIndex:j,drawPart:k}},enableSlot:function(a,b,d){a[b][d].alpha=.5,a[b][d].tint=c.Colors.GREEN},disableSlot:function(a,b,d){a[b][d].alpha=.5,a[b][d].tint=c.Colors.RED},hideSlot:function(a,b,d){a[b][d].alpha=0,a[b][d].tint=c.Colors.BLUE},enableMatrixArea:function(a,b,c,d,e){var f=0,g=0;for(f=b;f<b+d;f+=1)for(g=c;g<c+e;g+=1)this.enableSlot(a,f,g);return a},disableMatrixArea:function(a,b,c,d,e){var f=0,g=0;for(f=b;f<b+d;f+=1)for(g=c;g<c+e;g+=1)this.disableSlot(a,f,g);return a},hideRowsArea:function(a,b,c,d){var e=0,f=0;for(e=0;e<b;e+=1)for(f=0;f<c;f+=1)e!==d&&this.hideSlot(a,e,f);return a},hideColsArea:function(a,b,c,d){var e=0,f=0;for(e=0;e<b;e+=1)for(f=0;f<c;f+=1)f!==d&&this.hideSlot(a,e,f);return a},highlightHorzBaffleSlots:function(a,b,c,d,e,f){var g=a[0].length,h=a.length;b?this.enableMatrixArea(a,e,c,1,d):this.disableMatrixArea(a,e,c,1,d),this.hideRowsArea(a,h,g,e)},highlightVertBaffleSlots:function(a,b,c,d,e,f){var g=a[0].length,h=a.length;b?this.enableMatrixArea(a,c,f,d,1):this.disableMatrixArea(a,c,f,d,1),this.hideColsArea(a,h,g,f)},hideRows:function(a,b,c,d){var e=0,f=0;for(e=0;e<b;e+=1)for(f=0;f<c;f+=1)e!==d[0]&&e!==d[1]&&this.hideSlot(a,e,f);return a},highlightDrawerSlots:function(a,b,c,d,e,f){var g=a[0].length,h=a.length;b?this.enableMatrixArea(a,e,c,h-1===e?1:2,d):this.disableMatrixArea(a,e,c,h-1===e?1:2,d),this.hideRows(a,h,g,[e,h-1===e?e:e+1])},setSlotPartType:function(a,b,c,d){switch(b){case e.HORZ_BAFFLE_KEY:a[c][d].horz=!0,a[c][d].partType1=e.HORZ_BAFFLE_KEY;break;case e.VERT_BAFFLE_KEY:a[c][d].vert=!0,a[c][d].partType1=e.VERT_BAFFLE_KEY;break;case e.HORZ_BEAM_KEY:a[c][d].partType1=e.HORZ_BEAM_KEY;break;case e.VERT_BEAM_KEY:a[c][d].partType1=e.VERT_BEAM_KEY;break;case e.DRAWER_KEY:a[c][d].partType2=e.DRAWER_KEY;break;case e.TIE_KEY:a[c][d].partType2=e.TIE_KEY;break;case e.SHOES_KEY:a[c][d].partType2=e.SHOES_KEY;break;default:a[c][d].partType1=e.EMPTY_SLOT_KEY,a[c][d].partType2=e.EMPTY_SLOT_KEY}return a},searchRangeForDrawer:function(a,b,d){var g=0,h=0,i=a[0].length,j=a.length,k=f.zeroBasedRange(b,0,j),l=f.zeroBasedRange(d,0,i),m=k+(j-1===k?1:c.DRAWER_MAX_HEIGHT),n={},o=[],p=-1,q=0,r=i;for(g=k;g<m;g+=1)for(h=l;h>=0;h-=1)if(n=a[g][h],o=n.parts,p=o.indexOf(e.VERT_BAFFLE_KEY),!n.vertBaffle||p!==-1){q=h;break}for(g=k;g<m;g+=1)for(h=l+1;h<i;h+=1)if(n=a[g][h],o=n.parts,p=o.indexOf(e.VERT_BAFFLE_KEY),!n.vertBaffle||p!==-1){r=h;break}return{row:k,col:q,numCols:r-q}},searchEmptySpaceForDrawer:function(a,b,d,g){var h=0,i=0,j=a[0].length,k=a.length,l=f.zeroBasedRange(b,0,k),m=f.zeroBasedRange(d,0,j),n=f.zeroBasedRange(g,0,j),o=l+(k-1===l?1:c.DRAWER_MAX_HEIGHT),p=f.zeroBasedRange(m+n,m,j),q={},r=[],s=-1,t=!0;if(k-l<c.DRAWER_MAX_HEIGHT||n<c.DRAWER_MIN_WIDTH||n>c.DRAWER_MAX_WIDTH)t=!1;else{for(i=m;i<p;i+=1)if(q=a[l][i],
r=q.parts,s=r.indexOf(e.EMPTY_SLOT_KEY),!q.vertBeam||!q.drawer||s===-1){t=!1;break}for(h=l+1;h<o;h+=1)for(i=m;i<p;i+=1)if(q=a[h][i],r=q.parts,s=r.indexOf(e.EMPTY_SLOT_KEY),!q.horzBaffle||!q.vertBeam||!q.drawer||s===-1){t=!1;break}}return t},addDrawer:function(a,b,d,g){var h=0,i=0,j=null,k=a[0].length,l=a.length,m=f.zeroBasedRange(b,0,l),n=f.zeroBasedRange(d,0,k),o=f.zeroBasedRange(g,0,k),p=m+(l-1===m?1:c.DRAWER_MAX_HEIGHT),q=f.zeroBasedRange(n+o,n,k),r=a[m][n].parts,s=r.indexOf(e.EMPTY_SLOT_KEY);if(s!==-1){for(i=m;i<p;i+=1)for(h=n;h<q;h+=1)j=a[i][h],j=this.modifyInnerPartAccess(j,!0,j.horzBeam,!0,j.vertBeam,!1,!1,!1,!1,!1,!1),r=j.parts,s=r.indexOf(e.EMPTY_SLOT_KEY),j.parts[s]=e.DRAWER_KEY;for(i=m+1;i<p;i+=1)for(h=n;h<q;h+=1)j=a[i][h],j=this.modifyInnerPartAccess(j,!1,j.horzBeam,!0,j.vertBeam,!1,!1,!1,!1,!1,!1),r=j.parts,s=r.indexOf(e.EMPTY_SLOT_KEY),j.parts[s]=e.DRAWER_KEY}else console.log("addHorzBaffle(innerPartsSlotMatrix, row, col, numCols): no free part slot");return a},addHorzBaffle:function(a,b,c,d){var g=0,h=null,i=a[0].length,j=a.length,k=f.zeroBasedRange(b,0,j),l=f.zeroBasedRange(c,0,i),m=f.zeroBasedRange(d,0,i),n=f.zeroBasedRange(l+m,l,i),o=a[k][l].parts,p=o.indexOf(e.EMPTY_SLOT_KEY);if(p!==-1)for(g=l;g<n;g+=1)h=a[k][g],h=this.modifyInnerPartAccess(h,!1,!1,h.vertBaffle,h.vertBeam,h.drawer,!1,!1,h.hanger,!1,!1),o=h.parts,p=o.indexOf(e.EMPTY_SLOT_KEY),h.parts[p]=e.HORZ_BAFFLE_KEY;else console.log("addHorzBaffle(innerPartsSlotMatrix, row, col, numCols): no free part slot");return a},searchRangeForHorzBaffle:function(a,b,c){var d=0,g=a[0].length,h=a.length,i=f.zeroBasedRange(b,0,h),j=f.zeroBasedRange(c,0,g),k={},l=[],m=-1,n=0,o=g;for(d=j;d>=0;d-=1)if(k=a[i][d],l=k.parts,m=l.indexOf(e.VERT_BAFFLE_KEY),!k.vertBaffle||m!==-1){n=d;break}for(d=j+1;d<g;d+=1)if(k=a[i][d],l=k.parts,m=l.indexOf(e.VERT_BAFFLE_KEY),!k.vertBaffle||m!==-1){o=d;break}return{row:i,col:n,numCols:o-n}},searchEmptySpaceForHorzBaffle:function(a,b,c,d){var g=0,h=a[0].length,i=a.length,j=f.zeroBasedRange(b,0,i),k=f.zeroBasedRange(c,0,h),l=f.zeroBasedRange(d,0,h),m=f.zeroBasedRange(k+l,k,h),n={},o=[],p=-1,q=!0;for(g=k;g<m;g+=1)if(n=a[j][g],o=n.parts,p=o.indexOf(e.EMPTY_SLOT_KEY),!n.horzBaffle||!n.horzBeam||!n.vertBeam||p===-1){q=!1;break}return q},addHorzBeam:function(a,b,d,g){var h=0,i=0,j=null,k=a[0].length,l=a.length,m=f.zeroBasedRange(b,0,l),n=f.zeroBasedRange(d,0,k),o=f.zeroBasedRange(g,0,k),p=f.zeroBasedRange(m+c.HORZ_BEAM_SPACE,0,l),q=f.zeroBasedRange(n+o,n,k),r=a[m][n].parts,s=r.indexOf(e.EMPTY_SLOT_KEY);if(s!==-1)for(h=m;h<p;h+=1)for(i=n;i<q;i+=1)j=a[h][i],j=this.modifyInnerPartAccess(j,!0,!1,!0,!1,!1,!1,!1,!1,!1,!1),r=j.parts,s=r.indexOf(e.EMPTY_SLOT_KEY),j.parts[s]=e.HORZ_BEAM_KEY;else console.log("addHorzBeam(innerPartsSlotMatrix, row, col, numCols): no free part slot");return a},searchEmptySpaceForHorzBeam:function(a,b,d,g){var h=0,i=0,j=a[0].length,k=a.length,l=f.zeroBasedRange(b,0,k),m=f.zeroBasedRange(d,0,j),n=f.zeroBasedRange(g,0,j),o=f.zeroBasedRange(l+c.HORZ_BEAM_SPACE,l,k),p=f.zeroBasedRange(m+n,m,j),q={},r=[],s=-1,t=!0;for(h=l;h<o;h+=1)for(i=m;i<p;i+=1)if(q=a[h][i],r=q.parts,s=r.indexOf(e.EMPTY_SLOT_KEY),!(q.horzBaffle&&q.horzBeam&&q.drawer&&q.vertBeam&&s!==-1)){t=!1;break}return t},addVertBaffle:function(a,b,c,d){var g=0,h=null,i=a[0].length,j=a.length,k=f.zeroBasedRange(b,0,j),l=f.zeroBasedRange(c,0,i),m=f.zeroBasedRange(d,0,j),n=f.zeroBasedRange(k+m,k,j),o=a[k][l].parts,p=o.indexOf(e.EMPTY_SLOT_KEY);if(p!==-1)for(g=k;g<n;g+=1)h=a[g][l],h=this.modifyInnerPartAccess(h,h.horzBaffle,h.horzBeam,!1,!0,!0,!0,!0,h.hanger,!0,!0),o=h.parts,p=o.indexOf(e.EMPTY_SLOT_KEY),h.parts[p]=e.VERT_BAFFLE_KEY;else console.log("addVertBaffle(innerPartsSlotMatrix, row, col, numRows): no free part slot");return a},searchRangeForVertBaffle:function(a,b,c){var d=0,g=a[0].length,h=a.length,i=f.zeroBasedRange(b,0,h),j=f.zeroBasedRange(c,0,g),k={},l=[],m=-1,n=0,o=h;for(d=i;d>=0;d-=1)if(k=a[d][j],l=k.parts,m=l.indexOf(e.HORZ_BAFFLE_KEY),!k.horzBaffle||m!==-1){n=d;break}for(d=i+1;d<h;d+=1)if(k=a[d][j],l=k.parts,m=l.indexOf(e.HORZ_BAFFLE_KEY),!k.horzBaffle||m!==-1){o=d;break}return{row:n,col:j,numRows:o-n}},searchEmptySpaceForVertBaffle:function(a,b,c,d){var g=0,h=a[0].length,i=a.length,j=f.zeroBasedRange(b,0,i),k=f.zeroBasedRange(c,0,h),l=f.zeroBasedRange(d,0,i),m=f.zeroBasedRange(j+l,j,i),n={},o=[],p=-1,q=!0;for(g=j;g<m;g+=1)if(n=a[g][k],o=n.parts,p=o.indexOf(e.EMPTY_SLOT_KEY),!n.vertBaffle||!n.vertBeam||!n.drawer||p===-1){q=!1;break}return q},searchEmptySpaceForVertBeam:function(a,b,c,d){var g=0,h=a[0].length,i=a.length,j=f.zeroBasedRange(b,0,i),k=f.zeroBasedRange(c,0,h),l=f.zeroBasedRange(d,0,i),m=f.zeroBasedRange(j+l,j,i),n={},o=[],p=-1,q=!0;for(g=j;g<m;g+=1)if(n=a[g][k],o=n.parts,p=o.indexOf(e.EMPTY_SLOT_KEY),!n.vertBaffle||!n.vertBeam||!n.drawer||p===-1){q=!1;break}return q},addVertBeam:function(a,b,c,d){var g=0,h=null,i=a[0].length,j=a.length,k=f.zeroBasedRange(b,0,j),l=f.zeroBasedRange(c,0,i),m=f.zeroBasedRange(d,0,j),n=f.zeroBasedRange(k+m,k,j),o=a[k][l].parts,p=o.indexOf(e.EMPTY_SLOT_KEY);if(p!==-1)for(g=k;g<n;g+=1)h=a[g][l],h=this.modifyInnerPartAccess(h,h.horzBaffle,h.horzBeam,!0,!1,!0,!0,!0,h.hanger,!0,!0),o=h.parts,p=o.indexOf(e.EMPTY_SLOT_KEY),h.parts[p]=e.VERT_BEAM_KEY;else console.log("addVertBeam(innerPartsSlotMatrix, row, col, numRows): no free part slot");return a},modifyInnerPartAccess:function(a,b,c,d,e,g,h,i,j,k,l){var m=this.defaultSlotDataObject(),n=f.isTruthy(a)?a:m;return n.horzBaffle="boolean"==typeof b?b:m.horzBaffle,n.horzBeam="boolean"==typeof c?c:m.horzBeam,n.vertBaffle="boolean"==typeof d?d:m.vertBaffle,n.vertBeam="boolean"==typeof e?e:m.vertBeam,n.drawer="boolean"==typeof g?g:m.drawer,n.tie="boolean"==typeof h?h:m.tie,n.shoes="boolean"==typeof i?i:m.shoes,n.hanger="boolean"==typeof j?j:m.hanger,n.pantograph="boolean"==typeof k?k:m.pantograph,n.trouser="boolean"==typeof l?l:m.trouser,n},defaultSlotDataObject:function(){return{horzBaffle:!0,horzBeam:!0,vertBaffle:!0,vertBeam:!0,drawer:!0,tie:!0,shoes:!0,hanger:!0,pantograph:!0,trouser:!0,parts:f.makePartsArray(c.MAX_PARTS_PER_SLOT,e.EMPTY_SLOT_KEY)}},defaultInnerPartsMatrix:function(a,b){var c=[],d=0,e=0;for(d=0;d<a;d+=1)for(c[d]=[],e=0;e<b;e+=1)c[d].push(this.defaultSlotDataObject());return c},makeInnerPartsMatrix:function(a,b,c,d,e,g){return f.isTruthy(d)&&0!==d.length&&"object"!=typeof d&&"boolean"!=typeof d||(d=this.defaultInnerPartsMatrix(e,g)),a&&(d=this.addHorzBaffle(d,0,0,g)),b&&(d=this.addHorzBaffle(d,e-1,0,g)),c&&(d=this.addVertBaffle(d,0,0,e)),d},makeMatrixSlotObject:function(a,b,c,d){return{vert:a,horz:b,partType1:c,partType2:d}},createShelveSlotMatrix:function(a,b){var c=a.constrData,d=a.maxNumOfBeams,f=a.maxNumOfInnerShelves,g=0,h=0;if(0===b.length)for(g=0;g<f;g+=1)for(b[g]=[],h=0;h<d;h+=1)b[g].push(this.makeMatrixSlotObject(!1,!1,e.EMPTY_SLOT_KEY,e.EMPTY_SLOT_KEY));if(c.ceiling.enabled)for(g=0;g<d;g+=1)b[0][g]=this.makeMatrixSlotObject(!1,!0,e.HORZ_BAFFLE_KEY,e.EMPTY_SLOT_KEY);if(b[0][0].vert=!0,c.floor.enabled)for(g=0;g<d;g+=1)b[f-1][g]=this.makeMatrixSlotObject(!1,!0,e.HORZ_BAFFLE_KEY,e.EMPTY_SLOT_KEY);if(b[f-1][0].vert=!0,c.leftWall.enabled)for(g=1;g<f-1;g+=1)b[g][0]=this.makeMatrixSlotObject(!0,!1,e.VERT_BAFFLE_KEY,e.EMPTY_SLOT_KEY);return b}}}(window.FrnConstr)),window.FrnConstr.namespace("GraphicsUtility",{},function(a,b){"use strict";var c=a.gameObject,d=a.Const,e=d.Graphics,f=d.Application,g=f.Keys,h=a.Utility,i=a.InnerSlotMatrixUtility;return{getChildByName:function(a,b){var c=0,d=a.children,e=null;for(c=0;c<d.length;c+=1)if(d[c].name===b){console.log(b),e=d[c];break}return e},graphicsBubleSort:function(a,c,d){var e=0,f=null,g=!1;do for(g=!1,e=0;e<c.length-1;e+=1)d===b.Group.SORT_ASCENDING&&c[e][a]>c[e+1][a]&&(f=c[e],c[e]=c[e+1],c[e+1]=f,g=!0),d===b.Group.SORT_DESCENDING&&c[e][a]<c[e+1][a]&&(f=c[e],c[e]=c[e+1],c[e+1]=f,g=!0);while(g);return c},slotContainsPt:function(a,b){var c=0,d=0,e={row:-1,col:-1};for(c=0;c<a.length;c+=1){for(d=0;d<a[c].length;d+=1)if(this.geoObjContainsPt(a[c][d],b.x,b.y)){e.row=c,e.col=d;break}if(e.row!==-1&&e.col!==-1)break}return e},geoObjContainsPt:function(a,b,c){return a.getBounds().contains(b,c)},drawHorzInnerShelveSlots:function(b,c){var d=0,f=0,g=0,h=b.cupboardWidthPx,i=b.innerShelveSlotHeight,j=[],k=null;for(d=0;d<b.maxNumOfInnerShelves;d+=1)f=b.artmTree.frameX.sumLeftShelveWidthPx.value,g=b.artmTree.frameY.value+d*b.innerShelveSlotHeight,k=this.drawSprite(a.ImageAssetKeys.SHELVE_SLOT,f,g,h,i,0,e.Colors.BLUE,"slot-"+d,c),j.push(k);return j},drawVertInnerShelveSlots:function(b,c){var d=0,f=0,g=0,h=b.innerShelveSlotHeight,i=b.cupboardHeightPx,j=[],k=null;for(d=0;d<b.maxNumOfBeams;d+=1)f=b.artmTree.frameX.sumLeftShelveWidthPx.value+d*b.innerShelveSlotWidth,g=b.artmTree.frameY.sumThicknessPx.value,k=this.drawSprite(a.ImageAssetKeys.SHELVE_SLOT,f,g,h,i,0,e.Colors.BLUE,"slot-"+d,c),j.push(k);return j},drawShelveMatrix:function(b,c){var d=0,f=0,g=0,h=0,i=b.innerShelveSlotWidth,j=b.innerShelveSlotHeight,k=[],l=null;for(d=0;d<b.maxNumOfInnerShelves;d+=1)for(k[d]=[],h=b.artmTree.frameY.value+d*b.innerShelveSlotHeight,f=0;f<b.maxNumOfBeams;f+=1)g=b.artmTree.frameX.sumLeftShelveWidthPx.value+f*b.innerShelveSlotWidth,l=this.drawSprite(a.ImageAssetKeys.SHELVE_SLOT,g,h,i,j,0,e.Colors.BLUE,"slot-"+d+"-"+f,c),k[d].push(l);return k},drawText:function(a,b,d,e,f,g){var i=c.add.text(b,d,e,f);return a.addChild(i),i.name=h.isTruthy(g)?g+"Text":"text"+a.getChildIndex(i),i},drawSprite:function(a,b,d,e,f,g,i,j,k){var l=c.add.sprite(b,d,a);return l.width=e,l.height=f,l.alpha=g,l.tint=i,l.name=j,h.isTruthy(k)?k.addChild(l):c.world.addChild(l),l},drawRect:function(a,b,d,e,f,g,i,j,k,l,m){var n=c.add.graphics(b,d);return n.lineStyle(g,i,j),n.beginFill(k,l),n.drawRect(0,0,e,f),n.endFill(),a.addChild(n),n.name=h.isTruthy(m)?m+"Rect":"rect"+a.getChildIndex(n),n},drawLine:function(a,b,d,e,f,g,i,j,k){var l=c.add.graphics(0,0);return l.lineStyle(g,i,j),l.moveTo(b,d),l.lineTo(e,f),a.addChild(l),l.name=h.isTruthy(k)?k+"Line":"line"+a.getChildIndex(l),l},drawPolygon:function(a,b,d,e,f,g,i,j){var k=c.add.graphics(0,0);return k.lineStyle(d,e,f),k.beginFill(g,i),k.drawPolygon(b),k.endFill(),a.addChild(k),k.name=h.isTruthy(j)?j+"Polygon":"polygon"+a.getChildIndex(k),k},drawRoundedRect:function(a,b,d,e,f,g,i,j,k,l,m,n){var o=c.add.graphics(b,d);return o.lineStyle(i,j,k),o.beginFill(l,m),o.drawRoundedRect(0,0,e,f,g),o.endFill(),a.addChild(o),o.name=h.isTruthy(n)?n+"RoundRect":"roundRect"+a.getChildIndex(o),o},drawVerticalBeam:function(a,b,c,d,f,g,h,i){var j=0,k=null,l=0,m=0,n=0,o=0,p=0;if(c.row!==-1&&c.col!==-1){for(j=d;j<f;j+=1)g[j][c.col].alpha=0;l=g[d][c.col].x,m=g[d][c.col].y,n=g[f-1][c.col].y,o=a.thicknessPx,p=n-m+a.innerShelveSlotHeight-a.thicknessPx,k=this.drawRect(b,l,m+a.thicknessPx,o,p,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.DEFAULT_EDGE_COLOR,1,h,1,i+"-"+j),k.inputEnabled=!0,k.input.useHandCursor=!0,k.events.onInputDown.add(function(){console.log("vertBeam")},k)}return k},drawHorizontalBeam:function(a,b,c,d,f,g,h,i){var j=0,k=null,l=0,m=0,n=0,o=0,p=0;if(c.row!==-1&&c.col!==-1&&d!==-1&&f!==-1){for(j=d;j<f;j+=1)g[c.row][j].alpha=0;l=g[c.row][d].x,m=g[c.row][d].y,n=g[c.row][f-1].x,o=n-l+a.innerShelveSlotWidth-a.thicknessPx,p=a.thicknessPx,k=this.drawRect(b,l+a.thicknessPx,m,o,p,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.DEFAULT_EDGE_COLOR,1,h,1,i+"-"+j),k.inputEnabled=!0,k.input.useHandCursor=!0,k.events.onInputDown.add(function(){console.log("horzBeam")},k)}return k},drawDrawer:function(a,b,c,d,f,g,h,i){var j=0,k=null,l=0,m=0,n=0,o=0,p=0;if(c.row!==-1&&c.col!==-1){for(j=d;j<f;j+=1)g[c.row][j].alpha=0,g[c.row+1][j].alpha=0;l=g[c.row][d].x,m=g[c.row][d].y+a.thicknessPx,console.log(c.row+", "+f),n=g[c.row][f-1].x,o=n-l+a.innerShelveSlotWidth-a.thicknessPx,p=g.length===c.row+2?g[c.row+1][d].y-g[c.row][d].y-a.thicknessPx:g[c.row+2][d].y-g[c.row][d].y-a.thicknessPx,k=this.drawRect(b,l+a.thicknessPx,m,o,p,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.DEFAULT_EDGE_COLOR,1,h,1,i+"-"+j)}return k},drawTie:function(a,b,c,d,f,h,j,k,l){var m=0,n=null,o=0,p=0,q=0,r=0,s=0;for(m=d;m<f+1;m+=1)i.setSlotPartType(a.constrData.shelveSlotMatrix,g.TIE_KEY,c.row,m),h[c.row][m].alpha=0,i.setSlotPartType(a.constrData.shelveSlotMatrix,g.TIE_KEY,c.row+1,m),h[c.row+1][m].alpha=0;return o=h[c.row][d].x,p=h[c.row][d].y+a.thicknessPx,q=h[c.row][f].x,r=q-o+a.innerShelveSlotWidth-a.thicknessPx,s=h.length===c.row+2?h[c.row+1][d].y-h[c.row][d].y-a.thicknessPx:h[c.row+2][d].y-h[c.row][d].y-a.thicknessPx,n=this.drawRect(b,o+a.thicknessPx,p,r,s,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.DEFAULT_EDGE_COLOR,1,j,1,k+"-"+m)},toolBoxBaffleHandler:function(){var b=this.grUtils.drawRect(this.context,this.x,this.y,this.width,this.height,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,this.hexColor,1,this.name);a.EnteriorScreen[this.setToolFunc](b)},toolBoxDrawerHandler:function(){var b=this.grUtils.drawRect(this.context,this.x,this.y,this.width,this.height,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,this.hexColor,1,this.name);a.EnteriorScreen[this.setToolFunc](b)},makeBaffleContextObject:function(a,b,c,d,e,f,g,h){return{context:a,grUtils:this,x:b,y:c,width:d,height:e,hexColor:f,name:g,setToolFunc:h}},drawFrnPartsToolBox:function(b,d,f,g,i,j,k,l,m){var n=null,o=null,p=null,q=this.makeBaffleContextObject(k,0,0,50,m,h.getHexColor(l),"horizontalBaffle","setHorzBaffleObject"),r=null,s=this.makeBaffleContextObject(k,0,0,m,50,h.getHexColor(l),"verticalBaffle","setVertBaffleObject"),t=null,u={context:k,grUtils:this},v=null,w={context:k,grUtils:this},x=null,y=this.makeBaffleContextObject(k,0,0,100,2*b.innerShelveSlotHeight,h.getHexColor(e.Colors.Material.MAT_ANTIQUE_WHITE),"drawer","setDrawerObject"),z=null,A=this.makeBaffleContextObject(k,0,0,50,2*b.innerShelveSlotHeight,h.getHexColor(e.Colors.Material.MAT_GREY),"tie","setTieObject"),B=null,C=this.makeBaffleContextObject(k,0,0,50,2*b.innerShelveSlotHeight,h.getHexColor(e.Colors.Material.MAT_GREY),"shoes","setShoesObject");return n=c.add.graphics(f,g),o=this.drawRoundedRect(n,0,0,i,j,15,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,h.getHexColor(e.Colors.Material.MAT_ANTIQUE_WHITE),1,"toolBoxContainer"),p=c.add.button(5,0,a.ImageAssetKeys.HORIZONTAL_BAFFLE),p.events.onInputDown.add(this.toolBoxBaffleHandler,q),n.addChild(p),r=c.add.button(82,0,a.ImageAssetKeys.VERTICAL_BAFFLE),r.events.onInputDown.add(this.toolBoxBaffleHandler,s),n.addChild(r),t=c.add.button(159,0,a.ImageAssetKeys.HORIZONTAL_BEAM),t.events.onInputDown.add(function(){var b=c.add.graphics(f,g),d=this.grUtils.drawRect(this.context,0,5,50,m,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,e.Colors.DARK_GRAY,1,"horzBeamHorzPart"),h=this.grUtils.drawRect(this.context,0,0,m,10+m,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,e.Colors.DARK_GRAY,1,"horzBeamVertPartLeft"),i=this.grUtils.drawRect(this.context,50-m,0,m,10+m,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,e.Colors.DARK_GRAY,1,"horzBeamVertPartRight");b.name="horizontalBeam",b.addChild(h),b.addChild(i),b.addChild(d),b.setChildIndex(d,0),a.EnteriorScreen.setHorzBeamObject(b)},u),n.addChild(t),v=c.add.button(236,0,a.ImageAssetKeys.VERTICAL_BEAM),v.events.onInputDown.add(function(){var b=c.add.graphics(f,g),d=this.grUtils.drawRect(this.context,5,0,m,50,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,e.Colors.DARK_GRAY,1,"vertBeamVertPart"),h=this.grUtils.drawRect(this.context,0,0,10+m,m,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,e.Colors.DARK_GRAY,1,"vertBeamHorzPartTop"),i=this.grUtils.drawRect(this.context,0,50-m,10+m,m,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.BLACK,1,e.Colors.DARK_GRAY,1,"vertBeamHorzPartBottom");b.name="verticalBeam",b.addChild(h),b.addChild(i),b.addChild(d),b.setChildIndex(d,0),a.EnteriorScreen.setVertBeamObject(b)},w),n.addChild(v),x=c.add.button(313,0,a.ImageAssetKeys.DRAWER),x.events.onInputDown.add(this.toolBoxDrawerHandler,y),n.addChild(x),z=c.add.button(390,0,a.ImageAssetKeys.TIE),z.events.onInputDown.add(this.toolBoxDrawerHandler,A),n.addChild(z),B=c.add.button(467,0,a.ImageAssetKeys.SHOES),B.events.onInputDown.add(this.toolBoxDrawerHandler,C),n.addChild(B),d.addChild(n),n},drawTopBottomMarker:function(a,b,d,f,g,h,i,j,k,l){var m=null,n=null,o=i?h:g-h;return m=c.add.graphics(0,0),this.drawLine(m,b,d,b,d+g,e.DEFAULT_GRAPHICS_BORDER_SIZE,l,1,"leftMarker"),n=this.drawText(m,b+f/2,d+(i?0:g-h),j,k,"markerLabel"),n.x-=n.width/2,n.width>=f&&(n.y+=i?-n.height:n.height),this.drawLine(m,b,d+o,b+f,d+o,e.DEFAULT_GRAPHICS_BORDER_SIZE,l,1,"horizontal"),this.drawArrowPin(m,b,d+o,e.ORIENT_WEST,e.ARROW_PIN_SIZE,l),this.drawArrowPin(m,b+f,d+o,e.ORIENT_EAST,e.ARROW_PIN_SIZE,l),this.drawLine(m,b+f,d,b+f,d+g,e.DEFAULT_GRAPHICS_BORDER_SIZE,l,1,"rightMarker"),a.addChild(m),m},drawLeftRightMarker:function(a,b,d,f,g,h,i,j,k,l){var m=null,n=null,o=i?h:f-h;return m=c.add.graphics(0,0),this.drawLine(m,b,d,b+f,d,e.DEFAULT_GRAPHICS_BORDER_SIZE,l,1,"topMarker"),n=this.drawText(m,b+(i?0:f),d+g/2,j,k,"markerLabel"),n.angle=i?-90:90,n.y+=i?n.width/2:-(n.width/2),n.width>=g&&(n.x+=i?-n.height:n.height),this.drawLine(m,b+o,d,b+o,d+g,e.DEFAULT_GRAPHICS_BORDER_SIZE,l,1,"vertical"),this.drawArrowPin(m,b+o,d,e.ORIENT_NORTH,e.ARROW_PIN_SIZE,l),this.drawArrowPin(m,b+o,d+g,e.ORIENT_SOUTH,e.ARROW_PIN_SIZE,l),this.drawLine(m,b,d+g,b+f,d+g,e.DEFAULT_GRAPHICS_BORDER_SIZE,l,1,"bottomMarker"),a.addChild(m),m},drawArrowPin:function(a,b,d,f,g,h){var i=null,j=[];switch(i=c.add.graphics(0,0),f){case e.ORIENT_NORTH:j=[{x:b-g,y:d+g},{x:b,y:d},{x:b+g,y:d+g}];break;case e.ORIENT_SOUTH:j=[{x:b-g,y:d-g},{x:b,y:d},{x:b+g,y:d-g}];break;case e.ORIENT_EAST:j=[{x:b-g,y:d-g},{x:b,y:d},{x:b-g,y:d+g}];break;case e.ORIENT_WEST:j=[{x:b+g,y:d-g},{x:b,y:d},{x:b+g,y:d+g}]}this.drawPolygon(i,j,1,h,1,h,1,"arrowPin"+f),a.addChild(i)},drawMessageWindow:function(b,d,f,g,i,j,k,l,m,n,o,p,q,r,s){var t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=g+j/2-e.DEFAULT_BUTTON_WIDTH/2,C=i+k-e.DEFAULT_BUTTON_HEIGHT-e.DEFAULT_WINDOW_PADDING;return t=c.add.graphics(0,0),t.inputEnabled=!0,t.input.enableDrag(),y=this.drawRoundedRect(t,g,i,j,k,l,m,n,o,p,q,"msgWidowMask"),u=this.drawRoundedRect(t,g,i,j,k,l,m,n,o,p,q,"msgWindowBg"),z=this.drawRect(t,g,i,j,h.percentToSample(10,k),0,n,0,r,s,"titleBar"),z.mask=y,v=this.drawText(t,g,i+e.DEFAULT_WINDOW_PADDING/2,b,h.getTextStyle12(),"messageWindowTitle"),v.x=g+j/2-v.width/2,v.wordWrapWidth=j-2*e.DEFAULT_WINDOW_PADDING,w=this.drawText(t,g+2*e.DEFAULT_WINDOW_PADDING,i+4*e.DEFAULT_WINDOW_PADDING,d,h.getTextStyle12Red(),"messageWindowMessage"),w.wordWrapWidth=j-2*e.DEFAULT_WINDOW_PADDING,A=this.drawRect(t,g,C-e.DEFAULT_WINDOW_PADDING/2,j,i+k-h.percentToSample(10,k),0,n,0,e.Colors.BACKGROUND_COLOR,.5,"bottomBar"),A.mask=y,x=a.FrnConstrButton.FrnConstrButton(B,C,a.ImageAssetKeys.STANDARD_BUTTONS_SHEET,t,function(){this.destroy()},null,null,null,null,null,null,19,18,18,19),t.addChild(x),f.addChild(t),f},drawColorSwatch:function(a,b,c,d,f,g,i,j){var k=e.DEFAULT_SWATCH_PADDING,l=null,m=null;return l=this.drawRect(a,b,c,d,f,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.DEFAULT_EDGE_COLOR,1,e.Colors.WHITE,1,"whiteBorder"),m=this.drawRect(a,b+k,c+k,d-2*k,f-2*k,e.DEFAULT_GRAPHICS_BORDER_SIZE,e.Colors.DEFAULT_EDGE_COLOR,1,h.getHexColor(g),1,"colorSwatch"),m.rectColor=g,i&&(m.inputEnabled=!0,m.input.useHandCursor=!0,m.events.onInputUp.add(j,m)),a},drawSwatches:function(a,b,c,d,f){var g=0,h=0;for(g in d)d.hasOwnProperty(g)&&(this.drawColorSwatch(a,b,c+h*e.DEFAULT_SWATCH_HEIGHT,e.DEFAULT_SWATCH_WIDTH,e.DEFAULT_SWATCH_HEIGHT,d[g],!0,f),h+=1);return a},drawColorPicker:function(a,b,d,f,g,i,j){var k=null,l=null,m=null,n={},o=null,p=null;for(o in g)g.hasOwnProperty(o)&&(n[o]=g[o]);return delete n[h.findPropKey(n,f)],k=c.add.graphics(b,d),p=this.drawColorSwatch(k,0,0,e.DEFAULT_SWATCH_WIDTH,e.DEFAULT_SWATCH_HEIGHT,f,!1),l=c.add.graphics(e.DEFAULT_SWATCH_WIDTH,0),this.drawRect(l,0,0,e.DEFAULT_SWATCH_HEIGHT,e.DEFAULT_SWATCH_HEIGHT,1,e.Colors.MATTERHORN,1,e.Colors.MATTERHORN,1,"colorPickerBtn"),l.inputEnabled=!0,l.input.useHandCursor=!0,l.events.onInputUp.add(function(){i&&null!==m?(m.destroy(),i=!1):(i=!0,m=c.add.graphics(0,e.DEFAULT_SWATCH_HEIGHT),this.grUtils.drawSwatches(m,0,0,n,j),this.grObject.addChild(m))},{grObject:k,grUtils:this}),this.drawLine(l,5,5,10,15,3,e.Colors.WHITE,1,"colorPickerBtn"),this.drawLine(l,10,15,15,5,3,e.Colors.WHITE,1,"colorPickerBtn"),k.addChild(l),a.addChild(k),k},drawShelveShadow:function(a,b,d,f){var g=c.add.graphics(0,0);return g.lineStyle(0,e.Colors.WHITE,0),g.beginFill(d,f),g.moveTo(b.pt1.x,b.pt1.y),g.lineTo(b.pt2.x,b.pt2.y),g.lineTo(b.pt3.x,b.pt3.y),g.lineTo(b.pt4.x,b.pt4.y),g.bezierCurveTo(b.pt4.x,b.pt4.y,b.cp.x,b.cp.y,b.pt1.x,b.pt1.y),g.endFill(),a.addChild(g),g},drawShelveWithArea:function(a){var b=a.polygon,d=c.add.graphics(b.pt1.x,b.pt1.y);return d.lineStyle(a.borderSize,a.borderColor,1),d.beginFill(a.areaColor,1),d.moveTo(b.pt3.x-b.pt1.x,b.pt3.y-b.pt1.y),d.bezierCurveTo(b.pt3.x-b.pt1.x,b.pt3.y-b.pt1.y,b.cp2.x-b.pt1.x,b.cp2.y-b.pt1.y,b.pt4.x-b.pt1.x,b.pt4.y-b.pt1.y),d.lineTo(b.pt5.x-b.pt1.x,b.pt5.y-b.pt1.y),d.lineTo(b.pt3.x-b.pt1.x,b.pt3.y-b.pt1.y),d.endFill(),d.beginFill(a.frontColor,1),d.moveTo(0,0),d.bezierCurveTo(0,0,b.cp1.x-b.pt1.x,b.cp1.y-b.pt1.y,b.pt2.x-b.pt1.x,b.pt2.y-b.pt1.y),d.lineTo(b.pt3.x-b.pt1.x,b.pt3.y-b.pt1.y),d.bezierCurveTo(b.pt3.x-b.pt1.x,b.pt3.y-b.pt1.y,b.cp2.x-b.pt1.x,b.cp2.y-b.pt1.y,b.pt4.x-b.pt1.x,b.pt4.y-b.pt1.y),d.lineTo(0,0),d.endFill(),a.graphicsObj.addChild(d),d},drawShelve:function(b){var c=h.decimalRound(b.frameHeight/2,d.DECIMAL_ROUND_EXP),f=h.decimalRound(b.rearHeight/2,d.DECIMAL_ROUND_EXP),g=null,i={graphicsObj:b.graphicsObj,borderSize:e.DEFAULT_GRAPHICS_BORDER_SIZE,borderColor:b.borderColor,borderAlpha:1,areaColor:b.areaColor,frontColor:b.frontColor,thickness:b.thickness,polygon:{pt1:{x:0,y:0},cp1:{x:0,y:0},pt2:{x:0,y:0},pt3:{x:0,y:0},cp2:{x:0,y:0},pt4:{x:0,y:0},pt5:{x:0,y:0}}};return h.isTopCornerShelvesDrawn(b.y+b.halfCupboardDepth,b.y+c,b.shiftY)?(i.polygon=h.makeShelveDataObject(b.x,b.y,b.shiftX,b.shiftY,b.frameHeight,b.halfCupboardDepth,b.rearHeight,b.thickness),g=this.drawShelveWithArea(i)):h.isRectShelveDrawn(b.y+c,b.shiftY)?g=this.drawRect(b.graphicsObj,b.x,b.shiftY,b.shiftX-b.x,b.thickness,e.DEFAULT_GRAPHICS_BORDER_SIZE,b.borderColor,1,b.frontColor,1,"middleShelve"):h.isBottomCornerShelvesDrawn(b.y+c,b.y+c+f,b.shiftY)&&(i.polygon=h.makeShelveDataObject(b.x,b.y,b.shiftX,b.shiftY,b.frameHeight,b.halfCupboardDepth,b.rearHeight,-b.thickness),g=this.drawShelveWithArea(i)),h.isTruthy(g)&&(g.inputEnabled=!0,g.input.useHandCursor=!0,g.input.enableDrag(),g.events.onDragStop.add(function(){this.shelves[this.shIndex].busy=!1,this.grUtils.drawMarkers(this.leftOrRight,this.shelveMarkersGrObject),this.grObject.destroy(),this.frnConstr.saveStorageData(this.frnConstr.getFrnConstrDataObject())},{grObject:g,shelveMarkersGrObject:b.shelveMarkersGrObject,leftOrRight:b.leftOrRight,shelves:b.shelvesRef,shIndex:b.shIndex,grUtils:this,frnConstr:a})),g},makeShelveDataObject:function(a,b,c,d,e){var f={graphicsObj:b,shelveMarkersGrObject:d,leftOrRight:e,borderSize:1,borderColor:a.borderColor,borderAlpha:1,frontColor:a.frontColor,frontAlpha:1,areaColor:a.areaColor,areaAlpha:1,shIndex:c,x:a.shelves[c].x,y:a.shelves[c].y,shiftX:a.shelves[c].shiftX,shiftY:a.shelves[c].shiftY,frameHeight:a.frameHeight,halfCupboardDepth:a.halfCupboardDepth,rearHeight:a.rearHeight,thickness:a.thickness,shelvesRef:a.shelves};return f},drawMarkers:function(b,c){var d={},f=a.getFrnConstrDataObject(),g=f.artmTree,i=h.decimalRound(f.maxNumOfShelves/2,0),j=0,k=0,l=[],m=b?f.leftShelveWidthPx:f.rightShelveWidthPx,n=b?f.leftShelveWidth.toString():f.rightShelveWidth.toString();for(c.removeChildren(0,c.children.length),d=b?f.constrData.leftShelveWall.shelvesData:f.constrData.rightShelveWall.shelvesData,l.push(d.shelves[0].shiftY),j=1;j<i;j+=1)d.shelves[j].busy&&l.push(d.shelves[j].shiftY);for(j=i;j<f.maxNumOfShelves;j+=1)d.shelves[j].busy&&l.push(d.shelves[j].shiftY-f.thicknessPx);for(l.push(f.artmTree.frameY.sumFrameHeight.subHalfCupboardDepth.value-f.frameY),j=0;j<l.length-1;j+=1)k=h.decimalRound(l[j+1]-l[j],0),this.drawLeftRightMarker(c,b?g.frameX.value+15:g.frameX.sumFullWidthPx.value+20,2*g.frameY.value+l[j],50,k,e.DEFAULT_TOP_MARKERS_PERCENT,b,h.convertPixelsToMills(k,f.millsPerPixel).toString(),h.getTextStyle10Matterhorn(),e.Colors.MATTERHORN);this.drawTopBottomMarker(c,b?2*f.artmTree.frameX.value:f.artmTree.frameX.value+f.artmTree.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.value,2*f.artmTree.frameY.value-e.DEFAULT_TOP_MARKERS_Y_SHIFT,m,e.DEFAULT_TOP_MARKERS_HEIGHT,e.DEFAULT_TOP_MARKERS_PERCENT,!0,n,h.getTextStyle10(),e.Colors.DEFAULT_EDGE_COLOR)},drawAllShelves:function(c,d,e,f){var i=a.getFrnConstrDataObject(),j=i.artmTree,k=0,l=0,m=0,n=null,o=c.shelves.length,p=h.decimalRound(o/2,0),q=null,r=null;for(q=this.makeNewGraphicsObject(q,j.frameX.value,j.frameY.value,"topShelves",d),q.name=g.TOP_SHELVES_KEY,r=this.makeNewGraphicsObject(r,j.frameX.value,j.frameY.value,"bottomShelves",d),r.name=g.BOTTOM_SHELVES_KEY,k=0;k<p;k+=1)c.shelves[k].busy&&(n=this.makeShelveDataObject(c,q,k,e,f),this.drawShelve(n));for(k=p;k<o;k+=1)c.shelves[k].busy&&(n=this.makeShelveDataObject(c,r,k,e,f),this.drawShelve(n));for(k=0;k<q.children.length;k+=1)q.setChildIndex(q.children[k],k);for(r.children=this.graphicsBubleSort("y",r.children,b.Group.SORT_DESCENDING),l=0,m=r.children.length-1;l<r.children.length;l+=1,m-=1)r.setChildIndex(r.children[l],m)},drawShelveWallAndShadow:function(b,c,d){var e=0,f=null,h=a.getFrnConstrDataObject(),i=b.rect;b.polygon,b.shelvesData.markers,b.key===g.LEFT_SHELVE_WALL_KEY?h.leftShelveWidthPx:h.rightShelveWidthPx,b.key===g.LEFT_SHELVE_WALL_KEY?h.leftShelveWidth.toString():h.rightShelveWidth.toString();for(this.drawRect(c,i.x,i.y,i.width,i.height,b.borderSize,b.borderColor,b.borderAlpha,i.fillColor,i.fillAlpha,b.key),f=this.makeNewGraphicsObject(f,0,0,"shelveSlots",c),f.name=g.SHELVE_SLOTS_KEY,e=0;e<h.maxNumOfShelves;e+=1)this.drawSprite(a.ImageAssetKeys.SHELVE_SLOT,i.x,i.y+i.height/h.maxNumOfShelves*e,i.width,i.height/h.maxNumOfShelves,0,i.fillColor,"slot"+e,f);return c},drawCeilOrFloorWall:function(a,b){var d=a.rect,e=a.line,f=a.polygon,g=null,h=null,i=null,j=null;return j=c.add.graphics(0,0),h=this.drawRect(j,d.x,d.y,d.width,d.height,0,a.borderColor,0,d.fillColor,d.fillAlpha,a.key),g=this.drawLine(j,e.pt1.x,e.pt1.y,e.pt2.x,e.pt2.y,a.borderSize,a.borderColor,a.borderAlpha,"top"),i=this.drawPolygon(j,[f.pt1,f.pt2,f.pt3,f.pt4],a.borderSize,a.borderColor,a.borderAlpha,f.fillColor,f.fillAlpha,"ceilOrFloor"),b.addChild(j),j},drawRearWall:function(a,b){var c=this.drawRect(b,a.x,a.y,a.width,a.height,a.borderSize,a.borderColor,a.borderAlpha,a.fillColor,a.fillAlpha,"rearWall");return c},drawLeftOrRightWall:function(b,d,f){var g=a.getFrnConstrDataObject(),i=b.rect,j=b.polygon,k=(g.leftShelveChkBox?e.DEFAULT_GRAPHIC_X-55:i.x-30,g.leftShelveChkBox?e.DEFAULT_GRAPHIC_X-35:i.x-20,null);return k=c.add.graphics(0,0),this.drawRect(k,i.x,i.y,i.width,i.height,b.borderAlpha,b.borderColor,b.borderSize,i.fillColor,i.fillAlpha,b.key),this.drawPolygon(k,[j.pt1,j.pt2,j.pt3,j.pt4],b.borderSize,b.borderColor,b.borderAlpha,j.fillColor,j.fillAlpha,"leftOrRightWall"),g.leftShelveChkBox&&this.drawLeftRightMarker(f,g.artmTree.frameX.value/2-5,g.artmTree.frameY.doubleFrameY.value,g.artmTree.frameX.value+g.leftShelveWidthPx+g.artmTree.frameX.value/2+5,g.cupboardHeightPx,e.DEFAULT_TOP_MARKERS_PERCENT,!0,g.cupboardHeight.toString(),h.getTextStyle10(),e.Colors.DEFAULT_EDGE_COLOR),d.addChild(k),k},makeNewGraphicsObject:function(a,b,d,e,f){return h.isTruthy(a)&&a.destroy(),a=c.add.graphics(b,d),a.name=e+"Graphics",h.isTruthy(f)&&f.addChild(a),a}}}(window.FrnConstr,Phaser)),window.FrnConstr.namespace("ProcessDataUtility",window.FrnConstr.Screen,function(a,b,c,d){"use strict";var e=b.Utility,f=b.InnerSlotMatrixUtility,g=b.Const,h=g.Graphics,i=g.Application.Keys;return{processData:function(a,b,c){return a=this.preProcessData(a,b,c),a.artmTree=this.makeArtmTree(a),a.constrData=this.makeConstrDataObject(a),a},preProcessData:function(a,b,c){return a.thicknessPx=e.convertMillsToPixels(a.thickness,c),a.fullWidthPx=e.convertMillsToPixels(a.fullWidth,c),a.cupboardWidthPx=e.convertMillsToPixels(a.cupboardWidth,c),a.cupboardHeightPx=e.convertMillsToPixels(a.cupboardHeight,c),a.cupboardDepthPx=e.convertMillsToPixels(a.cupboardDepth,a.millsPerPixelForDepth),a.leftShelveWidthPx=e.convertMillsToPixels(a.leftShelveWidth,c),a.rightShelveWidthPx=e.convertMillsToPixels(a.rightShelveWidth,c),a.frameX=h.DEFAULT_GRAPHIC_X,a.frameY=h.DEFAULT_GRAPHIC_Y,a.borderSize=h.DEFAULT_GRAPHICS_BORDER_SIZE,a.currentMaterialColor=e.getColor(i.MATERIAL_COLOR_KEY,b),a.currentDarkerMatColor=e.getColor(i.DARKER_COLOR_KEY,b),a.currentEdgeColor=e.getColor(i.EDGE_COLOR_KEY,b),a.shelveShiftFactor=e.decimalRound((a.cupboardHeightPx-a.cupboardDepthPx)/a.maxNumOfShelves,g.DECIMAL_ROUND_EXP),a.innerShelveSlotHeight=e.decimalRound(a.cupboardHeightPx/a.maxNumOfInnerShelves,g.DECIMAL_ROUND_EXP),a.innerShelveSlotWidth=e.decimalRound(a.cupboardWidthPx/a.maxNumOfBeams,g.DECIMAL_ROUND_EXP),a},makeArtmTree:function(a){var b=a.frameX,c=a.frameY,d=a.fullWidthPx,f=a.cupboardWidthPx,i=a.cupboardHeightPx,j=a.cupboardDepthPx,k=a.thicknessPx,l=a.leftShelveWidthPx,m=a.rightShelveWidthPx,n=e.decimalRound(j/2,g.DECIMAL_ROUND_EXP),o=a.shelveShiftFactor,p={fullWidthPx:{value:d,sumThicknessPx:{value:e.decimalRound(d+k,g.DECIMAL_ROUND_EXP),subRightShelveWidthPx:{value:e.decimalRound(d+k-m,g.DECIMAL_ROUND_EXP)}}},frameX:{value:h.DEFAULT_GRAPHIC_X,doubleFrameX:{value:e.decimalRound(2*h.DEFAULT_GRAPHIC_X,g.DECIMAL_ROUND_EXP),sumLeftShelveWidthPx:{value:e.decimalRound(2*h.DEFAULT_GRAPHIC_X+l,g.DECIMAL_ROUND_EXP)}},sumFullWidthPx:{value:e.decimalRound(b+d,g.DECIMAL_ROUND_EXP),subRightShelveWidthPx:{value:e.decimalRound(b+d-m,g.DECIMAL_ROUND_EXP),sumThicknessPx:{value:e.decimalRound(b+d-m+k,g.DECIMAL_ROUND_EXP)}}},sumLeftShelveWidthPx:{value:e.decimalRound(b+l,g.DECIMAL_ROUND_EXP),sumOne:{value:e.decimalRound(b+l+1,g.DECIMAL_ROUND_EXP)},sumThicknessPx:{value:e.decimalRound(b+l+k,g.DECIMAL_ROUND_EXP),sumHalfCupboardDepth:{value:e.decimalRound(b+l+k+n,g.DECIMAL_ROUND_EXP)}},sumHalfCupboardDepth:{value:e.decimalRound(b+l+n,g.DECIMAL_ROUND_EXP),sumDoubleThicknessPx:{value:e.decimalRound(b+l+n+2*k,g.DECIMAL_ROUND_EXP)}},sumCupboardWidthPx:{value:e.decimalRound(b+l+f,g.DECIMAL_ROUND_EXP),sumOne:{value:e.decimalRound(b+l+f+1,g.DECIMAL_ROUND_EXP)},sumThicknessPx:{value:e.decimalRound(b+l+f+k,g.DECIMAL_ROUND_EXP),sumRightShelveWidthPx:{value:e.decimalRound(b+l+f+k+m,g.DECIMAL_ROUND_EXP)}},sumHalfCupboardDepth:{value:e.decimalRound(b+l+f+n,g.DECIMAL_ROUND_EXP),sumThicknessPx:{value:e.decimalRound(b+l+f+n+k,g.DECIMAL_ROUND_EXP)}},subHalfCupboardDepth:{value:e.decimalRound(b+l+f-n,g.DECIMAL_ROUND_EXP),subThicknessPx:{value:e.decimalRound(b+l+f-n-k,g.DECIMAL_ROUND_EXP)}}}}},leftShelveWidthPx:{value:l},rightShelveWidthPx:{value:m},halfCupboardDepthPx:{value:n,sumThicknessPx:{value:e.decimalRound(n+k,g.DECIMAL_ROUND_EXP)},sumRearHeight:{value:e.decimalRound(i-n,g.DECIMAL_ROUND_EXP),subShelveShiftFactor:{value:e.decimalRound(i-n-o,g.DECIMAL_ROUND_EXP),sumThicknessPx:{value:e.decimalRound(i-n-o+k,g.DECIMAL_ROUND_EXP)}}}},frameY:{value:h.DEFAULT_GRAPHIC_Y,sumThicknessPx:{value:h.DEFAULT_GRAPHIC_Y+k},doubleFrameY:{value:2*h.DEFAULT_GRAPHIC_Y},sumHalfCupboardDepth:{value:e.decimalRound(c+n,g.DECIMAL_ROUND_EXP),sumThicknessPx:{value:e.decimalRound(c+n+k,g.DECIMAL_ROUND_EXP)},subThicknessPx:{value:e.decimalRound(c+n-k,g.DECIMAL_ROUND_EXP)},sumRearHeight:{value:e.decimalRound(c-n+i,g.DECIMAL_ROUND_EXP),subThicknessPx:{value:e.decimalRound(c-n+i-k,g.DECIMAL_ROUND_EXP)},subShelveShiftFactor:{value:e.decimalRound(c-n+i-o,g.DECIMAL_ROUND_EXP),subThicknessPx:{value:e.decimalRound(c-n+i-o-k,g.DECIMAL_ROUND_EXP)}}}},sumHalfFrameHeight:{value:e.decimalRound(h.DEFAULT_GRAPHIC_Y+i/2,g.DECIMAL_ROUND_EXP)},sumFrameHeight:{value:e.decimalRound(c+i,g.DECIMAL_ROUND_EXP),subHalfCupboardDepth:{value:e.decimalRound(c+i-n,g.DECIMAL_ROUND_EXP),subThicknessPx:{
value:e.decimalRound(c+i-n-k,g.DECIMAL_ROUND_EXP)},subShelveShiftFactor:{value:e.decimalRound(c+i-n-o,g.DECIMAL_ROUND_EXP)}},subThicknessPx:{value:e.decimalRound(c+i-k,g.DECIMAL_ROUND_EXP)},subShelveShiftFactor:{value:e.decimalRound(c+i-o,g.DECIMAL_ROUND_EXP),sumThicknessPx:{value:e.decimalRound(c+i-o+k,g.DECIMAL_ROUND_EXP)}}}},cupboardHeightPx:{value:i,subCupboardDepthPx:{value:e.decimalRound(i-j,g.DECIMAL_ROUND_EXP),halfSubCupboardDepthPx:{value:e.decimalRound((i-j)/2,g.DECIMAL_ROUND_EXP)},subDoubleThicknessPx:{value:e.decimalRound(i-j-2*k,g.DECIMAL_ROUND_EXP)}}},cupboardDepthPx:{value:j,halfCupboardDepthPx:{value:e.decimalRound(n,g.DECIMAL_ROUND_EXP)}},thicknessPx:{value:k,doubleThicknessPx:{value:e.decimalRound(2*k,g.DECIMAL_ROUND_EXP)}},cupboardWidthPx:{value:f,subCupboardDepthPx:{value:e.decimalRound(f-j,g.DECIMAL_ROUND_EXP),subThicknessPx:{value:e.decimalRound(f-j-k,g.DECIMAL_ROUND_EXP)}},sumThicknessPx:{value:e.decimalRound(f+k,g.DECIMAL_ROUND_EXP),subTwo:{value:e.decimalRound(f+k-2,g.DECIMAL_ROUND_EXP)}}}};return p},makeConstrDataObject:function(c){var d=c.artmTree,g=c.currentEdgeColor,j=c.currentMaterialColor,k=c.currentDarkerMatColor,l=c.borderSize,m=!0,n=!0,o=[],p=[],q=JSON.parse(a.localStorage.getItem(b.Const.LocalStorage.FRN_CONSTR_DATA_OBJECT)),r={rearWall:{key:i.REAR_WALL_KEY,enabled:c.rearChkBox,x:d.frameX.sumLeftShelveWidthPx.sumThicknessPx.sumHalfCupboardDepth.value,y:d.frameY.sumHalfCupboardDepth.value,width:d.cupboardWidthPx.subCupboardDepthPx.subThicknessPx.value,height:d.cupboardHeightPx.subCupboardDepthPx.value,borderSize:1,borderColor:g,borderAlpha:1,fillColor:j,fillAlpha:1},ceiling:{key:i.CEILING_KEY,enabled:c.ceilingChkBox,borderSize:l,borderColor:g,borderAlpha:1,line:{pt1:{x:d.frameX.sumLeftShelveWidthPx.value,y:d.frameY.value},pt2:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.value,y:d.frameY.value}},polygon:{pt1:{x:d.frameX.sumLeftShelveWidthPx.sumThicknessPx.value,y:d.frameY.sumThicknessPx.value},pt2:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.value,y:d.frameY.sumThicknessPx.value},pt3:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.subHalfCupboardDepth.subThicknessPx.value,y:d.frameY.sumHalfCupboardDepth.sumThicknessPx.value},pt4:{x:d.frameX.sumLeftShelveWidthPx.sumHalfCupboardDepth.sumDoubleThicknessPx.value,y:d.frameY.sumHalfCupboardDepth.sumThicknessPx.value},fillColor:k,fillAlpha:1},rect:{x:d.frameX.sumLeftShelveWidthPx.sumOne.value,y:d.frameY.value,width:d.cupboardWidthPx.sumThicknessPx.subTwo.value,height:d.thicknessPx.value,fillColor:j,fillAlpha:1}},floor:{key:i.FLOOR_KEY,enabled:c.floorChkBox,borderSize:l,borderColor:g,borderAlpha:1,line:{pt1:{x:d.frameX.sumLeftShelveWidthPx.sumThicknessPx.value,y:d.frameY.sumFrameHeight.subShelveShiftFactor.sumThicknessPx.value},pt2:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.value,y:d.frameY.sumFrameHeight.subShelveShiftFactor.sumThicknessPx.value}},polygon:{pt1:{x:d.frameX.sumLeftShelveWidthPx.sumThicknessPx.value,y:d.frameY.sumFrameHeight.subShelveShiftFactor.value},pt2:{x:d.frameX.sumLeftShelveWidthPx.sumHalfCupboardDepth.sumDoubleThicknessPx.value,y:d.frameY.sumFrameHeight.subHalfCupboardDepth.subShelveShiftFactor.value},pt3:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.subHalfCupboardDepth.subThicknessPx.value,y:d.frameY.sumFrameHeight.subHalfCupboardDepth.subShelveShiftFactor.value},pt4:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumOne.value,y:d.frameY.sumFrameHeight.subShelveShiftFactor.value},fillColor:k,fillAlpha:1},rect:{x:d.frameX.sumLeftShelveWidthPx.sumOne.value,y:d.frameY.sumFrameHeight.subShelveShiftFactor.value,width:d.cupboardWidthPx.sumThicknessPx.subTwo.value,height:d.thicknessPx.value,fillColor:j,fillAlpha:1}},leftWall:{key:i.LEFT_WALL_KEY,enabled:m,borderSize:l,borderColor:g,borderAlpha:1,polygon:{pt1:{x:d.frameX.sumLeftShelveWidthPx.sumThicknessPx.value,y:d.frameY.value},pt2:{x:d.frameX.sumLeftShelveWidthPx.sumHalfCupboardDepth.sumDoubleThicknessPx.value,y:d.frameY.sumHalfCupboardDepth.value},pt3:{x:d.frameX.sumLeftShelveWidthPx.sumHalfCupboardDepth.sumDoubleThicknessPx.value,y:d.frameY.sumFrameHeight.subHalfCupboardDepth.value},pt4:{x:d.frameX.sumLeftShelveWidthPx.sumThicknessPx.value,y:d.frameY.sumFrameHeight.value},fillColor:k,fillAlpha:1},rect:{x:d.frameX.sumLeftShelveWidthPx.value,y:d.frameY.value,width:d.thicknessPx.value,height:d.cupboardHeightPx.value,fillColor:j,fillAlpha:1}},rightWall:{key:i.RIGHT_WALL_KEY,enabled:n,borderSize:l,borderColor:g,borderAlpha:1,polygon:{pt1:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.subHalfCupboardDepth.subThicknessPx.value,y:d.frameY.sumHalfCupboardDepth.value},pt2:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.value,y:d.frameY.value},pt3:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.value,y:d.frameY.sumFrameHeight.value},pt4:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.subHalfCupboardDepth.subThicknessPx.value,y:d.frameY.sumHalfCupboardDepth.sumRearHeight.value},fillColor:k,fillAlpha:1},rect:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.value,y:d.frameY.value,width:d.thicknessPx.value,height:d.cupboardHeightPx.value,fillColor:j,fillAlpha:1}},leftShelveWall:{key:i.LEFT_SHELVE_WALL_KEY,enabled:c.leftShelveChkBox,borderSize:l,borderColor:g,borderAlpha:1,polygon:{pt1:{x:d.frameY.value,y:d.frameY.sumHalfCupboardDepth.sumThicknessPx.value},pt2:{x:d.frameX.sumLeftShelveWidthPx.value,y:d.frameY.sumHalfCupboardDepth.sumThicknessPx.value},cp:{x:d.frameX.sumLeftShelveWidthPx.value,y:d.frameY.sumHalfFrameHeight.value},pt3:{x:d.frameX.sumLeftShelveWidthPx.value,y:d.frameY.sumHalfCupboardDepth.sumRearHeight.subThicknessPx.value},pt4:{x:d.frameY.value,y:d.frameY.sumHalfCupboardDepth.sumRearHeight.subThicknessPx.value},fillColor:k,fillAlpha:h.DEFAULT_SHADOW_ALPHA},rect:{x:d.frameX.value,y:d.frameY.sumHalfCupboardDepth.value,width:d.leftShelveWidthPx.value,height:d.cupboardHeightPx.subCupboardDepthPx.value,fillColor:j,fillAlpha:1},shelvesData:{key:i.LEFT_SHELVE_KEY,frameHeight:d.cupboardHeightPx.value,halfCupboardDepth:d.cupboardDepthPx.halfCupboardDepthPx.value,rearHeight:d.cupboardHeightPx.subCupboardDepthPx.value,thickness:d.thicknessPx.value,borderColor:g,frontColor:j,areaColor:k}},rightShelveWall:{key:i.RIGHT_SHELVE_WALL_KEY,enabled:c.rightShelveChkBox,borderSize:l,borderColor:g,borderAlpha:1,polygon:{pt1:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.sumRightShelveWidthPx.value,y:d.frameY.sumHalfCupboardDepth.sumThicknessPx.value},pt2:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.value,y:d.frameY.sumHalfCupboardDepth.sumThicknessPx.value},cp:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.value,y:d.frameY.sumHalfFrameHeight.value},pt3:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.value,y:d.frameY.sumHalfCupboardDepth.sumRearHeight.subThicknessPx.value},pt4:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.sumRightShelveWidthPx.value,y:d.frameY.sumHalfCupboardDepth.sumRearHeight.subThicknessPx.value},fillColor:k,fillAlpha:h.DEFAULT_SHADOW_ALPHA},rect:{x:d.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.value,y:d.frameY.sumHalfCupboardDepth.value,width:d.rightShelveWidthPx.value,height:d.cupboardHeightPx.subCupboardDepthPx.value,fillColor:j,fillAlpha:1},shelvesData:{key:i.RIGHT_SHELVE_KEY,frameHeight:d.cupboardHeightPx.value,halfCupboardDepth:d.cupboardDepthPx.halfCupboardDepthPx.value,rearHeight:d.cupboardHeightPx.subCupboardDepthPx.value,thickness:d.thicknessPx.value,borderColor:g,frontColor:j,areaColor:k}}};return e.isTruthy(q.constrData)?c.constrData=q.constrData:c.constrData=r,c.constrData.shelveSlotMatrix=f.makeInnerPartsMatrix(c.constrData.ceiling.enabled,c.constrData.ceiling.enabled,c.constrData.ceiling.enabled,c.constrData.shelveSlotMatrix,c.maxNumOfInnerShelves,c.maxNumOfBeams),o=e.isTruthy(c.constrData.leftShelveWall.shelvesData.shelves)?c.constrData.leftShelveWall.shelvesData.shelves:[],p=e.isTruthy(c.constrData.rightShelveWall.shelvesData.shelves)?c.constrData.rightShelveWall.shelvesData.shelves:[],c.constrData.leftShelveWall.shelvesData.shelves=this.createLeftWallSlots(c,o),c.constrData.rightShelveWall.shelvesData.shelves=this.createRightWallSlots(c,p),r},shelveSlotObject:function(a,b,c,d,e){return{x:a,y:b,shiftX:c,shiftY:d,busy:e}},leftShelveSlot:function(a,b,c){return this.shelveSlotObject(0,0,e.decimalRound(a.artmTree.leftShelveWidthPx.value,g.DECIMAL_ROUND_EXP),c,b)},rightShelveSlot:function(a,b,c){return this.shelveSlotObject(a.artmTree.fullWidthPx.sumThicknessPx.value,0,a.artmTree.fullWidthPx.sumThicknessPx.subRightShelveWidthPx.value,c,b)},createLeftWallSlots:function(a,b){var c=0,d=a.artmTree,f=a.shelveShiftFactor,h=a.maxNumOfShelves,i=e.decimalRound(h/2,0),j=0,k=b.length,l=[];if(k>h){for(l.push(this.leftShelveSlot(a,b[0].busy,e.decimalRound(d.halfCupboardDepthPx.value,g.DECIMAL_ROUND_EXP))),c=1;c<i;c+=1)l.push(this.leftShelveSlot(a,b[c].busy,e.decimalRound(d.halfCupboardDepthPx.value+f*c,g.DECIMAL_ROUND_EXP)));for(h%2!==0&&l.push(this.leftShelveSlot(a,b[i].busy,e.decimalRound(d.halfCupboardDepthPx.sumThicknessPx.value+f*i,g.DECIMAL_ROUND_EXP))),c=i+(h%2!==0?1:0);c<h-1;c+=1)l.push(this.leftShelveSlot(a,b[c].busy,e.decimalRound(d.halfCupboardDepthPx.sumThicknessPx.value+f*c,g.DECIMAL_ROUND_EXP)));l.push(this.leftShelveSlot(a,b[h-1].busy,e.decimalRound(d.halfCupboardDepthPx.sumRearHeight.subShelveShiftFactor.sumThicknessPx.value,g.DECIMAL_ROUND_EXP)))}else if(k<=h){for(i=e.decimalRound(h/2,0),j=h-k,l.push(this.leftShelveSlot(a,0===k||b[0].busy,e.decimalRound(d.halfCupboardDepthPx.value,g.DECIMAL_ROUND_EXP))),c=1;c<k;c+=1)l.push(this.leftShelveSlot(a,b[c].busy,e.decimalRound(d.halfCupboardDepthPx.value+f*c,g.DECIMAL_ROUND_EXP)));for(c=0===k?1:k;c<h-1;c+=1)l.push(this.leftShelveSlot(a,!1,e.decimalRound(d.halfCupboardDepthPx.sumThicknessPx.value+f*c,g.DECIMAL_ROUND_EXP)));l.push(this.leftShelveSlot(a,!0,e.decimalRound(d.halfCupboardDepthPx.sumRearHeight.subShelveShiftFactor.sumThicknessPx.value,g.DECIMAL_ROUND_EXP)))}return console.log(l.length+", "+h),l},createRightWallSlots:function(a,b){var c=0,d=a.artmTree,f=a.maxNumOfShelves,h=a.shelveShiftFactor,i=[],j=b.length,k=e.decimalRound(f/2,0);if(j>f){for(i.push(this.rightShelveSlot(a,b[0].busy,e.decimalRound(d.halfCupboardDepthPx.value,g.DECIMAL_ROUND_EXP))),c=1;c<k;c+=1)i.push(this.rightShelveSlot(a,b[c].busy,e.decimalRound(d.halfCupboardDepthPx.value+h*c,g.DECIMAL_ROUND_EXP)));for(f%2!==0&&i.push(this.rightShelveSlot(a,b[k].busy,e.decimalRound(d.halfCupboardDepthPx.sumThicknessPx.value+h*k,g.DECIMAL_ROUND_EXP))),c=k+(f%2!==0?1:0);c<f-1;c+=1)i.push(this.rightShelveSlot(a,b[c].busy,e.decimalRound(d.halfCupboardDepthPx.sumThicknessPx.value+h*c,g.DECIMAL_ROUND_EXP)));i.push(this.rightShelveSlot(a,b[f-1].busy,e.decimalRound(d.halfCupboardDepthPx.sumRearHeight.subShelveShiftFactor.sumThicknessPx.value,g.DECIMAL_ROUND_EXP)))}else if(j<=f){for(i.push(this.rightShelveSlot(a,0===j||b[0].busy,e.decimalRound(d.halfCupboardDepthPx.value,g.DECIMAL_ROUND_EXP))),c=1;c<j;c+=1)i.push(this.rightShelveSlot(a,b[c].busy,e.decimalRound(d.halfCupboardDepthPx.value+h*c,g.DECIMAL_ROUND_EXP)));for(c=0===j?1:j;c<f-1;c+=1)i.push(this.rightShelveSlot(a,!1,e.decimalRound(d.halfCupboardDepthPx.sumThicknessPx.value+h*c,g.DECIMAL_ROUND_EXP)));i.push(this.rightShelveSlot(a,!0,e.decimalRound(d.halfCupboardDepthPx.sumRearHeight.subShelveShiftFactor.sumThicknessPx.value,g.DECIMAL_ROUND_EXP)))}return console.log(i.length+", "+f),i}}}(window,window.FrnConstr,Phaser,$)),window.FrnConstr.namespace("State",{},function(a){"use strict";a.gameObject;return{}}(window.FrnConstr)),window.FrnConstr.namespace("Boot",window.FrnConstr.State,function(a,b){"use strict";var c=null;return{init:function(){c=a.gameObject,c.input.maxPointers=1,c.stage.disableVisibilityChange=!0,c.device.desktop?c.scale.pageAlignHorizontally=!0:(c.scale.scaleMode=b.ScaleManager.SHOW_ALL,c.scale.setMinMax(a.Const.STAGE_HEIGHT,a.Const.LOWER_HEIGHT,a.Const.STAGE_WIDTH,a.Const.STAGE_HEIGHT),c.scale.forceLandscape=!0,c.scale.pageAlignHorizontally=!0)},preload:function(){c.stage.backgroundColor=a.Const.Graphics.Colors.BACKGROUND_COLOR,a.loadAtlasJSONHash("OTHER_GUI_ASSETS_ATLAS",null,"assets/images/UI/otherGuiAssetsSheet.png","assets/settings/otherGuiAssetsHash.json")},create:function(){c.state.start(a.Preloader.KEY),c.state.clearCurrentState()},shutdown:function(){c=null}}}(window.FrnConstr,Phaser)),window.FrnConstr.namespace("FrnConstrButton",{},function(a){"use strict";var b=a.gameObject,c=null,d=null,e=null;return{FrnConstrButton:function(f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return null!==j&&void 0!==j&&"function"==typeof j&&(c=b.add.button(f,g,h,j,i,q,r,s,t),d=null!==o&&void 0!==o&&"string"==typeof o&&a.SoundAssetKeys.hasOwnProperty(o)?b.add.audio(a.SoundAssetKeys[o]):null,c.setOverSound(d),e=null!==p&&void 0!==p&&"string"==typeof p&&a.SoundAssetKeys.hasOwnProperty(p)?b.add.audio(a.SoundAssetKeys[p]):b.add.audio(a.SoundAssetKeys.CLICK_SOUND),c.setDownSound(e),null!==k&&void 0!==k&&"function"==typeof k&&c.onInputOver.add(k,i),null!==l&&void 0!==l&&"function"==typeof l&&c.onInputOut.add(l,i),null!==m&&void 0!==m&&"function"==typeof m&&c.onInputDown.add(m,i),null!==n&&void 0!==n&&"function"==typeof n&&c.onInputUp.add(n,i)),c}}}(window.FrnConstr)),window.FrnConstr.namespace("GoToScreen",window.FrnConstr.frnConstrButton,function(a){"use strict";var b=(a.gameObject,null),c=null;return{Button:function(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return c=this.CreateGoToScreenClickHandler(a,e,d,r,s),b=this.frnConstrButton(f,g,h,i,c,j,k,l,m,null,null,n,o,p,q)},CreateGoToScreenClickHandler:function(a,b,c,d,e){return function(){void 0!==e&&null!==e&&"function"==typeof e&&(null!==d&&void 0!==d?e.apply(e,d):e()),a.fadeOutGroup(b).onComplete.add(function(){var a=this;a.gameObject.state.start(c,!0,!1,d),a.gameObject.state.clearCurrentState()},a)}}}}(window.FrnConstr)),window.FrnConstr.namespace("GoToUrl",window.FrnConstr.FrnConstrButton,function(a){"use strict";var b=null,c=null;return{Button:function(a,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return c=this.CreateGoToUrlClickHandler(a,d,e),b=this.FrnConstrButton(f,g,h,i,c,j,k,l,m,null,null,n,o,p,q)},CreateGoToUrlClickHandler:function(b,c,d){return function(){switch(d){case"TWITTER_URL":a.open("https://twitter.com/share?url="+b,c,[]);break;case"FACEBOOK_URL":a.open("https://www.facebook.com/sharer/sharer.php?u="+b,c,[]);break;case"BLOG_URL":a.open(b,c,[]);break;case"GALLERY_LINK":a.open(b,c,[])}}}}}(window)),window.FrnConstr.namespace("Screen",window.FrnConstr.State,function(a,b){"use strict";a.gameObject;return{redrawnObjects:null,screenObjects:null,bottomObjects:null,topObjects:null,clearScreenState:function(){this.screenObjects=null}}}(window.FrnConstr,Phaser)),window.FrnConstr.namespace("Preloader",window.FrnConstr.Screen,function(a){"use strict";var b=null,c=null;return{init:function(){c=this,b=a.gameObject,a.frnConstrPreloader=a.createFrnConstrPreloader()},preload:function(){a.loadAudio("CLICK_SOUND",null,["assets/audio/basic/ogg/buttonClick.ogg","assets/audio/basic/mp3/buttonClick.mp3"]),a.loadAtlasJSONHash("OTHER_GUI_ASSETS_ATLAS",null,"assets/images/UI/otherGuiAssetsSheet.png","assets/settings/otherGuiAssetsHash.json"),a.loadSpriteSheet("GUIDE_BUTTONS_SHEET",null,"assets/images/UI/guideButtonsSheet.png",100,40,8),a.loadSpriteSheet("SOCIAL_BUTTONS_SHEET",null,"assets/images/UI/socialButtonsSheet.png",152,61.5,4),a.loadSpriteSheet("STANDARD_BUTTONS_SHEET",null,"assets/images/UI/standardButtonsSheet.png",152,38.66,30),a.loadImage("HORIZONTAL_BAFFLE",null,"assets/images/UI/HorizontalBaffle.png"),a.loadImage("VERTICAL_BAFFLE",null,"assets/images/UI/VerticalBaffle.png"),a.loadImage("SHELVE_SLOT",null,"assets/images/UI/shelveSlot.png"),a.loadImage("HORIZONTAL_BEAM",null,"assets/images/UI/HorzBeam.png"),a.loadImage("VERTICAL_BEAM",null,"assets/images/UI/VertBeam.png"),a.loadImage("DRAWER",null,"assets/images/UI/Drawer.png"),a.loadImage("TIE",null,"assets/images/UI/Tie.png"),a.loadImage("SHOES",null,"assets/images/UI/Shoes.png"),c.load.onFileError.add(function(a){var b=this;b.debugMode()&&console.log("Error loading file: "+a)},a),c.load.onFileStart.add(function(a){var b=this;b.debugMode()&&console.log("Loading files, percent: "+a+"%")},a),c.load.onFileComplete.add(function(b,c,d,e,f){var g=this;g.frnConstrPreloader.preloaderTop.clear(),g.frnConstrPreloader.preloaderTop.beginFill(a.Const.Graphics.Colors.DARK_GRAY,1),g.frnConstrPreloader.preloaderTop.drawRect(2,2,b,11,"preloaderTop"),g.frnConstrPreloader.ready=!0,g.debugMode()&&console.dir(arguments)},a),c.load.onLoadStart.add(function(a){var b=this;b.debugMode()&&console.log("Started loading files: "+a)},a),c.load.onLoadComplete.add(function(){var a=this;a.debugMode()&&console.log("Finished loading files!")},a),c.load.onPackComplete.add(function(){var a=this;a.debugMode()&&console.log("Finished packing files: ")},a)},update:function(){a.frnConstrPreloader.ready===!0&&(a.frnConstrPreloader.loadingTween=b.add.tween(a.frnConstrPreloader.loadingObjects).to({alpha:0},a.Const.FADE_DURATION,a.Const.TWEEN_LINEAR,!0),a.frnConstrPreloader.loadingTween.onComplete.add(function(){var a=this;a.gameObject.state.start(a.EnteriorScreen.KEY),a.gameObject.state.clearCurrentState()},a),a.frnConstrPreloader.ready=!1)},shutdown:function(){b=null,c.clearScreenState()}}}(window.FrnConstr)),window.FrnConstr.namespace("EnteriorScreen",window.FrnConstr.Screen,function(a,b,c){"use strict";var d=null,e=null,f=a.Const,g=f.Graphics,h=f.Application.Keys,i=a.Utility,j=a.GraphicsUtility,k=a.ProcessDataUtility,l=a.InnerSlotMatrixUtility,m=(a.Const.Messages,null),n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=null,L=null,M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null,U="",V="",W=0,X=0,Y=0,Z=0,$=0,_=0,aa=0,ba=0,ca=0,da=0,ea=0,fa=0,ga=0,ha=0,ia=0,ja=0,ka=0,la=0,ma=0,na=0,oa=0,pa=0,qa=0,ra=-1,sa=-1,ta=!1,ua=!1,va=!0,wa=[],xa={};return{init:function(){d=this,e=a.gameObject,d.screenObjects=e.add.group(),d.redrawnObjects=e.add.group(),d.topObjects=e.add.group(),xa=a.getFrnConstrDataObject(),console.log(xa),i.isTruthy(U)||(U=f.Application.DEFAULT_MATERIAL_COLOR)},create:function(){d.drawWardrobe(),a.fadeInGroup(d.redrawnObjects)},update:function(){var a=0,b=0,c=0,d=0,h={},k=[],n=[],o={},p=[],q=[];if(ua&&(a=e.input.mousePointer.x,b=e.input.mousePointer.y,i.isTruthy(O)&&(O.x=a,O.y=b,e.input.mousePointer.isDown?(P=j.slotContainsPt(wa,{x:a,y:b}),P.row!==-1&&P.col!==-1?(Q=l.highlightShoesFields(xa.constrData.shelveSlotMatrix,P,wa),sa=Q.beginIndex,ra=Q.endIndex,va=Q.drawPart):this.resetState()):e.input.mousePointer.isUp&&(this.resetState(),O.destroy(),O=null)),i.isTruthy(N)&&(N.x=a,N.y=b,e.input.mousePointer.isDown?(P=j.slotContainsPt(wa,{x:a,y:b}),P.row!==-1&&P.col!==-1?(Q=l.highlightTieFields(xa.constrData.shelveSlotMatrix,P,wa),sa=Q.beginIndex,ra=Q.endIndex,va=Q.drawPart):this.resetState()):e.input.mousePointer.isUp&&(va&&i.isTruthy(Q)&&j.drawTie(xa,u,P,sa,ra,wa,g.Colors.BLUE,"tie"),this.resetState(),N.destroy(),N=null)),i.isTruthy(M)&&(M.x=a,M.y=b,e.input.mousePointer.isDown?(P=j.slotContainsPt(wa,{x:a,y:b}),P.row!==-1&&P.col!==-1?(Q=l.searchRangeForDrawer(xa.constrData.shelveSlotMatrix,P.row,P.col),sa=Q.col,ra=Q.numCols,va=l.searchEmptySpaceForDrawer(xa.constrData.shelveSlotMatrix,Q.row,Q.col,Q.numCols),l.highlightDrawerSlots(wa,va,sa,ra,Q.row,Q.col)):this.resetState()):e.input.mousePointer.isUp&&(va&&i.isTruthy(Q)&&(l.addDrawer(xa.constrData.shelveSlotMatrix,P.row,sa,ra),j.drawDrawer(xa,u,P,sa,sa+ra,wa,g.Colors.DARK_GRAY,"drawer")),this.resetState(),M.destroy(),M=null)),i.isTruthy(L)&&(L.x=a,L.y=b,e.input.mousePointer.isDown?(P=j.slotContainsPt(wa,{x:a,y:b}),P.row!==-1&&P.col!==-1?(Q=l.searchRangeForVertBaffle(xa.constrData.shelveSlotMatrix,P.row,P.col),sa=Q.row,ra=Q.numRows,va=l.searchEmptySpaceForVertBeam(xa.constrData.shelveSlotMatrix,Q.row,Q.col,Q.numRows),l.highlightVertBaffleSlots(wa,va,sa,ra,Q.row,Q.col)):this.resetState()):e.input.mousePointer.isUp&&(va&&i.isTruthy(Q)&&(l.addVertBeam(xa.constrData.shelveSlotMatrix,sa,P.col,ra),j.drawVerticalBeam(xa,u,P,sa,sa+ra,wa,g.Colors.DARK_GRAY,"innerVertBeam")),this.resetState(),L.destroy(),L=null)),i.isTruthy(J)&&(J.x=a-10,J.y=i.decimalRound(b-J.height/2,f.DECIMAL_ROUND_EXP),e.input.mousePointer.isDown?(P=j.slotContainsPt(wa,{x:a,y:b}),P.row!==-1&&P.col!==-1?(Q=l.searchRangeForVertBaffle(xa.constrData.shelveSlotMatrix,P.row,P.col),sa=Q.row,ra=Q.numRows,va=l.searchEmptySpaceForVertBaffle(xa.constrData.shelveSlotMatrix,Q.row,Q.col,Q.numRows),l.highlightVertBaffleSlots(wa,va,sa,ra,Q.row,Q.col)):this.resetState()):e.input.mousePointer.isUp&&(va&&i.isTruthy(Q)&&(l.addVertBaffle(xa.constrData.shelveSlotMatrix,sa,P.col,ra),j.drawVerticalBeam(xa,u,P,sa,sa+ra,wa,i.getHexColor(U),"innerVertShelve")),this.resetState(),J.destroy(),J=null)),i.isTruthy(K)&&(K.x=a-i.decimalRound(K.width/2,f.DECIMAL_ROUND_EXP),K.y=i.decimalRound(b-K.height/2,f.DECIMAL_ROUND_EXP),e.input.mousePointer.isDown?(P=j.slotContainsPt(wa,{x:a,y:b}),P.row!==-1&&P.col!==-1?(Q=l.searchRangeForHorzBaffle(xa.constrData.shelveSlotMatrix,P.row,P.col),sa=Q.col,ra=Q.numCols,va=l.searchEmptySpaceForHorzBeam(xa.constrData.shelveSlotMatrix,Q.row,Q.col,Q.numCols),l.highlightHorzBaffleSlots(wa,va,sa,ra,Q.row,Q.col)):this.resetState()):e.input.mousePointer.isUp&&(va&&i.isTruthy(Q)&&(l.addHorzBeam(xa.constrData.shelveSlotMatrix,Q.row,Q.col,Q.numCols),j.drawHorizontalBeam(xa,u,P,sa,sa+ra,wa,g.Colors.DARK_GRAY,"innerHorzBeam")),this.resetState(),K.destroy(),K=null)),i.isTruthy(I)))if(I.x=a,I.y=b,qa=i.decimalRound(b-2*ca-m.y,f.DECIMAL_ROUND_EXP),h=xa.constrData.leftShelveWall.shelvesData,k=h.shelves,n=s.getChildAt(1).children,o=xa.constrData.rightShelveWall.shelvesData,p=o.shelves,q=t.getChildAt(1).children,e.input.mousePointer.isDown){if(P=j.slotContainsPt(wa,{x:a,y:b}),P.row!==-1&&P.col!==-1?(Q=l.searchRangeForHorzBaffle(xa.constrData.shelveSlotMatrix,P.row,P.col),sa=Q.col,ra=Q.numCols,va=l.searchEmptySpaceForHorzBaffle(xa.constrData.shelveSlotMatrix,Q.row,Q.col,Q.numCols),l.highlightHorzBaffleSlots(wa,va,sa,ra,Q.row,Q.col)):this.resetState(),xa.constrData.leftWall.enabled&&xa.constrData.leftShelveWall.enabled)for(c=0;c<n.length;c+=1)j.geoObjContainsPt(n[c],a,b)?(n[c].alpha=.5,k[c].busy?n[c].tint=g.Colors.RED:n[c].tint=g.Colors.GREEN):n[c].alpha=0;if(xa.constrData.rightWall.enabled&&xa.constrData.rightShelveWall.enabled)for(c=0;c<q.length;c+=1)j.geoObjContainsPt(q[c],a,b)?(q[c].alpha=.5,p[c].busy?q[c].tint=g.Colors.RED:q[c].tint=g.Colors.GREEN):q[c].alpha=0}else if(e.input.mousePointer.isUp){if(va&&i.isTruthy(Q)&&(l.addHorzBaffle(xa.constrData.shelveSlotMatrix,Q.row,Q.col,Q.numCols),j.drawHorizontalBeam(xa,u,P,sa,sa+ra,wa,i.getHexColor(U),"innerHorzShelve")),xa.constrData.leftWall.enabled&&xa.constrData.leftShelveWall.enabled)for(c=0;c<n.length;c+=1)if(j.geoObjContainsPt(n[c],a,b))for(d=0;d<k.length;d+=1)qa>k[d].shiftY&&qa<=k[d].shiftY+xa.shelveShiftFactor&&!k[d].busy&&(k[d].busy=!0,C=j.makeNewGraphicsObject(C,0,0,"leftShelveMarkers",v),s=j.makeNewGraphicsObject(s,ba,ca,"leftShelve",m),j.drawShelveWallAndShadow(xa.constrData.leftShelveWall,s,C),j.drawAllShelves(h,s,C,!0),j.drawMarkers(!0,C));if(xa.constrData.rightWall.enabled&&xa.constrData.rightShelveWall.enabled)for(c=0;c<q.length;c+=1)if(j.geoObjContainsPt(q[c],a,b))for(d=0;d<p.length;d+=1)qa>p[d].shiftY&&qa<=p[d].shiftY+xa.shelveShiftFactor&&!p[d].busy&&(p[d].busy=!0,B=j.makeNewGraphicsObject(B,0,0,"rightShelveMarkers",v),t=j.makeNewGraphicsObject(t,ba,ca,"rightShelve",m),j.drawShelveWallAndShadow(xa.constrData.rightShelveWall,t,B),j.drawAllShelves(o,t,B,!1),j.drawMarkers(!1,B));this.resetState(),I.destroy(),I=null}},shutdown:function(){d.screenObjects=null,e=null},getShelveShiftY:function(){return qa},getInnerSlotTwoDimArray:function(){return wa},setHorzBaffleObject:function(a){I=a,V=h.HORZ_BAFFLE_KEY},setVertBaffleObject:function(a){J=a,V=h.VERT_BAFFLE_KEY},setHorzBeamObject:function(a){K=a,V=h.HORZ_BEAM_KEY},setVertBeamObject:function(a){L=a,V=h.VERT_BEAM_KEY},setDrawerObject:function(a){M=a,V=h.DRAWER_KEY},setTieObject:function(a){N=a,V=h.TIE_KEY},setShoesObject:function(a){O=a,V=h.SHOES_KEY},resetState:function(){sa=-1,ra=-1,va=!0,Q=null,V=""},drawWardrobe:function(){return ua=!1,xa=k.processData(xa,U,xa.millsPerPixel),xa.currentMaterialColor=i.getColor(h.MATERIAL_COLOR_KEY,U),W=xa.currentMaterialColor,xa.currentDarkerMatColor=i.getColor(h.DARKER_COLOR_KEY,U),X=xa.currentDarkerMatColor,xa.currentEdgeColor=i.getColor(h.EDGE_COLOR_KEY,U),Y=xa.currentEdgeColor,ba=xa.frameX,ca=xa.frameY,Z=xa.thickness,$=xa.thicknessPx,_=xa.fullWidth,aa=xa.fullWidthPx,da=xa.cupboardWidth,ea=xa.cupboardWidthPx,fa=xa.cupboardHeight,ga=xa.cupboardHeightPx,ha=xa.cupboardDepth,ia=xa.cupboardDepthPx,ja=xa.leftShelveWidth,ka=xa.leftShelveWidthPx,la=xa.rightShelveWidth,ma=xa.rightShelveWidthPx,na=xa.maxNumOfShelves,oa=xa.maxNumOfInnerShelves,pa=xa.maxNumOfBeams,m=j.makeNewGraphicsObject(m,0,0,"constructor",e.world),m.inputEnabled=!0,m.input.enableDrag(),v=j.makeNewGraphicsObject(v,0,0,"markersGraphics",m),w=j.makeNewGraphicsObject(w,0,0,"ceilingWallMarkers",v),x=j.makeNewGraphicsObject(x,0,0,"floorWallMarkers",v),y=j.makeNewGraphicsObject(y,0,0,"rearWallMarkers",v),z=j.makeNewGraphicsObject(z,0,0,"leftWallMarkers",v),A=j.makeNewGraphicsObject(A,0,0,"rightWallMarkers",v),C=j.makeNewGraphicsObject(C,0,0,"leftShelveMarkers",v),B=j.makeNewGraphicsObject(B,0,0,"rightShelveMarkers",v),p=j.makeNewGraphicsObject(p,ba,ca,"rearWall",m),q=j.makeNewGraphicsObject(q,ba,ca,"leftWall",m),r=j.makeNewGraphicsObject(r,ba,ca,"rightWall",m),n=j.makeNewGraphicsObject(n,ba,ca,"ceilingWall",m),o=j.makeNewGraphicsObject(o,ba,ca,"floorWall",m),s=j.makeNewGraphicsObject(s,ba,ca,"leftShelve",m),t=j.makeNewGraphicsObject(t,ba,ca,"rightShelve",m),u=j.makeNewGraphicsObject(u,ba,ca,"shelveSlotMatrix",m),F=j.makeNewGraphicsObject(F,700,10,"colorPicker",e.world),R=j.drawColorPicker(F,0,0,U,g.Colors.Material,ta,d.changeWardrobeColor),G=j.makeNewGraphicsObject(G,10,10,"toolBox",e.world),H=j.drawFrnPartsToolBox(xa,G,0,0,350,70,G,U,$),E=j.makeNewGraphicsObject(E,0,0,"window",e.world),""!==a.getValidationMsg()&&j.drawMessageWindow(g.VALIDATION_WINDOW_TITLE,a.getValidationMsg(),E,0,0,g.DEFAULT_VALIDATION_WINDOW_WIDTH,325,10,1,g.Colors.DEFAULT_EDGE_COLOR,1,g.Colors.WHITE,1,g.Colors.DARK_GRAY,1),D=j.makeNewGraphicsObject(D,0,0,"other",e.world),j.drawRect(D,0,0,e.world.width,e.world.height,0,g.Colors.DEFAULT_EDGE_COLOR,0,g.Colors.BACKGROUND_COLOR,1,"background"),D.inputEnabled=!0,D.events.onInputUp.add(function(){ta&&(S.destroy(),ta=!1),i.isTruthy(T)&&(T.text="")},D),T=j.drawText(D,20,e.world.height-20,"",i.getTextStyle10Red(),"messageLabel"),xa.constrData.rearWall.enabled&&j.drawRearWall(xa.constrData.rearWall,p),xa.constrData.leftWall.enabled&&(j.drawLeftOrRightWall(xa.constrData.leftWall,q,z),xa.constrData.leftShelveWall.enabled&&(j.drawShelveWallAndShadow(xa.constrData.leftShelveWall,s,C),j.drawAllShelves(xa.constrData.leftShelveWall.shelvesData,s,C,!0),j.drawMarkers(!0,C))),xa.constrData.rightWall.enabled&&(j.drawLeftOrRightWall(xa.constrData.rightWall,r,z),xa.constrData.rightShelveWall.enabled&&(j.drawShelveWallAndShadow(xa.constrData.rightShelveWall,t,B),j.drawAllShelves(xa.constrData.rightShelveWall.shelvesData,t,B,!1),j.drawMarkers(!1,B))),j.drawTopBottomMarker(w,xa.artmTree.frameX.value+xa.artmTree.frameX.sumLeftShelveWidthPx.value,2*xa.artmTree.frameY.value-g.DEFAULT_TOP_MARKERS_Y_SHIFT,xa.artmTree.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.value-xa.artmTree.frameX.sumLeftShelveWidthPx.value,g.DEFAULT_TOP_MARKERS_HEIGHT,g.DEFAULT_TOP_MARKERS_PERCENT,!0,da.toString(),i.getTextStyle10(),g.Colors.DEFAULT_EDGE_COLOR),j.drawTopBottomMarker(x,xa.artmTree.frameX.value+xa.artmTree.frameX.sumLeftShelveWidthPx.value,xa.artmTree.frameY.value-g.DEFAULT_TOP_MARKERS_Y_SHIFT+xa.artmTree.frameY.sumFrameHeight.value,xa.artmTree.frameX.sumLeftShelveWidthPx.sumCupboardWidthPx.sumThicknessPx.value-xa.artmTree.frameX.sumLeftShelveWidthPx.value,g.DEFAULT_TOP_MARKERS_HEIGHT,g.DEFAULT_TOP_MARKERS_PERCENT,!1,da.toString(),i.getTextStyle10Red(),g.Colors.RED),j.drawTopBottomMarker(w,xa.artmTree.frameX.value+xa.artmTree.frameX.sumLeftShelveWidthPx.sumThicknessPx.value,2*xa.artmTree.frameY.value-45,ia/2+$,65,g.DEFAULT_TOP_MARKERS_PERCENT,!0,ha.toString(),i.getTextStyle10(),g.Colors.DEFAULT_EDGE_COLOR),j.drawLeftRightMarker(A,xa.artmTree.frameX.sumFullWidthPx.value+5,xa.artmTree.frameY.doubleFrameY.value,ma+70,ga,g.DEFAULT_TOP_MARKERS_PERCENT,!1,fa.toString(),i.getTextStyle10Red(),g.Colors.RED),xa.constrData.ceiling.enabled&&j.drawCeilOrFloorWall(xa.constrData.ceiling,n),xa.constrData.floor.enabled&&j.drawCeilOrFloorWall(xa.constrData.floor,o),wa=j.drawShelveMatrix(xa,u),d.screenObjects.add(D),d.redrawnObjects.add(m),d.topObjects.add(F),d.topObjects.add(E),m.setChildIndex(u,m.children.length-1),i.printGrObjectsCount({world:e.world,constrGr:m,markersGr:v,leftWallGr:q,rightWallGr:r,ceilWallGr:n,floorWallGr:o,rearWallGr:p,leftShelveGr:s,rightShelveGr:t,otherGr:D,windowGr:E,colorPickerGr:F}),console.log(xa),ua=!0,xa},changeWardrobeColor:function(){var a=this.rectColor;U=a,d.drawWardrobe()}}}(window.FrnConstr,Phaser,$)),window.FrnConstr.namespace("ExteriorScreen",window.FrnConstr.Screen,function(a,b,c){"use strict";var d=null,e=null,f=null,g=null,h=a.Const.Graphics,i=a.GraphicsUtility,j=null,k=null,l=!1,m=h.Colors.Material.MAT_DARK_BLUE;return{init:function(){d=this,e=a.gameObject,d.screenObjects=e.add.group()},create:function(){j=e.add.graphics(0,0),g=i.drawRect(j,0,0,e.world.width,e.world.height,0,h.Colors.BLACK,0,h.Colors.BACKGROUND_COLOR,1,"background"),j.addChild(g),f=i.drawText(j,100,100,"Exterior Scene",utils.getTextStyle12(),"sceneTitle"),j.addChild(f),d.screenObjects.add(j),k=i.drawColorPicker(j,200,200,m,h.Colors.Material,l,d.changeColor),a.fadeInGroup(d.screenObjects)},shutdown:function(){d.screenObjects=null,e=null},changeColor:function(){var a=this.rectColor;m=a,null===k&&void 0===k||k.destroy(),k=i.drawColorPicker(j,200,200,a,h.Colors.Material,l,d.changeColor)}}}(window.FrnConstr,Phaser,$)),window.FrnConstr.namespace("SendApplicationScreen",window.FrnConstr.Screen,function(a){"use strict";var b=null,c=null,d=null;return{init:function(){b=this,c=a.gameObject,b.screenObjects=c.add.group()},create:function(){d=c.add.text(100,100,"Send Application Scene"),b.screenObjects.add(d),a.fadeInGroup(b.screenObjects)},shutdown:function(){b.screenObjects=null,c=null}}}(window.FrnConstr)),window.FrnConstr.namespace("InitFrnConstrForm",{},function(a,b,c){"use strict";var d=a.Const,e=d.Application;return{resetForm:function(){var a=e.FrnData;b("#floorChkBox").prop("checked",a.checkBoxes.DEFAULT_FLOOR_IS_DRAWN),b("#ceilingChkBox").prop("checked",a.checkBoxes.DEFAULT_CEILING_IS_DRAWN),b("#leftShelveChkBox").prop("checked",a.checkBoxes.DEFAULT_LEFT_SHELVE_IS_DRAWN),b("#rightShelveChkBox").prop("checked",a.checkBoxes.DEFAULT_RIGHT_SHELVE_IS_DRAWN),b("#rearChkBox").prop("checked",a.checkBoxes.DEFAULT_REAR_WALL_IS_DRAWN),b("#standLeftChkBox").prop("checked",a.checkBoxes.DEFAULT_STAND_LEFT_IS_DRAWN),b("#standRightChkBox").prop("checked",a.checkBoxes.DEFAULT_STAND_RIGHT_IS_DRAWN),b("#standChkBox").prop("checked",a.checkBoxes.DEFAULT_STAND_IS_DRAWN),b("#millsPerPixel").val(a.millsPerPixel.DEFAULT_VAL),b("#millsPerPixelForDepth").val(a.millsPerPixelForDepth.DEFAULT_VAL),b("#cupboardWidth").val(a.cupboardWidth.DEFAULT_VAL),b("#cupboardHeight").val(a.cupboardHeight.DEFAULT_VAL),b("#cupboardDepth").val(a.cupboardDepth.DEFAULT_VAL),b("#leftShelveWidth").val(a.leftShelveWidth.DEFAULT_VAL),b("#rightShelveWidth").val(a.rightShelveWidth.DEFAULT_VAL),b("#thickness").val(a.thickness.DEFAULT_VAL)},initForm:function(){b("#enteriorButton").click(function(){a.gameObject.state.start(a.EnteriorScreen.KEY)}),b("#exteriorButton").click(function(){a.gameObject.state.start(a.ExteriorScreen.KEY);
}),b("#sendButton").click(function(){a.gameObject.state.start(a.SendApplicationScreen.KEY)}),b("#generateButton").click(a.generateWardrobe),b("#saveProgressButton").click(function(){a.saveStorageData(a.getFrnConstrDataObject())}),b("#deleteProgressButton").click(function(){a.clearStorageData()}),b("#standLeftChkBox").change(function(){b("#leftShelveChkBox").click()}),b("#resetConstrFormButton").click(this.resetForm)}}}(window.FrnConstr,$,Phaser));