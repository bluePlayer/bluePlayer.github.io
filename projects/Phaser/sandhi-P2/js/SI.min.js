window.SI=window.SI||function(a,b){"use strict";var c=a,d=null,e=null,f=null,g=0,h=0,i=!1,j=0,k=0,l={diff1:0,diff2:0,diff3:0,diff4:0,diff6:0,diff8:0,diff10:0},m=[],n=0,o=[],p=[],q=!1,r=!0,s=!1,t="gameContainer",u="loadingLabel.png",v=null,w=null;return{Exceptions:{},Const:{Graphics:{},GameMessages:{},GameErrors:{}},Events:{},siPreloader:null,createSiPreloader:function(){var a={ready:!1,loadingTween:null,loadingLabel:null,loadingObjects:null,preloaderBottom:null,preloaderTop:null},b=e.Const.Graphics;return a.loadingObjects=f.add.group(),a.loadingLabel=f.add.sprite(b.LOADING_LABEL_X_POS,b.LOADING_LABEL_Y_POS,e.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,u),a.loadingObjects.add(a.loadingLabel),a.preloaderBottom=f.add.graphics(b.LOADING_BAR_X_POS,b.LOADING_BAR_Y_POS),a.preloaderBottom.beginFill(b.MATTERHORN_COLOR,b.ALPHA_100_PERCENT),a.preloaderBottom.drawRect(b.PRELOADER_BOTTOM_START_XY,b.PRELOADER_BOTTOM_START_XY,b.PRELOADER_BOTTOM_WIDTH,b.PRELOADER_BOTTOM_HEIGHT),a.loadingObjects.add(a.preloaderBottom),a.preloaderTop=f.add.graphics(b.LOADING_BAR_X_POS,b.LOADING_BAR_Y_POS),a.preloaderTop.beginFill(b.DARK_GRAY_COLOR,b.ALPHA_100_PERCENT),a.preloaderTop.drawRect(b.PRELOADER_TOP_START_XY,b.PRELOADER_TOP_START_XY,b.PRELOADER_TOP_WIDTH,b.PRELOADER_TOP_HEIGHT),a.loadingObjects.add(a.preloaderTop),a},SoundAssetKeys:{},ImageAssetKeys:{},Settings:{},isGamePaused:function(){return i},pauseGame:function(){i=!0},resumeGame:function(){i=!1},getFirstVisit:function(){return r},setDirty:function(){r=!1},setNotDirty:function(){r=!0},gameObject:null,debugMode:function(){return s},enableDebugMode:function(){s=!0},disableDebugMode:function(){s=!1},isMuted:function(){return q},muteGame:function(){q=!0},unmuteGame:function(){q=!1},getScore:function(){return g},getMaxGameScore:function(){return j},clearDifficutliesCount:function(){l={diff1:0,diff2:0,diff3:0,diff4:0,diff6:0,diff8:0,diff10:0},j=0},updateMaxGameScore:function(){var a=0,b=null,c=0;for(b in l)l.hasOwnProperty(b)&&(a=e.Utility.parseInt(b.substring(4))*e.Utility.parseInt(l[b]),c+=a);return j=c},updateScore:function(){var a=0,b=0;for(a=0;a<o.length;a+=1)b+=o[a];return g=b},getGameErrors:function(){return k},incrGameErrors:function(){k+=1},getCurrentWaveIndex:function(){return n},setCurrentWaveIndex:function(a){return n=0>a?0:a>e.Const.WAVES_COUNT-1?e.Const.WAVES_COUNT-1:a},incrCurrentWaveIndex:function(){return n<e.Const.WAVES_COUNT-1&&(n+=1),n},decrCurrentWaveIndex:function(){return n>0&&(n-=1),n},generateScoreText:function(){return"Score: "+e.updateScore()+"/"+e.getMaxGameScore()},generateErrorsText:function(){return"Errors: "+e.updateErrors()},generateWaveText:function(a){return"Wave: "+(n+1)+", rules: "+a+"/"+e.Utility.getCurrentWaveLength(n)},getWaveErrorsArray:function(){return p.slice()},setWaveErrors:function(a,b){var c=e.Const.WAVES_COUNT;0>a?(p[0]=b,r=!1):a>=c?(p[c-1]=b,r=!1):(p[a]=b,r=!1)},updateErrors:function(){var a=0,b=0;for(a=0;a<p.length;a+=1)b+=p[a];return k=b},clearWaveErrorsArray:function(){var a=0;for(p=[],a=0;a<e.Const.WAVES_COUNT;a+=1)p.push(0);k=0},setWavePoints:function(a,b){var c=e.Const.WAVES_COUNT;0>a?(o[0]=b,r=!1):a>=c?(o[c-1]=b,r=!1):(o[a]=b,r=!1)},getWavePointsArray:function(){return o.slice()},clearWavePointsArray:function(){var a=0;for(o=[],a=0;a<e.Const.WAVES_COUNT;a+=1)o.push(0);g=0},getGameSpeed:function(){return h},setGameSpeed:function(a){h=a},clearDiffsPerWave:function(){var a=0;for(m=[],a=0;a<e.Const.WAVES_COUNT;a+=1)m.push(0)},getGameDiffsPerWave:function(){return m},setSandhiInvadersData:function(a){w=a},resetSandhiInvadersData:function(){var a=f.cache.getJSON(e.Settings.SANDHI_INVADERS_DATA_JSON);return w=e.processAlphabetData(a)},getSandhiInvadersData:function(){return w},getIASTAlphabet:function(){return v},getDifficultiesCount:function(){return l},updateDifficultiesCount:function(a){switch(e.Utility.parseInt(a)){case 1:l.diff1+=1;break;case 2:l.diff2+=1;break;case 3:l.diff3+=1;break;case 4:l.diff4+=1;break;case 6:l.diff6+=1;break;case 8:l.diff8+=1;break;case 10:l.diff10+=1}},processAlphabetData:function(a){var b,d,f,g,h,i,j=[],k=[],n=0,o=-1;if(e.clearWavePointsArray(),e.clearDiffsPerWave(),null===a||void 0===a)w={};else{for(d=1;d<a.length;d+=1)b=a[d][e.Const.ID],f=a[d][e.Const.LEFT_LETTER],g=a[d][e.Const.RIGHT_LETTER],h=a[d][e.Const.COMBINED_LETTER],i=a[d][e.Const.DIFFICULTY],e.updateDifficultiesCount(i),k.push({ID:b,LEFT_LETTER:f,RIGHT_LETTER:g,COMBINED_LETTER:h,DIFFICULTY:i,played:!1,userAnswerIsCorrect:!1});for(e.updateMaxGameScore(),c.localStorage.setItem(e.Const.GAME_DIFFS_WS_KEY,JSON.stringify(l));n<e.Const.MAX_NUM_OF_RULES;)n%e.Const.DEFAULT_WAVE_LENGTH_40===0&&e.Const.MAX_NUM_OF_RULES-n>=e.Const.DEFAULT_WAVE_LENGTH_40&&(o+=1,j[o]=[]),j[o].push(k[n]),m[o]+=e.Utility.parseInt(k[n].DIFFICULTY),n+=1;c.localStorage.setItem(e.Const.GAME_DIFFS_PER_WAVE_WS_KEY,JSON.stringify(m))}return j},addConstant:function(a,b,c){void 0!==c&&null!==c||(c=b),null!==a&&void 0!==a||(a={}),Object.defineProperty(a,b,{configurable:!1,enumerable:!0,value:c,writable:!1})},loadAtlasJSONHash:function(a,b,c,d){return e.addConstant(e.ImageAssetKeys,a,b),f.load.atlasJSONHash(e.ImageAssetKeys[a],c,d)},loadSpriteSheet:function(a,b,c,d,g,h){return e.addConstant(e.ImageAssetKeys,a,b),f.load.spritesheet(e.ImageAssetKeys[a],c,d,g,h)},loadImage:function(a,b,c){return e.addConstant(e.ImageAssetKeys,a,b),f.load.image(e.ImageAssetKeys[a],c)},loadAudio:function(a,b,c){return e.addConstant(e.SoundAssetKeys,a,b),f.load.audio(e.SoundAssetKeys[a],c,!0)},loadJSON:function(a,b,c){return e.addConstant(e.Settings,a,b),f.load.json(e.Settings[a],c,!0)},namespace:function(a,b,c){var d=a.split("."),e=Object.create(b),f=this,g=0,h={};for(null!==b&&void 0!==b||(b={}),d[0]===f.Const.GAME_NAME&&(d=d.slice(1)),g=0;g<d.length;g+=1){if(void 0===f[d[g]]){for(h in c)c.hasOwnProperty(h)&&(e[h]=c[h]);f[d[g]]=e}f=f[d[g]]}return f},resetGame:function(){c.localStorage.clear(),e.setNotDirty(),e.clearDifficutliesCount(),e.clearWavePointsArray(),e.clearDiffsPerWave(),e.clearWaveErrorsArray(),n=0,e.resetSandhiInvadersData(),h=e.Const.SPEED_BEGINNER,e.saveGame()},saveGame:function(){c.localStorage.setItem(e.Const.FIRST_VISIT_WS_KEY,r),c.localStorage.setItem(e.Const.IAST_ALPHABET_WS_KEY,JSON.stringify(v)),c.localStorage.setItem(e.Const.GAME_SPEED_WS_KEY,h),c.localStorage.setItem(e.Const.WAVE_POINTS_ARRAY_WS_KEY,JSON.stringify(o)),c.localStorage.setItem(e.Const.SANDHI_INVADERS_DATA_WS_KEY,JSON.stringify(w)),c.localStorage.setItem(e.Const.GAME_DIFFS_WS_KEY,JSON.stringify(l)),c.localStorage.setItem(e.Const.GAME_DIFFS_PER_WAVE_WS_KEY,JSON.stringify(m)),c.localStorage.setItem(e.Const.WAVE_ERRORS_ARRAY_WS_KEY,JSON.stringify(p)),c.localStorage.setItem(e.Const.CURRENT_WAVE_INDEX,n),c.localStorage.setItem(e.Const.MUTED_WS_KEY,e.Utility.boolToInt(q))},loadWebStorageData:function(){var a=null,b=null,d=null,f=null,g=null,i=null;b=c.localStorage.getItem(e.Const.FIRST_VISIT_WS_KEY),null===b?c.localStorage.setItem(e.Const.FIRST_VISIT_WS_KEY,r):(r=!1,c.localStorage.setItem(e.Const.FIRST_VISIT_WS_KEY,r)),f=c.localStorage.getItem(e.Const.WAVE_POINTS_ARRAY_WS_KEY),null===f?(e.clearWavePointsArray(),c.localStorage.setItem(e.Const.WAVE_POINTS_ARRAY_WS_KEY,JSON.stringify(o))):(o=JSON.parse(f),e.updateScore()),a=c.localStorage.getItem(e.Const.WAVE_ERRORS_ARRAY_WS_KEY),null===a?(e.clearWaveErrorsArray(),c.localStorage.setItem(e.Const.WAVE_ERRORS_ARRAY_WS_KEY,JSON.stringify(p))):(p=JSON.parse(a),e.updateErrors()),d=c.localStorage.getItem(e.Const.GAME_SPEED_WS_KEY),null===d?(h=e.Const.SPEED_BEGINNER,c.localStorage.setItem(e.Const.GAME_SPEED_WS_KEY,h)):h=e.Utility.parseInt(d),g=c.localStorage.getItem(e.Const.CURRENT_WAVE_INDEX),null===g?(n=0,c.localStorage.setItem(e.Const.CURRENT_WAVE_INDEX,n)):n=e.Utility.parseInt(g),i=c.localStorage.getItem(e.Const.MUTED_WS_KEY),null===i?(q=!1,c.localStorage.setItem(e.Const.MUTED_WS_KEY,e.Utility.boolToInt(q))):q=e.Utility.intToBool(e.Utility.parseInt(i))},loadGameCacheData:function(){var a=null,b=null,d=null,g=null,h=null;a=c.localStorage.getItem(e.Const.SANDHI_INVADERS_DATA_WS_KEY),null===a?(w=e.resetSandhiInvadersData(),c.localStorage.setItem(e.Const.SANDHI_INVADERS_DATA_WS_KEY,JSON.stringify(w))):w=JSON.parse(a),b=c.localStorage.getItem(e.Const.IAST_ALPHABET_WS_KEY),null===b?(h=f.cache.getJSON(e.Settings.IAST_ALPHABET_JSON),v=h,c.localStorage.setItem(e.Const.IAST_ALPHABET_WS_KEY,JSON.stringify(v))):v=JSON.parse(b),d=c.localStorage.getItem(e.Const.GAME_DIFFS_WS_KEY),null===d?c.localStorage.setItem(e.Const.GAME_DIFFS_WS_KEY,l):l=JSON.parse(d),g=c.localStorage.getItem(e.Const.GAME_DIFFS_PER_WAVE_WS_KEY),null===g?c.localStorage.setItem(e.Const.GAME_DIFFS_PER_WAVE_WS_KEY,m):m=JSON.parse(g),e.updateMaxGameScore()},addNewGameState:function(a,b){e.addConstant(a,"KEY",b),f.state.add(a.KEY,a)},init:function(a){d=a,e=this,e.Constants.init(d),e.GameMessages.init(d),e.GameErrors.init(d),e.loadWebStorageData(),f=new b.Game(e.Const.STAGE_WIDTH,e.Const.STAGE_HEIGHT,b.AUTO,t),e.gameObject=f,e.addNewGameState(e.Boot,"BOOT"),e.addNewGameState(e.Preloader,"PRELOADER"),e.addNewGameState(e.HelpScreen,"HELP_SCREEN"),e.addNewGameState(e.GameScreen,"GAME_SCREEN"),e.addNewGameState(e.GameOverScreen,"GAME_OVER_SCREEN"),f.state.start(e.Boot.KEY)}}}(window,Phaser),window.document.addEventListener("DOMContentLoaded",function(a){"use strict";var b=window.SI,c={event:a};b.init(c)}),window.SI.namespace("Constants",{},function(a){"use strict";return{init:function(b){var c=a.Const;a.addConstant(c,"GAME_NAME","Sandhi Invaders"),a.addConstant(c,"VERSION","1.0.0"),a.addConstant(c,"STAGE_WIDTH",480),a.addConstant(c,"STAGE_HEIGHT",720),a.addConstant(c,"LOWER_HEIGHT",260),a.addConstant(c,"TWEEN_LINEAR","Linear"),a.addConstant(c,"FADE_DURATION",500),a.addConstant(c,"MOVE_DURATION",1e3),a.addConstant(c,"BLOG_LINK","http://spinnerbox.blogspot.com"),a.addConstant(c,"BLOG_NAME","Spinnerbox"),a.addConstant(c,"GAME_LINK","http://sandhi-practices.rhcloud.com/"),a.addConstant(c,"GAME_LINK_NAME","Sandhi Invaders"),a.addConstant(c,"TWITTER_URL",null),a.addConstant(c,"FACEBOOK_URL",null),a.addConstant(c,"BLOG_URL",null),a.addConstant(c,"HIDE_COMBO_TEXT_TIMER_DELAY",3e3),a.addConstant(c,"WAVE_TEXT_TIMER_DELAY",5e3),a.addConstant(c,"LOOP_DELAY",100),a.addConstant(c,"LOADING_LABEL_IMG_KEY","loadingLabel.png"),a.addConstant(c,"WAVES_COUNT",14),a.addConstant(c,"LEFT_OVER_RULES",12),a.addConstant(c,"SPEED_BEGINNER",50),a.addConstant(c,"SPEED_INTERMEDIATE",90),a.addConstant(c,"SPEED_ADVANCED",130),a.addConstant(c,"DEFAULT_WAVE_LENGTH_40",40),a.addConstant(c,"LAST_WAVE_LENGTH_52",52),a.addConstant(c,"MAX_NUM_OF_POINTS",1950),a.addConstant(c,"MAX_NUM_OF_RULES",572),a.addConstant(c,"BOMB_SPEED",1e3),a.addConstant(c,"DEFAULT_LETTER_Y",-40),a.addConstant(c,"LEFT_LETTER_BOUNDARY",200),a.addConstant(c,"RIGHT_LETTER_BOUNDARY",300),a.addConstant(c,"VOLUME",.5),a.addConstant(c,"ID","FIELD1"),a.addConstant(c,"LEFT_LETTER","FIELD2"),a.addConstant(c,"RIGHT_LETTER","FIELD3"),a.addConstant(c,"COMBINED_LETTER","FIELD4"),a.addConstant(c,"DIFFICULTY","FIELD8"),a.addConstant(c,"GAME_DIFFS_WS_KEY","gameDiffs"),a.addConstant(c,"GAME_DIFFS_PER_WAVE_WS_KEY","gameDiffsPerWave"),a.addConstant(c,"IAST_ALPHABET_WS_KEY","IASTAlphabet"),a.addConstant(c,"SANDHI_INVADERS_DATA_WS_KEY","sandhiInvadersData"),a.addConstant(c,"WAVE_ERRORS_ARRAY_WS_KEY","waveErrorsArray"),a.addConstant(c,"WAVE_POINTS_ARRAY_WS_KEY","wavePointsArray"),a.addConstant(c,"FIRST_VISIT_WS_KEY","firstVisit"),a.addConstant(c,"CURRENT_WAVE_INDEX","currentWaveIndex"),a.addConstant(c,"GAME_SPEED_WS_KEY","gameSpeed"),a.addConstant(c,"MUTED_WS_KEY","muted"),a.addConstant(c.Graphics,"LOADING_BAR_X_POS",200),a.addConstant(c.Graphics,"LOADING_BAR_Y_POS",300),a.addConstant(c.Graphics,"LOADING_LABEL_X_POS",150),a.addConstant(c.Graphics,"LOADING_LABEL_Y_POS",250),a.addConstant(c.Graphics,"BACKGROUND_COLOR",12632256),a.addConstant(c.Graphics,"MATTERHORN_COLOR",5723991),a.addConstant(c.Graphics,"DARK_GRAY_COLOR",11053224),a.addConstant(c.Graphics,"ALPHA_100_PERCENT",1),a.addConstant(c.Graphics,"ALPHA_0_PERCENT",0),a.addConstant(c.Graphics,"PRELOADER_TOP_START_XY",2),a.addConstant(c.Graphics,"PRELOADER_TOP_WIDTH",0),a.addConstant(c.Graphics,"PRELOADER_TOP_HEIGHT",11),a.addConstant(c.Graphics,"PRELOADER_BOTTOM_START_XY",0),a.addConstant(c.Graphics,"PRELOADER_BOTTOM_WIDTH",104),a.addConstant(c.Graphics,"PRELOADER_BOTTOM_HEIGHT",15)}}}(window.SI)),window.SI.namespace("GameMessages",{},function(a){"use strict";return{init:function(b){var c=a.Const.GameMessages;a.addConstant(c,"CORRECT_ANSWER_MSG","Correct"),a.addConstant(c,"WRONG_ANSWER_MSG","Wrong letters, try again!"),a.addConstant(c,"FINISHED_LOADING_FILES_MSG","Finished loading files!"),a.addConstant(c,"FINISHED_PACKING_FILES_MSG","Finished packing files!"),a.addConstant(c,"REPORT_A_BUG_MSG","Report a bug at spinnerbox2000 [a] gmail [dot] com"),a.addConstant(c,"MADE_BY_MSG","Made with Phaser 2.2.2 by VladTheTerran aka Spinnerbox. Copyright "+String.fromCharCode(169)+" May, 2016. Thanks for playing!")}}}(window.SI)),window.SI.namespace("GameErrors",{},function(a){"use strict";return{init:function(){var b=a.Const.GameErrors;a.addConstant(b,"DIFFS_COUNT_OBJECT_IS_NULL_OR_UNDEFINED","Difficutlies count object is null or undefined!"),a.addConstant(b,"WAVE_POINTS_ARRAY_IS_NULL_OR_UNDEFINED","Wave points array is null or undefined!"),a.addConstant(b,"WAVE_ERRORS_ARRAY_IS_NULL_OR_UNDEFINED","Wave errors array is null or undefined!"),a.addConstant(b,"SANDHI_DATA_IS_NULL_OR_UNDEFINED","SandhiInvadersData is null or undefined!")}}}(window.SI)),window.SI.namespace("Utility",{},function(a){"use strict";var b=(a.gameObject,{font:"20pt Arial",align:"center",fill:"White"}),c={font:"12pt Arial",align:"center",fill:"White"},d={font:"40pt Arial",align:"center",fill:"White"},e={font:"12pt Arial",align:"left",fill:"Red",fontWeight:"bold"},f={font:"90pt Arial",align:"center",fill:"White"},g={font:"70pt Arial",align:"center",fill:"Green"},h={font:"bold 20pt Arial",align:"center"},i={font:"bold 17pt Arial",align:"center"},j={font:"bold 12pt Arial",align:"center"};return{degToRad:function(a){return Math.PI*a/180},radToDeg:function(a){return 180*a/Math.PI},getIASTChar:function(b){var c=a.getIASTAlphabet(),d=null;for(d=0;d<c.length;d+=1)if(c[d].codeValue===b)return c[d];return null},roundTwoPlaces:function(a){return Math.round(100*a)/100},parseInt:function(a){return parseInt(a,10)},getCurrentWaveLength:function(b){return b===a.Const.WAVES_COUNT-1?a.Const.LAST_WAVE_LENGTH_52:a.Const.DEFAULT_WAVE_LENGTH_40},createSafeArray:function(a){return a.slice()},disableDisplayObject:function(a){a.inputEnabled=!1},enableDisplayObject:function(a){a.inputEnabled=!0},numOfElemInObject:function(a){return Object.keys(a).length},getTextStyle20White:function(){return b},getTextStyleLog:function(){return e},getTextStyleMadeBy:function(){return c},getTextStyleGameTitle:function(){return d},getTextStyleScreenTypingTextWhite:function(){return f},getTextStyleScreenTypingTextGreen:function(){return g},getTextStyle20:function(){return h},getTextStyle17:function(){return i},getTextStyle12:function(){return j},intToBool:function(a){return 1===a},boolToInt:function(a){return a?1:0},randomNumber:function(a,b){return Math.floor(Math.random()*(b-a+1))+a},fadeOutGroup:function(b){var c=null;return b.forEach(function(a){var b=this;c=b.gameObject.add.tween(a).to({alpha:0},b.Const.FADE_DURATION,b.Const.TWEEN_LINEAR,!0)},a),c},fadeInGroup:function(b){var c=null;return b.forEach(function(a){var b=this;a.alpha=0,c=b.gameObject.add.tween(a).to({alpha:1},b.Const.FADE_DURATION,b.Const.TWEEN_LINEAR,!0)},a),c}}}(window.SI)),window.SI.namespace("State",{},function(a){"use strict";a.gameObject;return{}}(window.SI)),window.SI.namespace("Boot",window.SI.State,function(a,b){"use strict";var c=null;return{init:function(){c=a.gameObject,c.input.maxPointers=1,c.stage.disableVisibilityChange=!0,c.device.desktop?c.scale.pageAlignHorizontally=!0:(c.scale.scaleMode=b.ScaleManager.SHOW_ALL,c.scale.setMinMax(a.Const.STAGE_HEIGHT,a.Const.LOWER_HEIGHT,a.Const.STAGE_WIDTH,a.Const.STAGE_HEIGHT),c.scale.forceLandscape=!0,c.scale.pageAlignHorizontally=!0)},preload:function(){c.stage.backgroundColor=a.Const.Graphics.BACKGROUND_COLOR,a.loadAtlasJSONHash("OTHER_GUI_ASSETS_ATLAS",null,"assets/images/UI/otherGuiAssetsSheet.png","assets/settings/otherGuiAssetsHash.json")},create:function(){c.state.start(a.Preloader.KEY),c.state.clearCurrentState()},shutdown:function(){c=null}}}(window.SI,Phaser)),window.SI.namespace("SIButton",{},function(a){"use strict";var b=null,c=null,d=null;return{SIButton:function(e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return null!==i&&void 0!==i&&"function"==typeof i&&(b=a.gameObject.add.button(e,f,g,i,h,p,q,r,s),c=null!==n&&void 0!==n&&"string"==typeof n&&a.SoundAssetKeys.hasOwnProperty(n)?a.gameObject.add.audio(a.SoundAssetKeys[n]):null,b.setOverSound(c),d=null!==o&&void 0!==o&&"string"==typeof o&&a.SoundAssetKeys.hasOwnProperty(o)?a.gameObject.add.audio(a.SoundAssetKeys[o]):a.gameObject.add.audio(a.SoundAssetKeys.CLICK_SOUND),b.setDownSound(d),null!==j&&void 0!==j&&"function"==typeof j&&b.onInputOver.add(j,h),null!==k&&void 0!==k&&"function"==typeof k&&b.onInputOut.add(k,h),null!==l&&void 0!==l&&"function"==typeof l&&b.onInputDown.add(l,h),null!==m&&void 0!==m&&"function"==typeof m&&b.onInputUp.add(m,h)),b}}}(window.SI)),window.SI.namespace("GoToScreen",window.SI.SIButton,function(a){"use strict";var b=(a.gameObject,null),c=null;return{Button:function(d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return c=this.CreateGoToScreenClickHandler(a,e,d,r,s),b=this.SIButton(f,g,h,i,c,j,k,l,m,null,null,n,o,p,q)},CreateGoToScreenClickHandler:function(a,b,c,d,e){var f=function(){var a=this;a.gameObject.state.start(c,!0,!1,d),a.gameObject.state.clearCurrentState()};return function(){void 0!==e&&null!==e&&"function"==typeof e&&(null!==d&&void 0!==d?e.apply(e,d):e()),Array.isArray(b)?b.forEach(function(b,c,d){a.Utility.fadeOutGroup(b).onComplete.add(f,a)}):a.Utility.fadeOutGroup(b).onComplete.add(f,a)}}}}(window.SI)),window.SI.namespace("GoToUrl",window.SI.SIButton,function(a){"use strict";var b=null,c=null;return{Button:function(a,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return c=this.CreateGoToUrlClickHandler(a,d,e),b=this.SIButton(f,g,h,i,c,j,k,l,m,null,null,n,o,p,q)},CreateGoToUrlClickHandler:function(b,c,d){return function(){switch(d){case"TWITTER_URL":a.open("https://twitter.com/share?url="+b,c,[]);break;case"FACEBOOK_URL":a.open("https://www.facebook.com/sharer/sharer.php?u="+b,c,[]);break;case"BLOG_URL":a.open(b,c,[]);break;case"GALLERY_LINK":a.open(b,c,[])}}}}}(window)),window.SI.namespace("Screen",window.SI.State,function(a,b){"use strict";var c=null,d=null;return{screenObjects:null,menuObjects:null,gameObjects:null,logTextField:null,initScreen:function(){c=this,d=a.gameObject},createLogTextField:function(){return c.logTextField=d.add.text(10,10,"",a.Utility.getTextStyleLog()),c.logTextField.alpha=.5,c.logTextField.wordWrapWidth=460,c.logTextField.wordWrap=!0,a.debugMode()?c.logTextField.visible=!0:c.logTextField.visible=!1,c.logTextField},clearScreenState:function(){this.screenObjects=null}}}(window.SI,Phaser)),window.SI.namespace("Preloader",window.SI.Screen,function(a){"use strict";var b=null,c=null;return{init:function(){c=this,b=a.gameObject,a.siPreloader=a.createSiPreloader(),c.initScreen(),c.createLogTextField()},preload:function(){a.loadAudio("CORRECT_SOUND",null,["assets/audio/correct.ogg","assets/audio/correct.mp3"]),a.loadAudio("ERROR_SOUND",null,["assets/audio/error.ogg","assets/audio/error.mp3"]),a.loadAudio("BLAST_SOUND",null,["assets/audio/blast.ogg","assets/audio/blast.mp3"]),a.loadAudio("EXPLODE_SOUND",null,["assets/audio/explode.ogg","assets/audio/explode.mp3"]),a.loadAudio("CLICK_SOUND",null,["assets/audio/buttonClick.ogg","assets/audio/buttonClick.mp3"]),a.loadAudio("WAVE_COMPLETE_SOUND",null,["assets/audio/waveComplete.ogg","assets/audio/waveComplete.mp3"]),a.loadAudio("GAME_COMPLETE_SOUND",null,["assets/audio/gameComplete.ogg","assets/audio/gameComplete.mp3"]),a.loadAudio("MUSIC1_SOUND",null,["assets/audio/music1.ogg","assets/audio/music1.mp3"]),a.loadAudio("MUSIC2_SOUND",null,["assets/audio/music2.ogg","assets/audio/music2.mp3"]),a.loadSpriteSheet("GUIDE_BUTTONS_SHEET",null,"assets/images/UI/guideButtonsSheet.png",100,40,8),a.loadSpriteSheet("SOCIAL_BUTTONS_SHEET",null,"assets/images/UI/socialButtonsSheet.png",152,61.5,4),a.loadSpriteSheet("STANDARD_BUTTONS_SHEET",null,"assets/images/UI/standardButtonsSheet.png",152,38.66,30),a.loadSpriteSheet("EXPLOSION",null,"assets/images/explode.png",128,128,16),a.loadAtlasJSONHash("SMALL_SPRITES_ATLAS",null,"assets/images/smallSprites.png","assets/settings/smallSprites.json"),a.loadAtlasJSONHash("BGS_SHEET_ATLAS",null,"assets/images/bgsSheet.png","assets/settings/bgsSheet.json"),a.loadAtlasJSONHash("OTHER_GUI_ASSETS_ATLAS",null,"assets/images/UI/otherGuiAssetsSheet.png","assets/settings/otherGuiAssetsHash.json"),a.loadJSON("SANDHI_INVADERS_DATA_JSON",null,"assets/settings/SandhiInvadersDataDiff.json"),a.loadJSON("IAST_ALPHABET_JSON",null,"assets/settings/IASTAlphabet.json"),a.loadJSON("GUIDE_MESSAGES_JSON",null,"assets/settings/guideMessages.json"),c.load.onFileError.add(function(a){c.logTextField.text+="Error loading file: "+a},a),c.load.onFileStart.add(function(a){c.logTextField.text+="Loading files, percent: "+a+"%"},a),c.load.onFileComplete.add(function(b,d,e,f,g){var h=this;h.siPreloader.preloaderTop.clear(),h.siPreloader.preloaderTop.beginFill(a.Const.Graphics.DARK_GRAY_COLOR,1),h.siPreloader.preloaderTop.drawRect(2,2,b,11),h.siPreloader.ready=!0,c.logTextField.text+="Finished loading file: "+JSON.stringify(arguments)},a),c.load.onLoadStart.add(function(a){c.logTextField.text+="Started loading files: "+a},a),c.load.onLoadComplete.add(function(){var a=this;a.loadGameCacheData(),c.logTextField.text+=a.GameMessages.FINISHED_LOADING_FILES_MSG},a),c.load.onPackComplete.add(function(){var a=this;c.logTextField.text=a.GameMessages.FINISHED_PACKING_FILES_MSG},a)},update:function(){a.siPreloader.ready===!0&&(a.siPreloader.loadingTween=b.add.tween(a.siPreloader.loadingObjects).to({alpha:0},a.Const.FADE_DURATION,a.Const.TWEEN_LINEAR,!0),a.siPreloader.loadingTween.onComplete.add(function(){var b=this;a.getFirstVisit()?b.gameObject.state.start(b.HelpScreen.KEY):b.getCurrentWaveIndex()===a.Const.WAVES_COUNT-1?b.gameObject.state.start(b.GameOverScreen.KEY):b.gameObject.state.start(b.GameScreen.KEY),b.gameObject.state.clearCurrentState()},a),a.siPreloader.ready=!1)},shutdown:function(){b=null,c.clearScreenState()}}}(window.SI)),window.SI.namespace("GameOverScreen",window.SI.Screen,function(a){"use strict";var b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null;return{init:function(){c=a.gameObject,b=this,c.sound.stopAll(),e=a.gameObject.add.audio(a.SoundAssetKeys.GAME_COMPLETE_SOUND),b.gameObjects=c.add.group(),b.menuObjects=c.add.group()},create:function(){e.play(),d=c.add.sprite(0,0,a.ImageAssetKeys.BGS_SHEET_ATLAS,"gameOverBg.png"),b.gameObjects.add(d),g=c.add.text(100,150,"",a.Utility.getTextStyle17()),g.text="Waves/Rules: "+a.Const.WAVES_COUNT+"/"+a.Const.MAX_NUM_OF_RULES,b.gameObjects.add(g),h=c.add.text(100,200,a.generateScoreText(),a.Utility.getTextStyle17()),b.gameObjects.add(h),i=c.add.text(100,250,a.generateErrorsText(),a.Utility.getTextStyle17()),b.gameObjects.add(i),f=c.add.text(100,300,"Final result: "+b.calcWinRate()+"%",a.Utility.getTextStyle17()),b.gameObjects.add(f),j=c.add.text(20,350,"Points: "+JSON.stringify(a.getWavePointsArray()),a.Utility.getTextStyle12()),j.visible=!1,b.gameObjects.add(j),k=c.add.text(20,400,"Errors: "+JSON.stringify(a.getWaveErrorsArray()),a.Utility.getTextStyle12()),k.visible=!1,b.gameObjects.add(k),l=a.GoToScreen.Button(a.HelpScreen.KEY,[b.gameObjects,b.menuObjects],175,600,a.ImageAssetKeys.STANDARD_BUTTONS_SHEET,b,null,null,null,null,7,6,6,7),b.menuObjects.add(l),m=a.SIButton.SIButton(175,650,a.ImageAssetKeys.STANDARD_BUTTONS_SHEET,b,b.showResetWindow,null,null,null,null,null,null,11,10,10,11),b.menuObjects.add(m),p=c.add.sprite(75,300,a.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"resetWindow.png"),p.visible=!1,b.menuObjects.add(p),n=a.SIButton.SIButton(85,385,a.ImageAssetKeys.STANDARD_BUTTONS_SHEET,b,b.resetGame,null,null,null,null,null,null,11,10,10,11),n.visible=!1,b.menuObjects.add(n),o=a.SIButton.SIButton(255,385,a.ImageAssetKeys.STANDARD_BUTTONS_SHEET,b,b.closeResetWindow,null,null,null,null,null,null,29,28,28,29),o.visible=!1,b.menuObjects.add(o),c.world.bringToTop(b.menuObjects),a.Utility.fadeInGroup(b.gameObjects)},calcWinRate:function(){return Math.round(100*a.updateScore()/a.Const.MAX_NUM_OF_POINTS*100/100)},showResetWindow:function(){p.visible=!0,o.visible=!0,n.visible=!0,m.visible=!1},closeResetWindow:function(){p.visible=!1,o.visible=!1,n.visible=!1,m.visible=!0},resetGame:function(){a.resetGame(),a.Utility.fadeOutGroup(b.gameObjects),a.Utility.fadeOutGroup(b.menuObjects).onComplete.add(function(){var a=this;a.gameObject.state.start(a.GameScreen.KEY),a.gameObject.state.clearCurrentState()},a)}}}(window.SI)),window.SI.namespace("GameScreen",window.SI.Screen,function(a,b,c){"use strict";var d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null,q=null,r=null,s=null,t=null,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null,K=null,L=null,M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null,U=null,V=null,W=null,X=null,Y=null,Z=null,$=null,_=null,aa=null,ba=null,ca=null,da=null,ea=null,fa=null,ga=null,ha=null,ia=null,ja=null,ka=null,la=null,ma=null,na=null,oa=null,pa=null,qa=null,ra=null,sa=null,ta=null,ua=null,va=null,wa=null,xa=null;return{muteOnOffSound:function(){var a=this,c=a.gameObject;c.sound.mute?(aa.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOn.png"),c.sound.mute=!1,c.sound.volume=b.Const.VOLUME,wa.play("",0,c.sound.volume,!0,!0),b.unmuteGame()):(aa.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"muteOff.png"),c.sound.mute=!0,c.sound.volume=0,b.muteGame()),v.saveGame()},init:function(a){v=this,w=b.gameObject,d=0,e=0,f=0,g=0,h=b.Const.SPEED_EASY,i=c.Keyboard.HELP,j=0,k=0,l=!1,n="",o="",p="",q="",w.sound.mute=b.isMuted(),w.sound.volume=w.sound.mute?0:b.Const.VOLUME,m=1===b.Utility.randomNumber(1,2),ta=b.gameObject.add.audio(b.SoundAssetKeys.ERROR_SOUND),ua=b.gameObject.add.audio(b.SoundAssetKeys.CORRECT_SOUND),va=b.gameObject.add.audio(b.SoundAssetKeys.WAVE_COMPLETE_SOUND),wa=b.gameObject.add.audio(m?b.SoundAssetKeys.MUSIC1_SOUND:b.SoundAssetKeys.MUSIC2_SOUND),w.sound.stopAll(),r=[],s=[],t=[],u=[],pa=w.add.group(),v.gameObjects=w.add.group(),qa=w.add.group(),sa=w.add.group(),ra=w.add.group(),v.menuObjects=w.add.group(),x=b.getSandhiInvadersData(),y=b.getIASTAlphabet(),e=b.getCurrentWaveIndex(),f=b.getWavePointsArray()[e],g=b.getWaveErrorsArray()[e],b.resumeGame(),b.Utility.fadeInGroup(v.gameObjects),b.Utility.fadeInGroup(v.menuObjects)},sendSingleQuoteKey:function(a){v.keypressHandler("'",39)},sendOtherKey:function(a){v.keypressHandler(null,a.keyCode)},hideComboLetterTextField:function(){R.visible=!1},pauseUnpauseGame:function(){b.isGamePaused()?(b.resumeGame(),null!==A&&null!==z&&(A.unpause(),z.unpause()),$.visible=!0,ia.visible=!1,V.visible=!1,Y.visible=!1,ca.visible=!1,L.visible=!1,U.visible=!1,I.visible=!1,ea.visible=!1,J.visible=!1,fa.visible=!1,K.visible=!1,ga.visible=!1,_.visible=!1,aa.visible=!1,da.visible=!1,w.input.keyboard.addCallbacks(v,null,null,v.keypressHandler)):(b.pauseGame(),null!==A&&null!==z&&(A.pause(),z.pause()),b.getFirstVisit()||(Y.visible=!0),$.visible=!1,_.visible=!0,ia.visible=!0,ca.visible=!0,V.visible=!0,I.visible=!0,ea.visible=!0,J.visible=!0,fa.visible=!0,K.visible=!0,ga.visible=!0,aa.visible=!0,w.input.keyboard.addCallbacks(v,null,null,null))},resetGame:function(){var a=function(){var a=this;a.gameObject.state.start(a.GameScreen.KEY),a.gameObject.state.clearCurrentState()};b.resetGame(),b.Utility.fadeOutGroup(v.gameObjects).onComplete.add(a,b),b.Utility.fadeOutGroup(v.menuObjects).onComplete.add(a,b)},saveGame:function(){v.updatePointsAndErrors(),b.saveGame(),L.visible=!0},showResetWindow:function(){W.visible=!0,X.visible=!0,Z.visible=!0,Y.visible=!1,V.visible=!1,da.visible=!1,ca.visible=!1,_.visible=!1,I.visible=!1,ea.visible=!1,K.visible=!1,ga.visible=!1,J.visible=!1,fa.visible=!1},closeResetWindow:function(){W.visible=!1,X.visible=!1,Z.visible=!1,Y.visible=!0,V.visible=!0,ca.visible=!0,_.visible=!0,I.visible=!0,ea.visible=!0,K.visible=!0,ga.visible=!0,J.visible=!0,fa.visible=!0},clearscreenTypingTextField:function(){M.text=""},startGame:function(){wa.play("",0,w.sound.volume,!0,!0),w.input.keyboard.addCallbacks(v,null,null,v.keypressHandler),v.nextRule(),ba.visible=!1,S.visible=!1,$.visible=!0,O.visible=!0,N.visible=!0,P.visible=!0,T.visible=!1},create:function(){w.physics.startSystem(c.Physics.ARCADE),xa=new c.Timer(w,!1),xa.add(b.Const.HIDE_COMBO_TEXT_TIMER_DELAY,v.hideComboLetterTextField),w.time.add(xa),B=w.input.keyboard.addKey(c.Keyboard.SPACEBAR),B.onDown.add(v.sendOtherKey,v),C=w.input.keyboard.addKey(c.Keyboard.QUOTES),C.onDown.add(v.sendSingleQuoteKey,v),D=w.input.keyboard.addKey(c.Keyboard.COLON),D.onDown.add(v.sendOtherKey,v),E=w.input.keyboard.addKey(i),E.onDown.add(v.sendOtherKey,v),F=w.input.keyboard.addKey(c.Keyboard.MINUS),F.onDown.add(v.sendOtherKey,v),G=w.input.keyboard.addKey(c.Keyboard.PLUS),G.onDown.add(v.sendOtherKey,v),H=w.input.keyboard.addKey(c.Keyboard.BACKSPACE),H.onDown.add(v.sendOtherKey,v),ha=w.add.sprite(0,0,b.ImageAssetKeys.BGS_SHEET_ATLAS,"starfield.png"),pa.add(ha),ja=w.add.sprite(0,660,b.ImageAssetKeys.SMALL_SPRITES_ATLAS,"planetSurface.png"),v.gameObjects.add(ja),na=w.add.sprite(245,680,b.ImageAssetKeys.SMALL_SPRITES_ATLAS,"cannon.png"),w.physics.enable(na,c.Physics.ARCADE),na.anchor.setTo(.5,1),sa.add(na),ma=w.add.sprite(210,655,b.ImageAssetKeys.SMALL_SPRITES_ATLAS,"turretHouse.png"),sa.add(ma),ka=w.add.sprite(0,625,b.ImageAssetKeys.SMALL_SPRITES_ATLAS,"atmosphere.png"),sa.add(ka),la=w.add.sprite(0,625,b.ImageAssetKeys.SMALL_SPRITES_ATLAS,"atmosphereBorder.png"),w.physics.enable(la,c.Physics.ARCADE),la.body.checkCollision.up=!0,la.body.checkCollision.down=!1,la.body.checkCollision.left=!1,la.body.checkCollision.right=!1,la.body.immovable=!0,sa.add(la),O=w.add.text(10,10,b.generateWaveText(r.length),b.Utility.getTextStyle20White()),O.visible=!1,v.gameObjects.add(O),N=w.add.text(10,40,b.generateScoreText(),b.Utility.getTextStyle20White()),N.visible=!1,v.gameObjects.add(N),P=w.add.text(10,70,b.generateErrorsText(),b.Utility.getTextStyle20White()),P.visible=!1,v.gameObjects.add(P),Q=w.add.text(240,50,"",b.Utility.getTextStyleScreenTypingTextWhite()),Q.alpha=.5,Q.anchor.setTo(.5,.5),Q.width=480,Q.height=240,Q.fill="White",Q.visible=!1,v.gameObjects.add(Q),b.debugMode()&&(Q.visible=!0),R=w.add.text(240,320,"",b.Utility.getTextStyleScreenTypingTextWhite()),R.alpha=.5,R.anchor.setTo(.5,.5),R.width=480,R.height=240,R.fill="White",R.visible=!1,v.gameObjects.add(R),M=w.add.text(200,520,"",b.Utility.getTextStyleScreenTypingTextGreen()),M.alpha=.5,M.anchor.setTo(.5,.5),M.width=480,M.height=240,v.menuObjects.add(M),ia=w.add.sprite(0,0,b.ImageAssetKeys.BGS_SHEET_ATLAS,"greyBg.png"),ia.alpha=.5,ia.visible=!1,v.menuObjects.add(ia),I=w.add.text(200,115,"Beginner",b.Utility.getTextStyle20()),I.visible=!1,v.menuObjects.add(I),ea=w.add.sprite(150,110,b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,v.enableDisableChkBox(b.Const.SPEED_BEGINNER)),ea.inputEnabled=!0,ea.visible=!1,ea.events.onInputDown.add(function(){var a=this;a.setGameSpeed(a.Const.SPEED_BEGINNER),v.saveGame(),ea.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png"),fa.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png"),ga.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png")},b),v.menuObjects.add(ea),J=w.add.text(200,175,"Intermediate",b.Utility.getTextStyle20()),J.visible=!1,v.menuObjects.add(J),fa=w.add.sprite(150,170,b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,v.enableDisableChkBox(b.Const.SPEED_INTERMEDIATE)),
fa.inputEnabled=!0,fa.visible=!1,fa.events.onInputDown.add(function(){var a=this;a.setGameSpeed(a.Const.SPEED_INTERMEDIATE),v.saveGame(),ea.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png"),fa.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png"),ga.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png")},b),v.menuObjects.add(fa),K=w.add.text(200,235,"Advanced",b.Utility.getTextStyle20()),K.visible=!1,v.menuObjects.add(K),ga=w.add.sprite(150,230,b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,v.enableDisableChkBox(b.Const.SPEED_ADVANCED)),ga.inputEnabled=!0,ga.visible=!1,ga.events.onInputDown.add(function(){var a=this;a.setGameSpeed(a.Const.SPEED_ADVANCED),v.saveGame(),ea.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png"),fa.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOff.png"),ga.loadTexture(b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"checkBoxOn.png")},b),v.menuObjects.add(ga),S=w.add.text(50,50,b.Const.GAME_NAME,b.Utility.getTextStyleGameTitle()),v.menuObjects.add(S),T=w.add.text(130,420,b.Const.GameMessages.MADE_BY_MSG,b.Utility.getTextStyleMadeBy()),T.wordWrap=!0,T.wordWrapWidth=240,v.menuObjects.add(T),U=w.add.text(50,690,b.Const.GameMessages.REPORT_A_BUG_MSG,b.Utility.getTextStyle12()),U.visible=!1,v.menuObjects.add(U),ba=b.SIButton.SIButton(170,300,b.ImageAssetKeys.STANDARD_BUTTONS_SHEET,a,v.startGame,null,null,null,null,null,null,5,4,4,5),v.menuObjects.add(ba),$=b.SIButton.SIButton(410,10,b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,w.time.events,v.pauseUnpauseGame,null,null,null,null,null,null,"menuPauseButtonOver.png","menuPauseButton.png","menuPauseButton.png","menuPauseButtonOver.png"),$.visible=!1,v.menuObjects.add($),aa=w.add.sprite(410,10,b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,b.isMuted()?"muteOff.png":"muteOn.png"),aa.inputEnabled=!0,aa.visible=!1,aa.events.onInputDown.add(v.muteOnOffSound,b),v.menuObjects.add(aa),ca=b.GoToScreen.Button(b.HelpScreen.KEY,[v.gameObjects,v.menuObjects],175,300,b.ImageAssetKeys.STANDARD_BUTTONS_SHEET,v,null,null,null,null,7,6,6,7),ca.visible=!1,v.menuObjects.add(ca),V=b.SIButton.SIButton(175,350,b.ImageAssetKeys.STANDARD_BUTTONS_SHEET,a,v.saveGame,null,null,null,null,null,null,13,12,12,13),V.visible=!1,v.menuObjects.add(V),Y=b.SIButton.SIButton(175,400,b.ImageAssetKeys.STANDARD_BUTTONS_SHEET,a,v.showResetWindow,null,null,null,null,null,null,11,10,10,11),Y.visible=!1,v.menuObjects.add(Y),L=w.add.text(210,455,"Saved!",b.Utility.getTextStyle17()),L.visible=!1,v.menuObjects.add(L),W=w.add.sprite(75,300,b.ImageAssetKeys.OTHER_GUI_ASSETS_ATLAS,"resetWindow.png"),W.visible=!1,v.menuObjects.add(W),Z=b.SIButton.SIButton(85,385,b.ImageAssetKeys.STANDARD_BUTTONS_SHEET,a,v.resetGame,null,null,null,null,null,null,11,10,10,11),Z.visible=!1,v.menuObjects.add(Z),X=b.SIButton.SIButton(255,385,b.ImageAssetKeys.STANDARD_BUTTONS_SHEET,a,v.closeResetWindow,null,null,null,null,null,null,29,28,28,29),X.visible=!1,v.menuObjects.add(X),_=b.SIButton.SIButton(175,500,b.ImageAssetKeys.STANDARD_BUTTONS_SHEET,a,v.pauseUnpauseGame,null,null,null,null,null,null,19,18,18,19),_.visible=!1,v.menuObjects.add(_),da=w.add.button(175,550,b.ImageAssetKeys.STANDARD_BUTTONS_SHEET,function(){var a=this;a.open(b.Const.BLOG_LINK,b.Const.BLOG_NAME,[])},a,1,0,0,1),da.visible=!1,v.menuObjects.add(da),w.world.bringToTop(v.menuObjects)},updatePointsAndErrors:function(){b.setWavePoints(e,f),b.setWaveErrors(e,g),N.text=b.generateScoreText(),P.text=b.generateErrorsText()},update:function(){var a=null,c=null;na.angle=b.Utility.radToDeg(w.physics.arcade.angleToXY(na,j,k))+90,null!==A&&(w.physics.arcade.collide(la,A.graphics)&&(w.input.keyboard.addCallbacks(v,null,null,null),a=r[d],b.incrGameErrors(),a.userAnswerIsCorrect=!1,R.text=a.COMBINED_LETTER,R.visible=!0,xa.expired&&xa.add(b.Const.HIDE_COMBO_TEXT_TIMER_DELAY,v.hideComboLetterTextField),xa.start(),u=[],c=w.add.sprite(b.Utility.randomNumber(40,440),b.Utility.randomNumber(665,705),b.ImageAssetKeys.SMALL_SPRITES_ATLAS,"lavaCrater.png"),c.anchor.setTo(.5,.5),qa.add(c),v.addExplosion(c.x,c.y),f-=1,g+=1,v.updatePointsAndErrors(),v.nextRule()),w.physics.arcade.collide(oa,A.graphics)?(oa.destroy(),A.hide(),v.addExplosion(j,k),j=z.boxText.x,k=z.boxText.y,v.shootBomb(z,j,k)):A.updatePosition()),null!==z&&(w.physics.arcade.collide(oa,z.graphics)?($.visible=!0,oa.destroy(),z.hide(),b.resumeGame(),v.addExplosion(j,k),v.nextRule()):z.updatePosition())},enableDisableChkBox:function(a){return a===b.getGameSpeed()?"checkBoxOn.png":"checkBoxOff.png"},addExplosion:function(a,c){var d=b.gameObject.add.audio(b.SoundAssetKeys.EXPLODE_SOUND),e=w.add.sprite(a,c,b.ImageAssetKeys.EXPLOSION);d.play(),e.anchor.setTo(.5,.5),e.animations.add(b.ImageAssetKeys.EXPLOSION),e.animations.play(b.ImageAssetKeys.EXPLOSION).onComplete.addOnce(function(){ra.removeAll()},e),ra.add(e)},shootBomb:function(a,d,e){var f=b.gameObject.add.audio(b.SoundAssetKeys.BLAST_SOUND);null!==a&&(b.pauseGame(),$.visible=!1,a.pause(),oa=w.add.sprite(na.x,na.y,b.ImageAssetKeys.SMALL_SPRITES_ATLAS,"bomb.png"),pa.add(oa),w.physics.enable(oa,c.Physics.ARCADE),w.physics.arcade.angleToXY(oa,d,e),w.physics.arcade.moveToXY(oa,d,e,b.Const.BOMB_SPEED),f.play())},goToGameOverScreen:function(){var a=function(){var a=this;a.gameObject.state.start(a.GameOverScreen.KEY),a.gameObject.state.clearCurrentState()};b.Utility.fadeOutGroup(v.gameObjects).onComplete.add(a,b),b.Utility.fadeOutGroup(v.menuObjects),b.Utility.fadeOutGroup(pa),b.Utility.fadeOutGroup(qa),b.Utility.fadeOutGroup(ra),b.Utility.fadeOutGroup(sa)},nextRule:function(){var a=null,c=null,h=null,i=null,j=null,k=null,l=b.Utility.getCurrentWaveLength(e);for(null===w.input.keyboard.onPressCallback&&w.input.keyboard.addCallbacks(v,null,null,v.keypressHandler),s=[],t=[],u=[],r=[],M.text="",a=0;l>a;a+=1)j=x[e][a],j.played&&j.userAnswerIsCorrect||r.push(j);if(0===r.length){if(e===b.Const.WAVES_COUNT-1)return v.saveGame(),void v.goToGameOverScreen();va.play(),e=b.incrCurrentWaveIndex(),f=b.getWavePointsArray()[e],g=b.getWaveErrorsArray()[e],v.saveGame(),L.visible=!1,v.nextRule()}else{for(O.text=b.generateWaveText(r.length),d=b.Utility.randomNumber(0,r.length-1),r[d].played=!0,n=r[d].LEFT_LETTER,null===A||null===A.graphics||null===A.boxText||null===z.graphics.body?(A=b.LetterBox.LetterBox(b.Utility.randomNumber(40,b.Const.LEFT_LETTER_BOUNDARY),b.Const.DEFAULT_LETTER_Y,b.getGameSpeed(),n),v.gameObjects.add(A.graphics),v.gameObjects.add(A.boxText)):(A.boxText.text=n,A.move(b.Utility.randomNumber(40,b.Const.LEFT_LETTER_BOUNDARY),b.Const.DEFAULT_LETTER_Y),A.show(),A.unpause()),o=r[d].RIGHT_LETTER,null===z||null===z.graphics||null===z.boxText||null===z.graphics.body?(z=b.LetterBox.LetterBox(b.Utility.randomNumber(b.Const.RIGHT_LETTER_BOUNDARY,b.Const.STAGE_WIDTH-40),b.Const.DEFAULT_LETTER_Y,b.getGameSpeed(),o),v.gameObjects.add(z.graphics),v.gameObjects.add(z.boxText)):(z.boxText.text=o,z.move(b.Utility.randomNumber(b.Const.RIGHT_LETTER_BOUNDARY,b.Const.STAGE_WIDTH-40),b.Const.DEFAULT_LETTER_Y),z.show(),z.unpause()),p=r[d].COMBINED_LETTER,Q.text=p,a=0;a<p.length;a+=1)h=p.charCodeAt(a),t[a]=h;for(a=0;a<t.length;a+=1)if(i=b.Utility.getIASTChar(t[a]),null!==i)for(k=i.analogCodes,c=0;c<k.length;c+=1)s.push(k[c]);else s.push(t[a])}},keypressHandler:function(a,c){var e=(p.length,q.length,""),h="",i=null;void 0===a||null===a?(a=String.fromCharCode(c),u.push(c)):u.push(a.toLowerCase().charCodeAt(0)),q+=a,e=s.join(","),h=u.join(","),e===h?(i=r[d],j=A.boxText.x,k=A.boxText.y,z.pause(),v.shootBomb(A,j,k),f+=b.Utility.parseInt(i.DIFFICULTY),i.userAnswerIsCorrect=!0,l||(M.text="",l=!0),M.fill="Green",M.text+=a,w.input.keyboard.addCallbacks(v,null,null,null),ua.play()):0===e.indexOf(h)?(l||(M.text="",l=!0),M.text+=a,M.fill="Green",ua.play()):(l=!1,f-=1,g+=1,M.text+=a,M.fill="Red",u=[],ta.play()),v.updatePointsAndErrors()}}}(window,window.SI,Phaser)),window.SI.namespace("HelpScreen",window.SI.Screen,function(a){"use strict";var b=null,c=null,d=0,e=4,f=null,g=null,h=null,i=null,j=function(c){var f=b.gameObjects.getAt(c),g=f.name;0===d?i.button.visible=!1:i.button.visible=!0,d===e?h.button.visible=!1:h.button.visible=!0,b.gameObjects.forEach(function(b){var c=this;b.name===g?c.gameObject.add.tween(b).to({alpha:1},a.Const.FADE_DURATION,c.Const.TWEEN_LINEAR,!0):b.alpha=0},a)};return h={button:null,click:function(){var f=c.add.tween(b.gameObjects.getAt(d)).to({alpha:0},a.Const.FADE_DURATION,a.Const.TWEEN_LINEAR,!0);f.onComplete.add(function(){e>d&&(d+=1),j(d)},a)}},i={button:null,click:function(){var e=c.add.tween(b.gameObjects.getAt(d)).to({alpha:0},a.Const.FADE_DURATION,a.Const.TWEEN_LINEAR,!0);e.onComplete.add(function(){d>0&&(d-=1),j(d)},a)}},{init:function(){c=a.gameObject,b=this,b.gameObjects=c.add.group(),b.menuObjects=c.add.group(),f=c.cache.getJSON(a.Settings.GUIDE_MESSAGES_JSON),e=f.length-1},create:function(){f.forEach(function(b,e,f){var g=this,h=c.add.text(50,50,b,a.Utility.getTextStyle20());h.name="guide"+e,h.wordWrap=!0,h.wordWrapWidth=380,h.alpha=e===d?1:0,g.gameObjects.add(h)},b),h.button=a.SIButton.SIButton(360,670,a.ImageAssetKeys.GUIDE_BUTTONS_SHEET,b,h.click,null,null,null,null,null,null,3,2,2,3),b.menuObjects.add(h.button),i.button=a.SIButton.SIButton(10,670,a.ImageAssetKeys.GUIDE_BUTTONS_SHEET,b,i.click,null,null,null,null,null,null,1,0,0,1),b.menuObjects.add(i.button),g=a.GoToScreen.Button(a.GameScreen.KEY,[b.gameObjects,b.menuObjects],170,670,a.ImageAssetKeys.STANDARD_BUTTONS_SHEET,b,null,null,null,null,21,20,20,21),b.menuObjects.add(g),j(d),c.world.bringToTop(b.menuObjects)}}}(window.SI)),window.SI.namespace("IASTAlphabet",{},function(a){"use strict";var b=(a.gameObject,a.GameScreen,"a ā i ī u ū ṛ ṝ ḷ ḹ ṁ ḥ k kh g gh ñ c ch j jh ṅ ṭ ṭh ḍ ḍh ṇ t th d dh n p ph b bh m ś ṣ s h y r l v"),c="a -a i -i u -u r. -r. l. -l. .m h. k kh g gh ~n c ch j jh .n t. t.h d. d.h n. t th d dh n p ph b bh m 's s. s h y r l v",d=a.getIASTAlphabet();return{getIASTAlphabet:function(){return b},getIASTAnalogAlphabet:function(){return c},generateAlphabet:function(){var a=b.split(" "),e=c.split(" ");a.forEach(function(a,b,c){var f=a.charCodeAt(0);d[b]={str:a,codeValue:f,analog:e[b]}})}}}(window.SI)),window.SI.namespace("LetterBox",{},function(a,b){"use strict";a.GameScreen;return{LetterBox:function(c,d,e,f){var g=null,h=null,i=(2===f.length?10:15,{graphics:null,boxText:null});return g=a.gameObject.add.sprite(c,d,a.ImageAssetKeys.SMALL_SPRITES_ATLAS,f.length<3?"letterBox.png":"letterBoxWide.png"),i.graphics=g,a.gameObject.physics.enable(i.graphics,b.Physics.ARCADE),i.graphics.anchor.setTo(.5,.5),i.graphics.body.checkCollision.up=!1,i.graphics.body.checkCollision.left=!1,i.graphics.body.checkCollision.right=!1,i.graphics.body.checkCollision.down=!0,i.graphics.body.velocity.y=e,i.graphics.allowGravity=!1,i.graphics.allowRotation=!1,h=a.gameObject.add.text(c,d,f),h.anchor.setTo(.5,.5),h.fill="black",h.align="center",h.fontSize=24,h.fontWeight="bold",h.font="Arial",h.x=c,h.y=d,i.boxText=h,i.paused=!1,i.visible=!0,i.pause=function(){i.graphics.body.velocity.y=0,i.paused=!0},i.unpause=function(){i.graphics.body.velocity.y=a.getGameSpeed(),i.paused=!1},i.updatePosition=function(){i.boxText.x=i.graphics.x,i.boxText.y=i.graphics.y},i.hide=function(){i.graphics.visible=!1,i.boxText.visible=!1,i.visible=!1},i.show=function(){i.graphics.visible=!0,i.boxText.visible=!0,i.visible=!0},i.destroy=function(){i.graphics.destroy(),i.boxText.destroy(),i.graphics=null,i.boxText=null},i.move=function(a,b){i.graphics.x=a,i.graphics.y=b,i.boxText.x=a,i.boxText.y=b},i}}}(window.SI,Phaser));